headgear = {
	usage = game
	selection_behavior = weighted_random
	fallback = no_headgear

    no_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = no_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 90000
                scope:character ?= {
                    OR = {
                        has_role = agitator
                        has_template = fra_delescluze_character_template # Never ever give Louis Delescluze a hat, any hat. His forehead is too powerful.
                        has_template = BRZ_getulio_vargas_character_template # Vargas is forbidden from wearing hats.
                        has_template = jhn_rani_of_jhansi # lakshmibai's hair is actually a hat
                        has_template = BIC_jiddu_krishnamurti
                        has_template = BIC_khudiram_bose
                        has_template = BIC_amy_carmichael
                        has_template = BIC_charles_canning
                        has_template = BIC_henry_petty-fitzmaurice
                        has_template = BIC_jamshedji_tata
                        has_template = BIC_pandita_ramabai_sarasvati
                        has_template = BIC_reginald_dyer
                        has_template = aus_klemens_von_metternich
                    }
                    is_historical = yes
                    NOR = {
                        has_template = rus_lenin_character_template
                        has_template = gbr_pankhurst_character_template
                        has_template = agitator_emiliano_zapata
                    }
                }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 5000
                scope:pop ?= {
                    is_pop_type = clergymen
                    religion = {
                        has_discrimination_trait = heritage_christian
                    }
                    culture = {
                        OR = {
                            has_discrimination_trait_group = heritage_group_middle_eastern
                            has_discrimination_trait = heritage_abyssinian
                            cu:circassian = this
                        }
                    }
                }
            }
        }
    }

### AGITATORS ###

    european_agitator_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_headgear_agitators
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                european_clothes_trigger = yes
                slavic_clothes_trigger = no
                NOT = {
                    south_american_clothes_character_trigger = yes
                }
                agitator_character_trigger = yes
            }
        }
    }

    south_american_agitator_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = south_american_headgear_agitators
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                south_american_clothes_character_trigger = yes
                scope:character ?= {
                    NOR = {
                        culture = cu:brazilian
                        # culture = cu:sulista
                        # culture = cu:amazonic
                        # culture = cu:paulista
                        # culture = cu:nordestino
                        culture = cu:afro_brazilian
                    }
                }
                OR = {
                    agitator_character_trigger = yes
                    scope:character ?= {
                        OR = {
                            has_trait = social_bandit
                            has_trait = bandit
                        }
                    }
                }
            }
        }
    }

    brazilian_agitator_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = male_headgear_gaucho_
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 90000
                OR = {
                    scope:character ?= {
                        has_template = BRZ_virgulino_ferreira
                    }
                    scope:character ?= {
                        OR = {
                            has_role = agitator
                            AND = { # Monarchs don't get to wear this hat, but republican rulers can
                                NAND = {
                                    is_ruler = yes
                                    home_country ?= {
                                        has_law_or_variant = law_type:law_monarchy
                                    }
                                }
                                OR = {
                                    has_trait = social_bandit
                                    has_trait = bandit
                                }
                            }
                        }
                    }
                }
            }
        }
    }

    arabic_agitator_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = arabic_headgear_agitators
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 1000
                scope:character ?= {
                    culture = {
                        has_discrimination_trait_group = heritage_group_middle_eastern
                        NOT = { has_discrimination_trait_group = language_group_turkic }
                    }
                }
                agitator_character_trigger = yes
            }
        }
    }

    korean_agitator_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = korean_headgear_agitators
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                scope:character ?= {
                    culture = cu:korean
                }
                agitator_character_trigger = yes
            }
        }
    }

    japanese_agitator_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = japanese_headgear_agitators
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 2000
                japanese_clothes_trigger = yes
                OR = {
                    agitator_character_trigger = yes
                    AND = {
                        politician_clothes_trigger = yes
                        armed_forces_clothes_trigger = yes
                        scope:character ?= {
                            owner ?= {
                                has_variable = meiji_restoration_complete
                            }
                            has_ideology = ideology:ideology_traditionalist
                        }
                    }
                }
            }
        }
    }

### END OF AGITATORS. ###

### HISTORICAL CHARACTER CLOTHING ###

    historical_lenin_headgear = {
        dna_modifiers = {
            accessory = {
               mode = add
               gene = headgear
               template = slavic_headgear_agitator_lenin
               range = { 0 1.0 }
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 90000
                scope:character ?= {
                    has_template = rus_lenin_character_template
                }
            }
        }
    }

    historical_emmeline_pankhurst_headgear = {
        dna_modifiers = {

           accessory = {
               mode = add
               gene = headgear
               template = female_headgear_agitator_pankhurst
               range = { 0 0.1 }
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 90000
                scope:character ?= {
                    has_template = gbr_pankhurst_character_template
                }
            }
        }
    }

    historical_zapata_headgear = {
        dna_modifiers = {
            accessory = {
               mode = add
               gene = headgear
               template = south_american_headgear_agitators
               range = { 0 0.1}
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 90000
                scope:character ?= {
                    has_template = agitator_emiliano_zapata
                }
            }
        }
    }

    historical_reza_pahlavi_headgear = {
        dna_modifiers = {
            accessory = {
               mode = add
               gene = headgear
               template = reza_shah_pahlavi_cap
               range = { 0 1.0 }
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 90000

                has_dlc_feature = ep1_cosmetics

                scope:character ?= {
                    has_template = PER_reza_pahlavi
                }
            }
        }
    }

    naser_qajar_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = arabic_naser_qajar
                range = { 0 1 } # For the randomness to work correctly
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 90000

                has_dlc_feature = ep1_cosmetics

                scope:character ?= {
                    age > 12
                    has_template = per_nasir_al_din_qajar_template
                    is_ruler = yes
                }
            }
        }
    }

	historical_tatya_tope_hat = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = tatya_tope
				range = { 0 1 }
			}
		}
		weight = {
            base = 0
            modifier = {
                add = 90000

                has_dlc_feature = ip2_cosmetics

                scope:character ?= {
                    has_template = gwa_general_tope
                }
            }
        } }

	historical_jankoji_rao_scindia_ii_hat = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = jayaji_rao_scindia
				range = { 0 1 }
			}
				}
		weight = {
            base = 0
            modifier = {
                add = 90000

                has_dlc_feature = ip2_cosmetics

                scope:character ?= {
                    has_template = GWA_jankoji_roa_scindia
                }
            }
        }
	}

    historical_maharaja_singh_hat = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = maharaja_singh_01
                range = { 0 1 }
            }
                }
        weight = {
            base = 0
            modifier = {
                add = 90000

                has_dlc_feature = ip2_cosmetics

                scope:character ?= {
                    AND = {
                        age >= define:NCharacters|ADULT_AGE
                        has_template = pan_duleep_singh
                    }
                }
            }
        }
    }


    historical_indian_high_02_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = headgear_indian_high_02
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 90000

                has_dlc_feature = ip2_cosmetics

                scope:character ?= {
                    has_template = BIC_mithuben_petit
                }
            }
        }
    }

    historical_india_royalty_03_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = indian_royalty_03
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 90000
                has_dlc_feature = ip2_cosmetics
                scope:character ?= {
                    has_template = BIC_JOD_pratap_singh_of_idar
                }
            }
            modifier = {
                add = 1000
                has_dlc_feature = ip2_cosmetics
                scope:character ?= {
                    is_female = no
                    culture = { cu:rajput = this }
                    OR = {
                        has_role = general
                        AND = {
                            armed_forces_clothes_trigger = yes
                            politician_clothes_trigger = yes
                            is_ruler = no
                        }
                        is_ruler = yes
                    }
                }
            }
        }
    }

    historical_india_royalty_03_headgear_british_addenda = { # technically not headgear but very dependent on the above bit
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = indian_royalty_03
                range = { 0 1 }
            }
            accessory = {
                mode = add
                gene = power_blocks
                template = male_necklace_indian_headgear_01 # a portrait of Queen Victoria that fits male_headgear_indian_royalty_03 only
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 90000
                has_dlc_feature = ip2_cosmetics
                scope:character ?= {
                    has_template = BIC_JOD_pratap_singh_of_idar
                    owner ?= {
                        OR = {
                            c:GBR ?= this
                            AND = {
                                exists = top_overlord
                                exists = c:GBR
                                top_overlord = c:GBR
                            }
                        }
                    }
                }
            }
            modifier = {
                add = 1000
                has_dlc_feature = ip2_cosmetics
                scope:character ?= {
                    is_female = no
                    culture = { cu:rajput = this }
                    OR = {
                        has_role = general
                        AND = {
                            armed_forces_clothes_trigger = yes
                            politician_clothes_trigger = yes
                            is_ruler = no
                        }
                        is_ruler = yes
                    }
                    owner ?= {
                        OR = {
                            c:GBR ?= this
                            AND = {
                                exists = top_overlord
                                exists = c:GBR
                                top_overlord = c:GBR
                            }
                        }
                    }
                }
            }
        }
    }

    historical_jawaharlal_nehru_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = ghandi_topi_01
                accessory = male_headgear_ghandi_topi_01
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 90000
                has_dlc_feature = ip2_cosmetics
                scope:character ?= {
                    has_template = BIC_jawaharlal_nehru
                }
            }
        }
    }

    count_dracula = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_tophat
                range = { 0 1 }
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 90000

                scope:character ?= {
                    OR = {
                        has_template = canonic_count_dracula
                        has_template = exile_count_dracula
                    }
                }
            }
        }
    }

    historical_muhammad_ali_jinnah_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = headgear_muhammad_ali_jinnah
                accessory = male_headgear_historical_muhammad_ali_jinnah
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 90000

                scope:character ?= {
                    has_template = BIC_muhammad_ali_jinnah
                }
            }
        }
    }

    indian_dwarkanath_tagore_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = indian_dwarkanath_tagore
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 90000

                has_dlc_feature = ip2_cosmetics

                scope:character ?= {
                    has_template = BIC_dwarkanath_tagore
                }
            }
        }
    }

    indian_bhagat_singh_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = bhagat_singh
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 90000

                has_dlc_feature = ip2_cosmetics

                scope:character ?= {
                    has_template = BIC_bhagat_singh
                }
            }
        }
    }

    indian_radhakanta_deb_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = radhakanta_deb
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 90000

                has_dlc_feature = ip2_cosmetics

                scope:character ?= {
                    has_template = BIC_radhakanta_deb
                }
            }
        }
    }

    ceo_talaat_harb_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = arabic_fez
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 90000
                has_dlc_feature = mp1_cosmetics
                scope:character ?= {
                     AND = {
                        has_template = EGY_talaat_harb
                        has_role = executive
                    }
                }
            }
        }
    }

    ceo_isambard_kingdom_brunel_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_executive_hats
                range = { 0 0.5 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 90000
                has_dlc_feature = mp1_cosmetics
                scope:character ?= {
                    AND = {
                        has_template = GBR_isambard_kingdom_brunel
                        has_role = executive
                    }
                }
            }
        }
    }

    HBC_george_simpson_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = no_headgear
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 90000
                scope:character ?= {
                    AND = {
                        has_template = HBC_george_simpson
                        has_role = executive
                    }
                }
            }
        }
    }

    BIC_george_eden_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = no_headgear
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 90000
                scope:character ?= {
                    AND = {
                        has_template = BIC_george_eden
                        has_role = executive
                    }
                }
            }
        }
    }

    USA_thomas_edison_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = no_headgear
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 90000
                scope:character ?= {
                    AND = {
                        has_template = usa_thomas_edison_character_template
                        has_role = executive
                    }
                }
            }
        }
    }

    USA_robert_e_lee_wilson_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = no_headgear
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 90000
                scope:character ?= {
                    AND = {
                        has_template = usa_robert_e_lee_wilson
                        has_role = executive
                    }
                }
            }
        }
    }

    GBR_john_maple_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = no_headgear
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 90000
                scope:character ?= {
                    AND = {
                        has_template = GBR_john_maple
                        has_role = executive
                    }
                }
            }
        }
    }

    SAF_cecil_rhodes_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = no_headgear
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 90000
                scope:character ?= {
                    AND = {
                        has_template = SAF_cecil_rhodes
                        has_role = executive
                    }
                }
            }
        }
    }

    NOR_sam_eyde_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = no_headgear
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 90000
                scope:character ?= {
                    AND = {
                        has_template = NOR_sam_eyde
                        has_role = executive
                    }
                }
            }
        }
    }

    petar_II_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = male_headgear_historical
                accessory = male_headgear_petar_ii_petrovic_njegos
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 90000
                scope:character ?= {
                    OR = {
                        has_template = mon_petar_II_petrovic_njegos
                        has_template = mon_nikola_petrovic_njegos
                        has_template = mon_general_novica_cerovic
                    }
                }
            }
        }
    }

    ali_pasha_rizvanbegovic_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = abdul_hamid_ii_fez
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 90000
                scope:character ?= {
                    has_template = mon_ali_pasha_rizvanbegovic
                }
            }
        }
    }

    mirko_petrovic_njegos_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = cossack_headgear
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 90000
                scope:character ?= {
                    has_template = mon_general_mirko_petrovic_njegos
                }
            }
        }
    }


### END OF HISTORICAL CLOTHING ###

    chinese_imperial_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = chinese_imperial_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
               add = 100
               chinese_imperial_clothes_trigger = yes
            }
        }
    }

    japanese_imperial_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = Japanese_imperial_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                japanese_imperial_clothes_trigger = yes
            }
        }
    }

    european_royal_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_royal_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
               add = 100
               european_clothes_trigger = yes
               monarchy_clothes_trigger = yes
            }
            modifier = {
                add = 90000
                scope:character ?= {
                    age <= define:NCharacters|ADULT_AGE
        }
    }
        }
    }

    european_common_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_common_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 10
                european_clothes_trigger = yes
                politician_clothes_trigger = yes
                armed_forces_clothes_trigger = no
                NAND = {
                    OR = {
                        montenegrin_clothes_trigger = yes
                        serbian_clothes_trigger = yes
                    }
                    scope:character ?= {
                        AND = {
                            has_role = politician
                            is_interest_group_type = ig_rural_folk
                            owner ?= {
                                NOT = {
                                    has_technology_researched = rifling
                                }
                            }
                        }
                    }
                }
            }
            modifier = {
                add = 90000
                scope:character ?= {
                    OR = {
                        has_template = agitator_alfred_hugenberg
                        has_template = agitator_john_stuart_mill
                    }
                }
            }
        }
    }

    indian_military_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = arabic_turban
                range = { 0 0.25 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 1000
                OR = {
                    AND = {
                        exists = scope:pop
                        scope:pop = {
                            religion = rel:sikh
                            NOT = { is_pop_type = clergymen }
                        }
                    }
                    AND = {
                        exists = scope:character
                        scope:character = {
                            religion = rel:sikh
                            NAND = {
                                is_ruler = yes
								exists = home_country
                                home_country = {
                                    has_law_or_variant = law_type:law_monarchy
                                }
                            }
                        }
                    }
                    AND = {
                        indian_clothes_pop_trigger = yes
                        OR = {
                            soldier_clothes_pop_trigger = yes
                            officers_clothes_pop_trigger = yes
                        }
                    }
                }
            }
        }
    }

    indian_sikh_clergy_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = indian_common_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 1000
                exists = scope:pop
                scope:pop = {
                    religion = rel:sikh
                    is_pop_type = clergymen
                }
            }
        }
    }

    european_military_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_military_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                republic_clothes_trigger = no
                european_clothes_trigger = yes
                american_clothes_trigger = no
                hungarian_clothes_trigger = no
                british_empire_clothes_trigger = no
                french_empire_clothes_trigger = no
                russian_empire_clothes_trigger = no
                austrian_empire_clothes_trigger = no
                german_clothes_trigger = no
                bulgarian_clothes_trigger = no
                serbian_clothes_trigger = no
                montenegrin_clothes_trigger = no
                NOT = {
                    scope:character ?= {
						exists = home_country
                        home_country = {
                            c:PLA ?= this
                            is_subject = no
                        }
                        age >= define:NCharacters|ADULT_AGE
                    }
                }
                agitator_character_trigger = no
                OR = {
                    scope:character = {
                        has_role = general
                        is_ruler = no
                    }
                    AND = {
                        armed_forces_clothes_trigger = yes
                        politician_clothes_trigger = yes
                    }
                    officers_clothes_pop_trigger = yes
                }
            }
        }
    }

    european_admiral_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_admiral_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                european_clothes_trigger = yes
                agitator_character_trigger = no
                OR = {
                    scope:character = {
                       has_role = admiral
                       age >= define:NCharacters|ADULT_AGE
                    }
                    scope:character = {
                        has_role = general
                        is_ruler = yes
						exists = home_country
                        home_country = {
                            NOT = { has_law_or_variant = law_type:law_monarchy}
                        }
                    }
                }
            }
        }
    }

    vivandiere_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = vivandiere_headgear
                range = { 0 1 } # For the randomness to work correctly

            }
        }
        weight = {
            base = 0
            modifier = {
                add = 10000

                OR = {
                    european_clothes_trigger = yes
                    scope:character ?= {
                        OR = {
                            culture = cu:cherokee
                            culture = cu:seminole
                        }
                    }
                    african_diaspora_clothes_trigger = yes
                }
                scope:character ?= {
                    is_female = yes
                    age >= define:NCharacters|ADULT_AGE
                    OR = {
                        has_role = general
                        has_role = admiral
                        AND = {
                            is_interest_group_type = ig_armed_forces
                            has_role = politician
                            OR = {  # A monarch shouldn't wear this, but a republican ruler can
                                AND = {
                                    is_ruler = no
                                    is_heir = no
                                    home_country ?= {
                                        has_law_or_variant = law_type:law_monarchy
                                    }
                                }
                                AND = {
                                    is_ruler = yes
                                    home_country ?= {
                                        NOT = { has_law_or_variant = law_type:law_monarchy }
                                    }
                                }
                            }
                        }
                        AND = {
                            has_role = agitator
                            is_interest_group_type = ig_armed_forces
                        }
                    }
                    owner ?= {
                        NOT = { has_technology_researched = bolt_action_rifles }
                    }
                }
            }
        }
    }

    female_military_late_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = female_headgear_european_common_02
                range = { 0 1 } # For the randomness to work correctly

            }
        }
        weight = {
            base = 0
            modifier = {
                add = 10000

                OR = {
                    european_clothes_trigger = yes
                    scope:character ?= {
                        OR = {
                            culture = cu:cherokee
                            culture = cu:seminole
                        }
                    }
                    african_diaspora_clothes_trigger = yes
                }
                scope:character ?= {
                    is_female = yes
                    age >= define:NCharacters|ADULT_AGE
                    OR = {
                        has_role = general
                        has_role = admiral
                        AND = {
                            is_interest_group_type = ig_armed_forces
                            has_role = politician
                            OR = {  # A monarch shouldn't wear this, but a republican ruler can
                                AND = {
                                    is_ruler = no
                                    is_heir = no
                                    home_country ?= {
                                        has_law_or_variant = law_type:law_monarchy
                                    }
                                }
                                AND = {
                                    is_ruler = yes
                                    home_country ?= {
                                        NOT = { has_law_or_variant = law_type:law_monarchy }
                                    }
                                }
                            }
                        }
                        AND = {
                            has_role = agitator
                            is_interest_group_type = ig_armed_forces
                        }
                    }
                    owner ?= {
                        has_technology_researched = bolt_action_rifles
                    }
                }
            }
        }
    }

    american_military_early_headgear = {
        # when updating triggers on this, please update american_military_hairstyles in game\gfx\portraits\portrait_modifiers\01_headgear.txt as well so that triggers continue to match up
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = black_cap
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 10000

                c:ARC ?= {
                    NOT = { has_technology_researched = rifling }
                }
                american_clothes_pop_trigger = yes
                OR = {
                    officers_clothes_pop_trigger = yes
                    soldier_clothes_pop_trigger = yes
                }
            }
        }
    }

    american_military_headgear = {
        # when updating triggers on this, please update american_military_hairstyles in game\gfx\portraits\portrait_modifiers\01_headgear.txt as well so that triggers continue to match up
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = american_military_headgear
                range = { 0 0.8 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                OR = {
                    AND = {
                        c:ARC ?= {
                            has_technology_researched = rifling
                            NOT = { has_technology_researched = bolt_action_rifles }
                        }
                        american_clothes_pop_trigger = yes
                        OR = {
                            officers_clothes_pop_trigger = yes
                            soldier_clothes_pop_trigger = yes
                        }
                    }
                    AND = {
                        american_clothes_trigger = yes
                        agitator_character_trigger = no
                        OR = {
                            scope:character ?= {
                                has_role = general
                                age >= define:NCharacters|ADULT_AGE
                                is_female = no
                            }
                            AND = {
                                politician_clothes_trigger = yes
                                armed_forces_clothes_trigger = yes
                                scope:character ?= {
                                    is_female = no
                                    age >= define:NCharacters|ADULT_AGE
                                }
                            }
                        }
                    }
                }
            }
        }
    }

    american_military_late_headgear = {
        # when updating triggers on this, please update american_military_hairstyles in game\gfx\portraits\portrait_modifiers\01_headgear.txt as well so that triggers continue to match up
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = american_military_headgear
                range = { 0.9 1.0 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 150
                c:ARC ?= {
                    has_technology_researched = bolt_action_rifles
                }
                OR = {
                    AND = {
                        american_clothes_pop_trigger = yes
                        OR = {
                            officers_clothes_pop_trigger = yes
                            soldier_clothes_pop_trigger = yes
                        }
                    }
                    AND = {
                        american_clothes_trigger = yes
                        agitator_character_trigger = no
                        scope:character = {
                            has_role = general
                            age >= define:NCharacters|ADULT_AGE
                            is_female = no
                        }
                    }
                }
            }
        }
    }

    american_confederate_military_headgear = {
        # when updating triggers on this, please update american_military_hairstyles in game\gfx\portraits\portrait_modifiers\01_headgear.txt as well so that triggers continue to match up
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = american_confederate_military_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                exists = c:PLA
                OR = {
                    AND = {
                        exists = scope:character
                        scope:character = {
                            age >= define:NCharacters|ADULT_AGE
                            has_role = general
							exists = home_country
                            home_country = c:PLA
                        }
                        agitator_character_trigger = no
                    }
                    AND = {
                        politician_clothes_trigger = yes
                        armed_forces_clothes_trigger = yes
                        scope:character = {
                            age >= define:NCharacters|ADULT_AGE
							exists = home_country
							home_country = c:PLA
						}
                        agitator_character_trigger = no
                    }
                    AND = {
                        exists = scope:pop
                        scope:pop = {
                            OR = {
                                is_pop_type = officers
                                is_pop_type = soldiers
                            }
                            home_country = c:PLA
                        }
                    }
                }
            }
        }
    }

    british_military_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = british_military_headgear
                range = { 0 0.5 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                british_empire_clothes_trigger = yes
                agitator_character_trigger = no
                OR = {
                    scope:character = {
                        has_role = general
                        age >= define:NCharacters|ADULT_AGE
                    }
                    AND = {
                        politician_clothes_trigger = yes
                        armed_forces_clothes_trigger = yes
                        scope:character ?= {
                            age >= define:NCharacters|ADULT_AGE
                        }
                    }
                }

            }
        }
    }

    british_military_soldier_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = gb_01
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 500

                scope:pop ?= {
                    culture = {
                        has_discrimination_trait_group = heritage_group_european
                    }
                    owner = {
                        c:GBR ?= this
                    }
                }
                OR = {
                    soldier_clothes_pop_trigger = yes
                    officers_clothes_pop_trigger = yes
                }

                c:GBR ?= {
                    NOT = { has_technology_researched = repeaters }
                }
            }
        }
    }

    british_military_soldier_mid_late_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_military_headgear
                accessory = male_headgear_european_military_09
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 500

                scope:pop ?= {
                    culture = {
                        has_discrimination_trait_group = heritage_group_european
                    }
                    owner = {
                        c:GBR ?= this
                    }
                }
                OR = {
                    soldier_clothes_pop_trigger = yes
                    officers_clothes_pop_trigger = yes
                }

                c:GBR ?= {
                    has_technology_researched = repeaters
                }
            }
        }
    }

    british_military_headgear_late = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = late_military_cap
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 20000

                has_dlc_feature = ep1_cosmetics

                british_empire_clothes_pop_trigger = yes
                officers_clothes_pop_trigger = yes


                c:GBR ?= {
                    has_technology_researched = bolt_action_rifles
                }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 20000

                has_dlc_feature = ep1_cosmetics

                british_empire_clothes_trigger = yes

                scope:character ?= {
                    age >= define:NCharacters|ADULT_AGE
                    has_role = general
                }

                c:GBR ?= {
                    has_technology_researched = bolt_action_rifles
                }
            }
        }
    }

    british_military_puppet_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_military_headgear
                range = { 0.7 0.7 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                british_empire_clothes_p_trigger = yes
                officers_clothes_pop_trigger  = yes
            }
        }
    }

    french_military_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = french_military_headgear
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                OR = {
                    AND = {
                        french_empire_clothes_trigger = yes
                        OR = {
                            scope:character = {
                                has_role = general
                            }
                            AND = {
                                politician_clothes_trigger = yes
                                armed_forces_clothes_trigger = yes
                            }
                        }
                        agitator_character_trigger = no
                        scope:character ?= {
                            age >= define:NCharacters|ADULT_AGE
                        }
                    }
                    AND = {
                        scope:pop ?= {
                            culture = {
                                has_discrimination_trait_group = heritage_group_european
                            }
                            owner = {
                                c:FRA ?= this
                            }
                        }
                        OR = {
                            soldier_clothes_pop_trigger = yes
                            officers_clothes_pop_trigger = yes
                        }
                    }
                }
            }
        }
    }

    french_military_headgear_late = { # only officers wear the horizon blue cylindrical kepi, for now
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_late_military_headgear
                accessory = male_headgear_european_military_cap_french_01
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 20000

                has_dlc_feature = ep1_cosmetics
                has_dlc_feature = voice_of_the_people_content

                french_empire_clothes_pop_trigger = yes
                officers_clothes_pop_trigger = yes

                c:FRA ?= {
                    has_technology_researched = automatic_machine_guns
                }
            }
        }
    }

    japanese_meiji_military_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_military_02_colors
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 1200
                OR = {
                    AND = {
                        scope:character ?= {
                            age >= define:NCharacters|ADULT_AGE
                            culture = cu:japanese
                            owner ?= {
                                has_variable = meiji_restoration_complete
                            }
                        }
                        OR = {
                            scope:character = {
                                age >= define:NCharacters|ADULT_AGE
                                has_role = general
                            }
                            AND = {
                                politician_clothes_trigger = yes
                                armed_forces_clothes_trigger = yes
                                scope:character ?= {
                                    NOT = { has_ideology = ideology:ideology_traditionalist }
                                }
                            }
                        }
                        agitator_character_trigger = no
                    }
                    AND = {
                        scope:pop ?= {
                            culture = cu:japanese
                            owner = {
                                has_variable = meiji_restoration_complete
                            }
                        }
                        OR = {
                            soldier_clothes_pop_trigger = yes
                            officers_clothes_pop_trigger = yes
                        }
                    }
                }
            }
        }
    }

    russian_military_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = russian_military_headgear
                range = { 0 0.5 } # Excludes male_headgear_european_military_03_late_russian
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                russian_empire_clothes_trigger = yes
                OR = {
                    scope:character = {
                        has_role = general
                    }
                    AND = {
                        politician_clothes_trigger = yes
                        armed_forces_clothes_trigger = yes
                    }
                }
                scope:character ?= {
                    age >= define:NCharacters|ADULT_AGE
                }
                agitator_character_trigger = no
            }
        }
    }

    russian_military_headgear_soldier = {
        dna_modifiers = {
             accessory = {
                mode = add
                gene = headgear
                template = russian_military_headgear
                accessory = male_headgear_russian_military_01
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 10000

                has_dlc_feature = ep1_cosmetics

                russian_empire_clothes_pop_trigger = yes
                OR = {
                    soldier_clothes_pop_trigger = yes
                    officers_clothes_pop_trigger = yes
                }
            }
        }
    }

    russian_military_late_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = russian_military_headgear
                accessory = male_headgear_european_military_03_late_russian
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 15000
                has_dlc_feature = ep1_cosmetics # the hat isn't DLC material but it doesn't make sense without DLC outfits
                c:RUS ?= {
                    has_technology_researched = bolt_action_rifles
                }
                russian_empire_clothes_pop_trigger = yes
                OR = {
                    officers_clothes_pop_trigger = yes
                    soldier_clothes_pop_trigger = yes
                }
            }
        }
    }

    russian_military_late_headgear_officer = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = russian_military_headgear
                accessory = male_headgear_european_military_03_late_russian_officer
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 15000
                has_dlc_feature = ep1_cosmetics # the hat isn't DLC material but it doesn't make sense without DLC outfits
                c:RUS ?= {
                    has_technology_researched = bolt_action_rifles
                }
                russian_empire_clothes_trigger = yes
                agitator_character_trigger = no
                scope:character ?= {
                    has_role = general
                    age >= define:NCharacters|ADULT_AGE
                }
            }
        }
    }

    ### Austrian headgear

    austrian_military_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = male_headgear_austrian_02
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100

                has_dlc_feature = ip3_cosmetics

                austrian_empire_clothes_trigger = yes
                OR = {
                    scope:character = {
                        has_role = general
                    }
                    AND = {
                        politician_clothes_trigger = yes
                        armed_forces_clothes_trigger = yes
                    }
                }
                scope:character ?= {
                    age >= define:NCharacters|ADULT_AGE
                }
                agitator_character_trigger = no
            }
        }
    }

    austrian_military_headgear_officer = {
        dna_modifiers = {
             accessory = {
                mode = add
                gene = headgear
                template = male_headgear_austrian_02
                accessory = male_headgear_austrian_military_cap_02
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 10000

                has_dlc_feature = ip3_cosmetics

                austrian_empire_clothes_pop_trigger = yes
                officers_clothes_pop_trigger = yes
            }
        }
    }

    austrian_military_headgear_soldier = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = male_headgear_austrian_01
                accessory = male_headgear_austrian_military_cap_01
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 10000

                has_dlc_feature = ip3_cosmetics

                austrian_empire_clothes_pop_trigger = yes
                soldier_clothes_pop_trigger = yes
            }
        }
    }

    ### Bulgarian headgear
    
    bulgarian_royal_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = male_headgear_bulgarian
                accessory = male_headgear_balkan_fur_01_white
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                has_dlc_feature = ip3_cosmetics
                bulgarian_clothes_trigger = yes
                monarchy_clothes_trigger = yes
                scope:character ?= {
                    age >= define:NCharacters|ADULT_AGE
                }
                agitator_character_trigger = no
            }
        }
    }

    bulgarian_military_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = male_headgear_bulgarian
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                has_dlc_feature = ip3_cosmetics
                bulgarian_clothes_trigger = yes
                scope:character ?= {
                    owner ?= {
                        NOT = { has_technology_researched = bolt_action_rifles }
                    }
                }
                OR = {
                    scope:character = {
                        has_role = general
                    }
                    AND = {
                        politician_clothes_trigger = yes
                        armed_forces_clothes_trigger = yes
                    }
                }
                scope:character ?= {
                    age >= define:NCharacters|ADULT_AGE
                }
                agitator_character_trigger = no
            }
        }
    }

    bulgarian_military_headgear_late = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = male_headgear_bulgarian_late
                range = { 0.5 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                has_dlc_feature = ip3_cosmetics
                bulgarian_clothes_trigger = yes
                scope:character ?= {
                    owner ?= {
                        has_technology_researched = bolt_action_rifles
                    }
                }
                OR = {
                    scope:character = {
                        has_role = general
                    }
                    AND = {
                        politician_clothes_trigger = yes
                        armed_forces_clothes_trigger = yes
                    }
                }
                scope:character ?= {
                    age >= define:NCharacters|ADULT_AGE
                }
                agitator_character_trigger = no
            }
        }
    }

    bulgarian_military_headgear_soldier = {
        dna_modifiers = {
             accessory = {
                mode = add
                gene = headgear
                template = male_headgear_bulgarian_soldier
                accessory = male_headgear_balkan_fur_01
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 10000

                has_dlc_feature = ip3_cosmetics

                bulgarian_clothes_pop_trigger = yes
                OR = {
                    soldier_clothes_pop_trigger = yes
                    officers_clothes_pop_trigger = yes
                }
                scope:pop ?= {
                    owner ?= {
                        NOT = { has_technology_researched = bolt_action_rifles }
                    }
                }
            }
        }
    }

    bulgarian_military_headgear_soldier_late = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = male_headgear_bulgarian_late
                accessory = male_headgear_european_military_03_late_bulgarian
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 10000

                has_dlc_feature = ip3_cosmetics

                bulgarian_clothes_pop_trigger = yes
                soldier_clothes_pop_trigger = yes
                scope:pop ?= {
                    owner ?= {
                        has_technology_researched = bolt_action_rifles
                    }
                }
            }
        }
    }

    bulgarian_military_headgear_officers_late = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = male_headgear_bulgarian_late
                range = { 0.5 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 10000

                has_dlc_feature = ip3_cosmetics

                bulgarian_clothes_pop_trigger = yes
                officers_clothes_pop_trigger = yes
                scope:pop ?= {
                    owner ?= {
                        has_technology_researched = bolt_action_rifles
                    }
                }
            }
        }
    }

    ### Serbian headgear

    serbian_military_headgear_early = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = headgear_serbian_early
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                has_dlc_feature = ip3_cosmetics
                serbian_clothes_trigger = yes
                scope:character ?= {
                    owner ?= {
                        NOT = { has_technology_researched = rifling }
                    }
                }
                OR = {
                    scope:character = {
                        has_role = general
                    }
                    AND = {
                        politician_clothes_trigger = yes
                        armed_forces_clothes_trigger = yes
                    }
                }
                scope:character ?= {
                    age >= define:NCharacters|ADULT_AGE
                }
                agitator_character_trigger = no
            }
        }
    }

    serbian_soldier_headgear_early = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = headgear_serbian_mid
                accessory = male_headgear_european_military_02_serbian
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                has_dlc_feature = ip3_cosmetics
                serbian_clothes_pop_trigger = yes
                scope:pop ?= {
                    owner ?= {
                        NOT = { has_technology_researched = rifling }
                    }
                }
                OR = {
                    soldier_clothes_pop_trigger = yes
                    officers_clothes_pop_trigger = yes
                }
            }
        }
    }

    serbian_military_headgear_mid = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = headgear_serbian_mid
                range = { 0.7 0.7 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                has_dlc_feature = ip3_cosmetics
                serbian_clothes_trigger = yes
                scope:character ?= {
                    owner ?= {
                        has_technology_researched = rifling
                        NOT = { has_technology_researched = bolt_action_rifles }
                    }
                }
                OR = {
                    scope:character = {
                        has_role = general
                    }
                    AND = {
                        politician_clothes_trigger = yes
                        armed_forces_clothes_trigger = yes
                    }
                }
                scope:character ?= {
                    age >= define:NCharacters|ADULT_AGE
                }
                agitator_character_trigger = no
            }
        }
    }

    serbian_military_headgear_late = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = headgear_serbian_late
                accessory = male_headgear_serbian_01_grey
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 1000
                has_dlc_feature = ip3_cosmetics
                serbian_clothes_trigger = yes
                scope:character ?= {
                    owner ?= {
                        has_technology_researched = bolt_action_rifles
                    }
                }
                OR = {
                    scope:character = {
                        has_role = general
                    }
                    AND = {
                        politician_clothes_trigger = yes
                        armed_forces_clothes_trigger = yes
                    }
                }
                scope:character ?= {
                    age >= define:NCharacters|ADULT_AGE
                }
                agitator_character_trigger = no
            }
        }
    }

    serbian_soldier_headgear_mid = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = headgear_serbian_mid
                accessory = male_headgear_serbian_01_grey_blue
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                has_dlc_feature = ip3_cosmetics
                serbian_clothes_pop_trigger = yes
                scope:pop ?= {
                    owner ?= {
                        has_technology_researched = rifling
                        NOT = { has_technology_researched = bolt_action_rifles }
                    }
                }
                soldier_clothes_pop_trigger = yes
            }
        }
    }

    serbian_officer_headgear_mid = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = headgear_serbian_mid
                accessory = male_headgear_european_military_02_serbian
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                has_dlc_feature = ip3_cosmetics
                serbian_clothes_pop_trigger = yes
                scope:pop ?= {
                    owner ?= {
                        has_technology_researched = rifling
                        NOT = { has_technology_researched = bolt_action_rifles }
                    }
                }
                officers_clothes_pop_trigger = yes
            }
        }
    }

    serbian_soldier_headgear_late = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = headgear_serbian_late
                accessory = male_headgear_serbian_01_green
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                has_dlc_feature = ip3_cosmetics
                serbian_clothes_pop_trigger = yes
                scope:pop ?= {
                    owner ?= {
                        has_technology_researched = bolt_action_rifles
                    }
                }
                OR = {
                    soldier_clothes_pop_trigger = yes
                    officers_clothes_pop_trigger = yes
                }
            }
        }
    }

     ### Montenegrin headgear

    montenegrin_military_headgear_early = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = montenegrin_military_headgear
                range = { 0 0.5 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                scope:character ?= {
                    age >= define:NCharacters|ADULT_AGE
                }
                montenegrin_clothes_trigger = yes
                has_dlc_feature = ip3_cosmetics
                AND = {
                    OR = {
                        military_clothes_trigger = yes
                        AND = {
                            armed_forces_clothes_trigger = yes
                            OR = {
                                politician_clothes_trigger = yes
                                ruler_clothes_trigger = yes
                            }
                        }
                    }
                    scope:character ?= {
                        owner ?= {
                            NOT = {
                                has_technology_researched = bolt_action_rifles
                            }
                        }
                    }
                }
            }
        }
    }

    montenegrin_military_headgear_late = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = montenegrin_military_headgear
                accessory = male_headgear_montenegrin_military_late
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 110
                montenegrin_clothes_pop_trigger = yes
                OR = {
                    soldier_clothes_pop_trigger = yes
                    officers_clothes_pop_trigger = yes
                }
                has_dlc_feature = ip3_cosmetics
                scope:pop ?= {
                    owner ?= {
                        has_technology_researched = bolt_action_rifles
                    }
                }
            }
            modifier = {
                add = 110
                scope:character ?= {
                    age >= define:NCharacters|ADULT_AGE
                }
                montenegrin_clothes_trigger = yes
                has_dlc_feature = ip3_cosmetics
                AND = {
                    OR = {
                        scope:character ?= {
                            is_heir = yes
                        }
                        military_clothes_trigger = yes
                        AND = {
                            armed_forces_clothes_trigger = yes
                            OR = {
                                politician_clothes_trigger = yes
                                ruler_clothes_trigger = yes
                            }
                        }
                    }
                    scope:character ?= {
                        owner ?= {
                            has_technology_researched = bolt_action_rifles
                        }
                    }
                }
            }
        }
    }

    wallachia_military_headgear = { # For generals in the early game
         dna_modifiers = {
                accessory = {
                mode = add
                gene = headgear
                template = headgear_wallachian_early
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 20000
                has_dlc_feature = ip3_cosmetics
                romanian_clothes_trigger = yes
                scope:character ?= {
                    owner ?= {
                        c:WAL ?= this
                        NOT = {
                            has_technology_researched = rifling
                        }
                    }
                }
                OR = {
                    scope:character = {
                        has_role = general
                    }
                    AND = {
                        politician_clothes_trigger = yes
                        armed_forces_clothes_trigger = yes
                    }
                }
                scope:character ?= {
                    age >= define:NCharacters|ADULT_AGE
                }
                agitator_character_trigger = no
            }
        }
    }

    wallachia_military_pops_headgear = { # For soldier/officers pops in the early game
         dna_modifiers = {
                accessory = {
                mode = add
                gene = headgear
                template = headgear_wallachian_early
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 20000
                scope:pop ?= {
                    home_country ?= {
                        c:WAL ?= this
                        NOT = {
                            has_technology_researched = rifling
                        }
                    }
                }
                has_dlc_feature = ip3_cosmetics
                romanian_clothes_pop_trigger = yes
                OR = {
                    soldier_clothes_pop_trigger = yes
                    officers_clothes_pop_trigger = yes
                }
            }
        }
    }

    moldavia_military_headgear = { # For generals in the early game
         dna_modifiers = {
                accessory = {
                mode = add
                gene = headgear
                template = russian_military_headgear
                accessory = male_headgear_russian_military_01
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 20000
                has_dlc_feature = ip3_cosmetics
                romanian_clothes_trigger = yes
                scope:character ?= {
                    owner ?= {
                        OR = {
                            c:MOL ?= this
                            c:ROM ?= this
                        }
                        NOT = {
                            has_technology_researched = rifling
                        }
                    }
                }
                OR = {
                    scope:character = {
                        has_role = general
                    }
                    AND = {
                        politician_clothes_trigger = yes
                        armed_forces_clothes_trigger = yes
                    }
                }
                scope:character ?= {
                    age >= define:NCharacters|ADULT_AGE
                }
                agitator_character_trigger = no
            }
        }
    }

    moldavia_military_pops_headgear = { # For soldier/officers pops in the early game
         dna_modifiers = {
                accessory = {
                mode = add
                gene = headgear
                template = russian_military_headgear
                accessory = male_headgear_russian_military_01
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 20000
                scope:pop ?= {
                    home_country ?= {
                        OR = {
                            c:MOL ?= this
                            c:ROM ?= this
                        }
                        NOT = {
                            has_technology_researched = rifling
                        }
                    }
                }
                has_dlc_feature = ip3_cosmetics
                romanian_clothes_pop_trigger = yes
                OR = {
                    soldier_clothes_pop_trigger = yes
                    officers_clothes_pop_trigger = yes
                }
            }
        }
    }

    romanian_soldier_headgear = { # For soldiers/officers pops in the mid game
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = headgear_romanian_mid
                accessory = male_headgear_european_military_02_romanian_mid
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 1000
                has_dlc_feature = ip3_cosmetics
                romanian_clothes_pop_trigger = yes
                scope:pop ?= {
                    owner ?= {
                       has_technology_researched = rifling
                    }
                }
                OR = {
                    soldier_clothes_pop_trigger = yes
                    officers_clothes_pop_trigger = yes
                }
            }
        }
    }

    romanian_military_headgear = { # For generals in the mid game
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = headgear_romanian_mid
                accessory = male_headgear_european_military_02_romanian_mid
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 1000
                has_dlc_feature = ip3_cosmetics
                romanian_clothes_trigger = yes
                scope:character ?= {
                    owner ?= {
                        has_technology_researched = rifling
                    }
                }
                OR = {
                    scope:character = {
                        has_role = general
                    }
                    AND = {
                        politician_clothes_trigger = yes
                        armed_forces_clothes_trigger = yes
                    }
                }
                scope:character ?= {
                    age >= define:NCharacters|ADULT_AGE
                }
                agitator_character_trigger = no
            }
        }
    }

    romanian_military_headgear_late = { # For generals in the late game
         dna_modifiers = {
                accessory = {
                mode = add
                gene = headgear
                template = headgear_romanian_late
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 2000
                has_dlc_feature = ip3_cosmetics
                romanian_clothes_trigger = yes
                scope:character ?= {
                    owner ?= {
                        has_technology_researched = bolt_action_rifles
                    }
                }
                OR = {
                    scope:character = {
                        has_role = general
                    }
                    AND = {
                        politician_clothes_trigger = yes
                        armed_forces_clothes_trigger = yes
                    }
                }
                scope:character ?= {
                    age >= define:NCharacters|ADULT_AGE
                }
                agitator_character_trigger = no
            }
        }
    }

    romanian_military_pops_headgear_late = { # For soldier/officers pops in the late game
         dna_modifiers = {
                accessory = {
                mode = add
                gene = headgear
                template = european_late_military_headgear
                accessory = male_headgear_european_military_cap_romanian_01
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 2000
                scope:pop ?= {
                    home_country ?= {
                        has_technology_researched = bolt_action_rifles
                    }
                }
                has_dlc_feature = ip3_cosmetics
                romanian_clothes_pop_trigger = yes
                OR = {
                    soldier_clothes_pop_trigger = yes
                    officers_clothes_pop_trigger = yes
                }
            }
        }
    }

    greek_fustanella_headgear = { # For Greek agitators and irregular infantry/conscripts
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = headgear_greek_01
                accessory = male_headgear_greek_01
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 15000
                scope:character ?= {
                    age >= define:NCharacters|ADULT_AGE
                }
                greek_clothes_trigger = yes
                has_dlc_feature = ip3_cosmetics
                OR = {
                    armed_forces_clothes_trigger = yes
                    scope:character ?= {
                        has_ideology = ideology:ideology_traditionalist
                        has_ideology = ideology:ideology_traditionalist_minoritarian
                    }
                }
                agitator_character_trigger = yes
            }
            modifier = {
                add = 15000
                scope:pop ?= {
                    home_country ?= {
                        NOT = {
                            has_technology_researched = rifling
                        }
                    }
                    pop_employment_building_group = bg_conscription
                }
                greek_clothes_pop_trigger = yes
                has_dlc_feature = ip3_cosmetics
                OR = {
                    officers_clothes_pop_trigger = yes
                    soldier_clothes_pop_trigger = yes
                }
            }
        }
    }

    greek_military_headgear_early = { # For generals in the early game
         dna_modifiers = {
                accessory = {
                mode = add
                gene = headgear
                template = headgear_greek_01 # This is not, strictly speaking, accurate, as standard uniforms were shakos. There are enough sources of Greek military officers wearing traditional dress to make an excuse, however.
                accessory = male_headgear_greek_01
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 2000
                has_dlc_feature = ip3_cosmetics
                greek_clothes_trigger = yes
                scope:character ?= {
                    owner ?= {
                        NOT = { has_technology_researched = rifling }
                    }
                }
                OR = {
                    scope:character = {
                        has_role = general
                    }
                    AND = {
                        politician_clothes_trigger = yes
                        armed_forces_clothes_trigger = yes
                    }
                }
                scope:character ?= {
                    age >= define:NCharacters|ADULT_AGE
                }
                agitator_character_trigger = no
            }
        }
    }

    greek_military_headgear_mid = { # For generals in the late game
         dna_modifiers = {
                accessory = {
                mode = add
                gene = headgear
                template = headgear_greek_mid
                accessory = male_headgear_european_military_02_greek
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 2000
                has_dlc_feature = ip3_cosmetics
                greek_clothes_trigger = yes
                scope:character ?= {
                    owner ?= {
                        has_technology_researched = rifling
                        NOT = { has_technology_researched = bolt_action_rifles }
                    }
                }
                OR = {
                    scope:character = {
                        has_role = general
                    }
                    AND = {
                        politician_clothes_trigger = yes
                        armed_forces_clothes_trigger = yes
                    }
                }
                scope:character ?= {
                    age >= define:NCharacters|ADULT_AGE
                }
                agitator_character_trigger = no
            }
        }
    }

    greek_military_pops_headgear_mid = { # For soldiers/officers pops in the late game
         dna_modifiers = {
                accessory = {
                mode = add
                gene = headgear
                template = headgear_greek_mid
                accessory = male_headgear_european_military_02_greek
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 2000
                scope:pop ?= {
                    home_country ?= {
                        has_technology_researched = rifling
                        NOT = { has_technology_researched = bolt_action_rifles }
                    }
                }
                has_dlc_feature = ip3_cosmetics
                greek_clothes_pop_trigger = yes
                OR = {
                    officers_clothes_pop_trigger = yes
                    soldier_clothes_pop_trigger = yes
                }
            }
        }
    }

    greek_military_headgear_late = { # For generals in the late game
         dna_modifiers = {
                accessory = {
                mode = add
                gene = headgear
                template = late_military_cap
                accessory = male_headgear_european_late_military_04_greek
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 2000
                has_dlc_feature = ip3_cosmetics
                greek_clothes_trigger = yes
                scope:character ?= {
                    owner ?= {
                        has_technology_researched = bolt_action_rifles
                    }
                }
                OR = {
                    scope:character = {
                        has_role = general
                    }
                    AND = {
                        politician_clothes_trigger = yes
                        armed_forces_clothes_trigger = yes
                    }
                }
                scope:character ?= {
                    age >= define:NCharacters|ADULT_AGE
                }
                agitator_character_trigger = no
            }
        }
    }

    greek_military_officer_headgear_late = { # For officers pops in the late game
         dna_modifiers = {
                accessory = {
                mode = add
                gene = headgear
                template = late_military_cap
                accessory = male_headgear_european_late_military_04_greek
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 2000
                scope:pop ?= {
                    home_country ?= {
                        has_technology_researched = bolt_action_rifles
                    }
                }
                has_dlc_feature = ip3_cosmetics
                greek_clothes_pop_trigger = yes
                officers_clothes_pop_trigger = yes
            }
        }
    }

    greek_military_soldiers_headgear_late = { # For soldier pops in the late game
         dna_modifiers = {
                accessory = {
                mode = add
                gene = headgear
                template = european_late_military_headgear
                accessory = male_headgear_european_military_cap_greek_01
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 2000
                scope:pop ?= {
                    home_country ?= {
                        has_technology_researched = bolt_action_rifles
                    }
                }
                has_dlc_feature = ip3_cosmetics
                greek_clothes_pop_trigger = yes
                soldier_clothes_pop_trigger = yes
            }
        }
    }

    korean_empire_military_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = korean_empire_military_headgear
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 1200
                OR = {
                    AND = {
                        scope:character ?= {
                            culture = cu:korean
                            age >= define:NCharacters|ADULT_AGE
                            owner ?= {
                                has_variable = KOR_korean_empire_declared
                            }
                        }
                        OR = {
                            scope:character ?= {
                                has_role = general
                                age >= define:NCharacters|ADULT_AGE
                            }
                            AND = {
                                politician_clothes_trigger = yes
                                armed_forces_clothes_trigger = yes
                                scope:character ?= {
                                    NOT = { has_ideology = ideology:ideology_traditionalist }
                                }
                            }
                        }
                        agitator_character_trigger = no
                    }
                    AND = {
                        scope:pop ?= {
                            culture = cu:korean
                            owner = {
                                has_variable = KOR_korean_empire_declared
                            }
                        }
                        OR = {
                            soldier_clothes_pop_trigger = yes
                            officers_clothes_pop_trigger = yes
                        }
                    }
                }
            }
        }
    }

    brazilian_military_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = brazilian_military_headgear
                accessory = male_headgear_european_military_02_blue
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 1000
                scope:character ?= {
                    age >= define:NCharacters|ADULT_AGE
                    exists = c:BRZ
                    home_country ?= {
                        OR = {
                            AND = {
                                c:BRZ = this
                                is_subject = no # preventing uniform conflicts if BRZ becomes a subject of another country with puppet uniforms
                            }
                            is_subject_of = c:BRZ
                        }
                    }
                    OR = {
                        has_role = general
                        AND = {
                            has_role = politician
                            is_ruler = no
                            is_interest_group_type = ig_armed_forces
                        }
                    }
                    agitator_character_trigger = no
                }
            }
        }
    }

    brazilian_officers_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = brazilian_military_headgear
                range = { 0 0.66 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                scope:pop ?= {
                    exists = c:BRZ
                    home_country = {
                        OR = {
                            AND = {
                                c:BRZ = this
                                is_subject = no # preventing uniform conflicts if BRZ becomes a subject of another country with puppet uniforms
                            }
                            is_subject_of = c:BRZ
                        }
                    }
                    is_pop_type = officers
                }
            }
        }
    }

    brazilian_soldiers_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = brazilian_military_headgear
                range = { 0.34 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                scope:pop ?= {
                    exists = c:BRZ
                    home_country = {
                        OR = {
                            AND = {
                                c:BRZ = this
                                is_subject = no # preventing uniform conflicts if BRZ becomes a subject of another country with puppet uniforms
                            }
                            is_subject_of = c:BRZ
                        }
                    }
                    is_pop_type = soldiers
                }
            }
        }
    }

    garibaldi_military_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = french_military_headgear
                accessory = male_headgear_european_military_02_red # Only selecting the red kepi with gold embroidery
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 200
                scope:pop ?= {
                    home_country = {
                        any_scope_character = {
                            has_variable = garibaldi_var # Garibaldi can be an agitator or general or politician, it's all valid
                        }
                        OR = {
                            is_unification_candidate = ITA
                            AND = {
                                exists = c:ITA
                                c:ITA = this
                            }
                        }
                    }
                }
                OR = {
                    officers_clothes_pop_trigger = yes
                    soldier_clothes_pop_trigger = yes
                }
            }
        }
    }

    german_military_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = german_military_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                german_clothes_trigger = yes
                agitator_character_trigger = no
                OR = {
                    scope:character = {
                        has_role = general
                        age >= define:NCharacters|ADULT_AGE
                    }
                    AND = {
                        politician_clothes_trigger = yes
                        armed_forces_clothes_trigger = yes
                    }
                }
            }
        }
    }

    german_officers_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = german_military_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 1000
                german_clothes_pop_trigger = yes
                officers_clothes_pop_trigger = yes
            }
        }
    }

    ethiopian_royal_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = ethiopian_royal_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 1000
                ethiopian_clothes_trigger = yes
                agitator_character_trigger = no
                scope:character ?= {
                    is_ruler = yes
                    is_female = no
                    OR = {
                        owner ?= {
                            has_law_or_variant = law_type:law_monarchy
                            c:ETH ?= this
                        }
                        AND = {
                            OR = {
                                has_variable = ethiopian_emperor
                                has_template = eth_sahle_dengel_solomon
                            }
                            owner ?= {
                                OR = {
                                    c:SHW ?= this
                                    c:WLO ?= this
                                    c:TGR ?= this
                                    c:BGM ?= this
                                    c:GJM ?= this
                                }
                            }
                        }
                    }
                }
            }
        }
    }

    indian_royal_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = indian_royal_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                indian_clothes_trigger = yes
                agitator_character_trigger = no
                scope:character = {
                    is_ruler = yes
                }
            }
            modifier = {
                add = 90000
                scope:character ?= {
                    OR = {
                        has_template = BIC_lakshmeshwar_singh
                        has_template = KAS_gulab_singh
                    }
                }
            }
        }
    }

    mughal_royal_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = indian_royalty_02
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 1000

                scope:character ?= {
                    OR = {
                        is_ruler = yes
                        is_heir = yes   # the heir also wore almost the exact same fancy crown
                    }
                    is_female = no
                    owner ?= {
                        c:MUG ?= this
                        has_law_or_variant = law_type:law_monarchy
                    }
                }
            }
        }
    }

    indian_high_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = indian_high_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 100
                indian_clothes_pop_trigger = yes
                upper_clothes_pop_trigger = yes
            }
            modifier = {
                add = 90000
                scope:character ?= {
                    OR = {
                        has_template = PAN_chand_kaur
                        has_template = PAN_jind_kaur
                    }
                }
            }
        }
    }

    arabic_turban = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = arabic_turban
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                arabic_clothes_trigger = yes
                scope:character ?= {
                    age >= define:NCharacters|ADULT_AGE
                }
            }

            modifier = {
                add = 100
                arabic_clothes_pop_trigger = yes
            }
        }
    }

    arabic_keffiyeh = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = arabic_turban
                range = { 0.25 0.75 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 500

                scope:character ?= {
                    age >= define:NCharacters|ADULT_AGE

                    NOT = { has_role = agitator }

                    religion = {
                        has_discrimination_trait = heritage_islamic
                        NOT = { rel:ibadi = this }
                    }
                    culture = {
                        OR = {
                            cu:bedouin = this
                            cu:mashriqi = this
                        }
                    }
                }
            }
            modifier = {
                add = 500

                scope:pop ?= {
                    culture = {
                        OR = {
                            cu:bedouin = this
                            cu:mashriqi = this
                        }
                    }
                }
            }
        }
    }

    arabic_gulf_turban = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = arabic_turban
                range = { 0 0.25 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 6000
                arabic_clothes_trigger = yes
                scope:character ?= {
                    age >= define:NCharacters|ADULT_AGE

                    OR = {
                        has_role = agitator
                        is_ruler = yes
                    }
                    OR = {
                        religion = rel:ibadi
                        owner ?= {
                            country_has_state_religion = rel:ibadi
                        }
                    }
                }
            }
            modifier = {
                add = 90000
                scope:character ?= {
                    OR = {
                        has_template = BIC_narayan_lokhande
                        has_template = PAN_lal_singh
                        has_template = BIC_udham_singh
                        has_template = BIC_lala_lajpat_rai
                    }
                }
            }
        }
    }
    zanj_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = zanj_headwear
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 600
                scope:character ?= {
                    culture = {
                        has_discrimination_trait = heritage_eastern_bantu
                        has_discrimination_trait_group = language_group_bantu
                    }
                    religion = {
                        has_discrimination_trait = heritage_islamic
                    }
                    age >= define:NCharacters|ADULT_AGE
                }
            }

            modifier = {
                add = 600

                scope:pop ?= {
                    culture = {
                        has_discrimination_trait = heritage_eastern_bantu
                        has_discrimination_trait_group = language_group_bantu
                    }
                    religion = {
                        has_discrimination_trait = heritage_islamic
                    }
                }
                upper_clothes_pop_trigger = yes
            }
        }
    }
    north_african_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = north_african_headwear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 200

                scope:character ?= {
                    culture = {
                        OR = {
                            cu:maghrebi = this
                            cu:berber = this
                        }
                    }
                }
            }
            modifier = {
                add = 200

                scope:pop ?= {
                    culture = {
                        OR = {
                            cu:maghrebi = this
                            cu:berber = this
                        }
                    }
                }
            }
        }
    }

    arabic_fez = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = arabic_fez
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 200
                AND = {
                    arabic_clothes_trigger = yes
                    scope:character ?= {
                        culture = {
                            NOT = { has_discrimination_trait_group = heritage_group_central_asian }
                        }
                    }
                    arabic_fez_trigger = yes
                }
            }
            modifier = {
                add = 10000

                OR = {
                    AND = {
                        exists = c:EGY
                        scope:pop ?= {
                            owner ?= {
                                c:EGY = this
                            }
                        }
                    }
                    AND = {
                        exists = c:ZAN
                        scope:pop ?= {
                            owner ?= {
                                c:ZAN = this
                            }
                        }
                    }
                }
                OR = {
                    officers_clothes_pop_trigger = yes
                    soldier_clothes_pop_trigger = yes
                }
            }
            modifier = {
                add = 10000

                scope:character ?= {
                    owner ?= {
                        OR = {
                            c:EGY ?= this
                            c:ZAN ?= this
                        }
                    }
                    NOR = {
                        is_ruler = yes
                        is_heir = yes
                    }
                    OR = {
                        has_role = general
                        AND = {
                            armed_forces_clothes_trigger = yes
                            politician_clothes_trigger = yes
                        }
                    }
                }
            }
            modifier = {
                add = 90000
                OR = {
                    scope:character ?= {
                        exists = owner
                        exists = c:TUR
                        owner = {
                            c:TUR = this
                        }
                        OR = {
                            AND = {
                                has_role = general
                                is_ruler = no
                            }
                            monarchy_clothes_trigger = yes
                            AND = {
                                armed_forces_clothes_trigger = yes
                                politician_clothes_trigger = yes
                            }
                        }
                        is_female = no
                    }
                    scope:pop ?= {
                        exists = owner
                        exists = c:TUR
                        owner = {
                            c:TUR = this
                        }
                        is_pop_type = officers
                    }
                }
            }
        }
    }
    african_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = african_common_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                scope:character ?= {
                    culture = {
                        OR = {
                            has_discrimination_trait = heritage_guinean
                            has_discrimination_trait = heritage_east_african
                        }
                        NOR = {
                            has_discrimination_trait = heritage_abyssinian
                            has_discrimination_trait_group = language_group_bantu
                            THIS = cu:maasai
                        }
                    }
                }
            }
            modifier = {
                add = 100
                scope:pop ?= {
                    culture = {
                        OR = {
                            has_discrimination_trait = heritage_guinean
                            has_discrimination_trait = heritage_east_african
                        }
                        NOR = {
                            has_discrimination_trait = heritage_abyssinian
                            has_discrimination_trait_group = language_group_bantu
                            THIS = cu:maasai
                        }
                    }
                }
            }
        }
    }

#Pops

    arabic_low_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = arabic_low_tier
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                arabic_clothes_pop_trigger = yes
                poor_clothes_pop_trigger = yes
                scope:pop ?= {
                    religion = {
                        has_discrimination_trait = heritage_islamic
                    }
                }
            }
        }
    }

    central_asian_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = central_asian
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                central_asian_clothes_pop_trigger = yes
                upper_clothes_pop_trigger = yes
            }
        }
    }

    mongol_noble_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = mongolian_hats
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                exists = scope:pop
                scope:pop = {
                    is_pop_type = aristocrats
                    culture = {
                        has_discrimination_trait_group = language_group_mongolic
                    }
                }
            }
        }
    }

    chinese_common_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = chinese_common_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                chinese_manchu_queue_hairstyle_pops_trigger = yes
                poor_clothes_pop_trigger = yes
            }
        }
    }

    japanese_common_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = Japanese_common_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                japanese_clothes_pop_trigger = yes
                scope:pop ?= {
                    OR = {
                        is_pop_type = farmers
                        is_pop_type = peasants
                        is_pop_type = laborers
                        AND = {
                            is_pop_type = machinists
                            owner = {
                                NOT = { has_variable = meiji_restoration_complete }
                            }
                        }
                    }
                }
            }
        }
    }

    european_capitalist_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_tophat
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100

                upper_clothes_pop_trigger = yes
                OR = {
                    european_clothes_pop_trigger = yes
                    AND = {
                        exists = scope:pop
                        scope:pop = {
                            OR = {
                                culture = cu:cherokee
                                culture = cu:seminole
                            }
                        }
                    }
                }
            }
            modifier = {
                add = 1000
                european_clothes_trigger = yes
                scope:character ?= {
                    age >= define:NCharacters|ADULT_AGE
                    OR = {
                        AND = {
                            OR = {
                                is_interest_group_type = ig_landowners
                                is_interest_group_type = ig_industrialists
                            }
                            has_role = politician
                            NOR = {
                                has_role = general
                                has_role = admiral
                            }
                            is_ruler = no
                            is_heir = no # Be dignified!
                        }
                        has_template = usa_lincoln_character_template
                    }
                }
            }
            modifier = {
                add = 10000

                scope:character ?= {
                   has_variable = THE_NEFARIOUS_TOP_HAT
                }
            }
        }
    }

    european_bowler_hat = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_bowlerhat
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                european_clothes_pop_trigger = yes
                middle_clothes_pop_trigger = yes
           }
        }
    }

    european_flat_cap = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_flatcap
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                european_clothes_pop_trigger = yes
                poor_clothes_pop_trigger = yes
                peasants_clothes_pop_trigger = no
            }
        }
    }

    native_american_char_headgear_01 = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = native_american_common_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                native_american_clothes_trigger = yes
                ruler_clothes_trigger = yes
                scope:character = {
                    is_ruler = yes
                }
            }
        }
    }

    native_american_char_headgear_02 = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = native_american_common_headgear
                range = { 0 1 }
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 101
                native_north_american_clothes_trigger = yes
                ruler_clothes_trigger = yes
                scope:character = {
                    is_ruler = yes
                    is_female = no
                }
            }
        }
    }

    native_american_char_headgear_03 = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = native_american_high_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 1000
                ruler_clothes_trigger = yes
                scope:character = {
                    is_ruler = yes
                    OR = {
                        culture = cu:comanche
                        culture = cu:paiute
                        culture = cu:dakota
                        culture = cu:cree
                        culture = cu:nez_perce
                        culture = cu:siouan
                    }
                }
            }
        }
    }

    native_american_bandanna = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = native_american_common_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 100
                native_american_clothes_pop_trigger = yes
            }
        }
    }

    arabic_military_fez = { # Excludes the fancy female headgear meant for high class pops
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = arabic_military_fez
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 200
                arabic_military_fez_pop_trigger = yes
                soldier_clothes_pop_trigger = yes
            }
        }
    }

    european_peasants_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_strawhat
                range = { 0 1 } # For the randomness to work correctly

            }
        }
        weight = {
            base = 0
            modifier = {
                add = 200
                AND = {
                    peasants_clothes_pop_trigger = yes
                    european_clothes_pop_trigger = yes
                }
            }
        }
    }

    slavik_kokoshnik_headgear = {
        dna_modifiers = {
           accessory = {
               mode = add
               gene = headgear
               template = female_headgear_slavic_kokoshnik
               range = { 0 1 }
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 11000
                has_cosmetic_dlc = "Dawn of Wonder"
                OR = {
                    AND = {
                        scope:character ?= {
                            culture = {
                                has_discrimination_trait = heritage_east_slavic
                            }
                            is_female = yes
                            OR = {
                                has_variable = getting_married
                                has_modifier = marriage_popularity
                            }
                        }
                    }
                    AND = {
                        upper_clothes_pop_trigger = yes
                        scope:pop ?= { # Wear this clothing either during Midsummer or during a Royal Wedding
                            culture = {
                                has_discrimination_trait = heritage_east_slavic
                            }
                            OR = {
                                scope:pop ?= {
                                    month = 5 # June. The trigger for months is on a 0-11 scale.
                                }
                                owner = {
                                    OR = {
                                        has_modifier = royal_marriage
                                        any_scope_character = {
                                            OR = {
                                                is_ruler = yes
                                                is_heir = yes
                                            }
                                            has_modifier = marriage_popularity
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }

    midsummer_headgear = {
        dna_modifiers = {
           accessory = {
               mode = add
               gene = headgear
               template = female_headgear_slavic_midsummer
               range = { 0 1 }
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 2000
                has_cosmetic_dlc = "Dawn of Wonder"
                OR = {
                    AND = {
                        slavic_clothes_pop_trigger = yes
                        middle_clothes_pop_trigger = yes
                    }
                    AND = {
                        nordic_clothes_pop_trigger = yes
                        OR = {
                            middle_clothes_pop_trigger = yes
                            upper_clothes_pop_trigger = yes
                        }
                    }
                }
                scope:pop ?= {
                    month = 5 # June. The trigger for months is on a 0-11 scale.
                }
            }
        }
    }

    pierrot_headgear = {
        dna_modifiers = {
           accessory = {
               mode = add
               gene = headgear
               template = male_headgear_carnaval_pierrot
               range = { 0 1 }
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 2000
                has_cosmetic_dlc = "Dawn of Wonder"
                OR = {
                    european_clothes_pop_trigger = yes
                    south_american_clothes_pop_trigger = yes
                }

                OR = {
                    middle_clothes_pop_trigger = yes
                    upper_clothes_pop_trigger = yes
                }

                scope:pop ?= {
                    religion = rel:catholic
                    month = 1 # Carnival is /usually/ in February
                }
            }
        }
    }

    brazilian_bahiana_headgear = {
        dna_modifiers = {
           accessory = {
               mode = add
               gene = headgear
               template = brazil_bahiana_headgear
               range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 2000

                OR = {
                    scope:character ?= {
                        culture = cu:afro_brazilian
                        is_ruler = no
                        is_interest_group_type = ig_rural_folk
                    }
                    scope:pop ?= {
                        culture = cu:afro_brazilian
                        OR = {
                            is_pop_type = farmers
                            is_pop_type = peasants
                            is_pop_type = laborers
                            is_pop_type = machinists
                        }
                    }
                }
            }
        }
    }

    zulu_ruler_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = zulu_impi_headgear
                accessory = male_headgear_zulu_impi_02
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 1000

                scope:character ?= {
                    is_ruler = yes
                    is_female = no
                    OR = {
                        has_culture = cu:zulu
                        has_culture = cu:nguni
                        has_culture = cu:xhosa
                    }
                }
            }
        }
    }

    zulu_impi_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = zulu_impi_headgear
                accessory = male_headgear_zulu_impi_01
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 1000

                OR = {
                    scope:pop ?= {
                        OR = {
                            culture = cu:zulu
                            culture = cu:nguni
                            culture = cu:xhosa
                        }
                        OR = {
                            is_pop_type = aristocrats
                            is_pop_type = soldiers
                            is_pop_type = officers
                        }
                    }
                    scope:character ?={
                        is_ruler = no
                        OR = {
                            is_heir = yes
                            has_role = general
                        }
                        OR = {
                            has_culture = cu:zulu
                            has_culture = cu:nguni
                            has_culture = cu:xhosa
                        }
                    }
                }
            }
        }
    }

    persian_landowners_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = arabic_landowners_hat
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 5000

                has_dlc_feature = ep1_cosmetics

                OR = {
                    scope:pop ?= {
                        is_pop_type = aristocrats
                        culture = {
                            has_discrimination_trait_group = language_group_iranic
                        }
                    }
                    scope:character ?= {
                        is_interest_group_type = ig_landowners
                        age > 12
                        has_role = politician
                        NAND = {    # monarchs never wear this hat
                            is_ruler = yes
                            owner ?={
                                has_law_or_variant = law_type:law_monarchy
                            }
                        }
                        culture = {
                            has_discrimination_trait_group = language_group_iranic
                        }
                    }
                }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 80008
                scope:character ?= {
                    has_template = BIC_maulana_azad
                }
            }
        }
    }

    persian_monarch_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = male_headgear_arabic_royal_01
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 5000

                has_dlc_feature = ep1_cosmetics

                scope:character ?= {
                    is_ruler = yes
                    owner ?= {
                        c:PER ?= this
                        has_law_or_variant = law_type:law_monarchy
                    }
                }
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 5000

                has_dlc_feature = ep1_cosmetics

                scope:pop ?= {
                    owner ?= {
                        c:PER ?= this
                    }
                    OR = {
                        is_pop_type = soldiers
                        is_pop_type = officers
                    }
                }
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 5000

                has_dlc_feature = ep1_cosmetics

                c:PER ?= {
                    NOT = { has_technology_researched = bolt_action_rifles }
                }

                scope:character ?= {
                    OR = {
                        AND = {
                            exists = c:PER
                            home_country ?= c:PER
                        }
                    }
                    is_ruler = no
                    OR = {
                        has_role = general
                        AND = {
                            has_role = politician
                            is_interest_group_type = ig_armed_forces
                        }
                    }
                }
            }
        }
    }

    persian_agitator_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = male_headgear_arabic_sattar_khan
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 10000

                has_dlc_feature = ep1_cosmetics

                scope:character ?= {
                    has_role = agitator
                    is_ruler = no
                    culture = {
                        has_discrimination_trait_group = language_group_iranic
                    }
                }
            }
        }
    }

    dost_mohammad_khan_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = arabic_turban_mohammad_khan
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 10000

                has_dlc_feature = ep1_cosmetics

                scope:character ?= {
                    is_ruler = yes
                    owner ?= {
                        has_law_or_variant = law_type:law_monarchy
                        OR = {
                            c:AFG ?= this
                            can_form_nation = AFG
                        }
                    }
                    culture = {
                        has_discrimination_trait_group = language_group_iranic
                    }
                }
            }
        }
    }

    chokha_cherkeska_cossack_clothes = {
        dna_modifiers = {
             accessory = {
                mode = add
                gene = headgear
                template = cossack_headgear
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 10000
                scope:character ?= {
                    age > 12
                    culture = {
                        OR = {
                            has_discrimination_trait = heritage_caucasian
                            has_discrimination_trait = heritage_north_caucasian
                        }
                    }
                }
                OR = {
                    scope:character ?= {
                        is_ruler = yes
                        owner ?= {
                            has_law_or_variant = law_type:law_monarchy
                        }
                    }
                    military_clothes_trigger = yes
                    AND = {
                        armed_forces_clothes_trigger = yes
                        politician_clothes_trigger = yes
                    }
                }
            }
            modifier = {
                add = 20000
                scope:pop ?= {
                    OR = {
                        AND = {
                            culture = {
                                OR = {
                                    has_discrimination_trait = heritage_caucasian
                                    has_discrimination_trait = heritage_north_caucasian
                                }
                            }
                            OR = {
                                is_pop_type = soldiers
                                is_pop_type = officers
                                is_pop_type = farmers
                            }
                        }
                        AND = {
                            culture = {
                                has_discrimination_trait = heritage_east_slavic
                            }
                            state = {
                                OR = {
                                    state_region = s:STATE_KUBAN
                                    state_region = s:STATE_QOBAN
                                    state_region = s:STATE_DAGESTAN
                                    state_region = s:STATE_DVG_ROSTOV
                                    state_region = s:STATE_ASTRAKHAN
                                }
                            }
                            OR = {
                                is_pop_type = soldiers
                                is_pop_type = officers
                                is_pop_type = farmers
                            }
                        }
                    }
                }
            }
            modifier = {
                add = 20000
                scope:character ?= {
                    age > 12
                    culture = {
                        has_discrimination_trait = heritage_east_slavic
                    }
                    owner ?= {
                        c:RUS ?= this
                    }
                    is_ruler = no
                    is_heir = no
                    OR = {
                        has_trait = bandit
                        has_trait = social_bandit
                        AND = {
                            has_role = general
                            OR = {
                                has_trait = celebrity_commander
                                has_trait = pillager
                            }
                        }
                    }
                }
            }
        }
    }

    academic_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = academic_cap
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 1000
                academics_clothes_pop_trigger = yes
                OR = {
                    european_clothes_pop_trigger = yes
                    african_diaspora_pop_clothes_trigger = yes
                }
                slavic_clothes_pop_trigger = no
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 90000
                OR = {
                    european_clothes_trigger = yes
                    african_diaspora_clothes_trigger = yes
                }
                ruler_clothes_trigger = yes
                scope:character ?= {
                    OR = {
                        AND = {
                            has_trait = erudite
                            owner ?= {
                                is_in_power_bloc = yes
                                power_bloc ?= {
                                    has_principle = principle:principle_advanced_research_1
                                }
                            }
                        }
                        AND = {
                            OR = {
                                has_trait = erudite
                                has_trait = literary
                            }
                            owner ?= {
                                is_in_power_bloc = yes
                                power_bloc ?= {
                                    has_principle = principle:principle_advanced_research_2
                                }
                            }
                        }
                        AND = {
                            OR = {
                                has_trait = erudite
                                has_trait = literary
                                has_trait = master_bureaucrat
                            }
                            owner ?= {
                                is_in_power_bloc = yes
                                power_bloc ?= {
                                    has_principle = principle:principle_advanced_research_3
                                }
                            }
                        }
                    }
                }
            }
        }
    }

    power_bloc_crown = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = crown
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 1000
                aristocrats_clothes_pop_trigger = yes
                OR = {
                    european_clothes_pop_trigger = yes
                    african_diaspora_pop_clothes_trigger = yes
                }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 90000

                OR = {
                    european_clothes_trigger = yes
                    african_diaspora_clothes_trigger = yes
                }
                monarchy_clothes_trigger = yes
                scope:character ?= {
                    is_ruler = yes
                    is_female = yes

                    owner ?= {
                        is_in_power_bloc = yes
                    }
                }
            }
        }
    }

    papal_headgear = {
        dna_modifiers = {
           accessory = {
               mode = add
               gene = headgear
               template = european_Catholic_headgear
               range = { 0 1 }
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 2000

                scope:character ?= {
                    owner ?= {
                        c:PAP ?= this
                        has_law_or_variant = law_type:law_theocracy
                    }
                    is_ruler = yes
                }
            }
            modifier = { # this actually works pretty well as a taqiya skullcap lmao
                add = 2000

                scope:character ?= {
                    religion = {
                        has_discrimination_trait = heritage_islamic
                    }
                    culture = {
                        OR = {
                            cu:mashriqi = this
                            cu:somali = this
                        }
                    }
                    is_ruler = no
                    NOT = { has_role = agitator }
                    has_role = politician
                    OR = {
                        is_interest_group_type = ig_devout
                        has_trait = pious
                    }
                }
            }
            modifier = { # this actually works pretty well as a taqiya skullcap lmao
                add = 2000

                scope:pop ?= {
                    is_pop_type = clergymen
                    religion = {
                        has_discrimination_trait = heritage_islamic
                    }
                    culture = {
                        OR = {
                            cu:mashriqi = this
                            cu:somali = this
                        }
                    }
                }
            }
        }
    }

    catholic_clergy_headgear = {
        dna_modifiers = {
           accessory = {
               mode = add
               gene = headgear
               template = catholic_clergy_headgear
               range = { 0 1 }
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 5000

                military_clothes_trigger = no
                exists = scope:character

                scope:character ?= {
                    religion = rel:catholic
                    NOT = { has_template = FRA_francois-rene_de_chateaubriand }
                    OR = {
                        AND = {
                            politician_clothes_trigger = yes
                            monarchy_clothes_trigger = no
                            OR = {
                                devout_clothes_trigger = yes
                                AND = {
                                    exists = scope:character
                                    exists = c:PAP
                                    scope:character = {
                                        exists = home_country
                                        home_country = c:PAP
                                        has_ideology = ideology:ideology_theocrat
                                    }
                                }
                            }
                        }
                        AND = {
                            christian_clothes_trigger = yes
                            ruler_clothes_trigger = yes
                            owner ?= {
                                has_law_or_variant = law_type:law_theocracy
                                NOT = { c:PAP ?= this }
                            }
                        }
                    }
                }
            }
            modifier = {
                add = 5000

                scope:pop ?= {
                    is_pop_type = clergymen
                    religion = rel:catholic
                }
            }
        }
    }

    puneri_pagadi_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = puneri_pagadi
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 10000

                has_dlc_feature = ip2_cosmetics

                scope:character ?= {
                    NOT = { # not for kings
                        is_ruler = yes
                        owner ?= {
                            has_law_or_variant = law_type:law_monarchy
                        }
                    }
                    OR = {
                        is_interest_group_type = ig_intelligentsia
                        has_ideology = ideology:ideology_radical
                        has_ideology = ideology:ideology_reformer
                        has_ideology = ideology:ideology_abolitionist
                        has_ideology = ideology:ideology_social_democrat
                        has_ideology = ideology:ideology_market_liberal
                        has_ideology = ideology:ideology_humanitarian
                        has_ideology = ideology:ideology_land_reformer
                        has_ideology = ideology:ideology_liberal_leader
                        has_ideology = ideology:ideology_humanitarian_royalist
                    }
                    culture = {
                        cu:marathi = this
                    }
                }
            }
        }
        weight = {  # Marathi characters wear this in lieu of an academic cap for the research PBs
            modifier = {
                add = 90000

                has_dlc_feature = ip2_cosmetics

                ruler_clothes_trigger = yes

                scope:character ?= {
                    culture = { cu:marathi = this }
                    OR = {
                        AND = {
                            has_trait = erudite
                            owner ?= {
                                is_in_power_bloc = yes
                                power_bloc ?= {
                                    has_principle = principle:principle_advanced_research_1
                                }
                            }
                        }
                        AND = {
                            OR = {
                                has_trait = erudite
                                has_trait = literary
                            }
                            owner ?= {
                                is_in_power_bloc = yes
                                power_bloc ?= {
                                    has_principle = principle:principle_advanced_research_2
                                }
                            }
                        }
                        AND = {
                            OR = {
                                has_trait = erudite
                                has_trait = literary
                                has_trait = master_bureaucrat
                            }
                            owner ?= {
                                is_in_power_bloc = yes
                                power_bloc ?= {
                                    has_principle = principle:principle_advanced_research_3
                                }
                            }
                        }
                    }
                }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 500

                has_dlc_feature = ip2_cosmetics

                scope:pop ?= {
                    OR = {
                        is_pop_type = academics
                        is_pop_type = bureaucrats
                        is_pop_type = clerks
                    }
                    culture = {
                        cu:marathi = this
                    }
                }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 90000
                has_dlc_feature = ip2_cosmetics
                scope:character ?= {
                    OR = {
                        has_template = BIC_bal_gangadhar_tilak
                        has_template = BIC_gopal_gokhale
                        has_template = BIC_damodar_hari_chapekar
                    }
                }
            }
        }
    }

    european_executive_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_executive_hats
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 10000
                AND = {
                    OR = {
                        european_clothes_trigger = yes
                        african_diaspora_clothes_trigger = yes
                        scope:character ?= {
                            OR = {
                                culture = cu:cherokee
                                culture = cu:seminole
                            }
                        }
                        AND = {
                            european_clothes_trigger = no
                            scope:character ?= {
                                NOT = { has_ideology = ideology:ideology_traditionalist }
                                owner ?= {
                                    OR = {
                                        AND = {
                                            has_technology_researched = investment_banks
                                            NOT = {
                                                has_law_or_variant = law_type:law_isolationism
                                            }
                                        }
                                        is_country_type = recognized
                                    }
                                }
                            }
                        }
                    }
                    OR = {
                        AND = {
                            politician_clothes_trigger = yes
                            scope:character ?= {
                                is_interest_group_type = ig_industrialists
                            }
                        }
                        executive_clothes_trigger = yes
                    }
                }
            }
        }
    }

    austrian_military_headgear_late = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_late_military_headgear
                accessory = male_headgear_european_military_cap_austrian_01
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 20000
                scope:pop ?= {
                    home_country ?= {
                        has_technology_researched = automatic_machine_guns
                    }
                }
                has_dlc_feature = ip3_cosmetics
                austrian_empire_clothes_pop_trigger = yes
                OR = {
                    officers_clothes_pop_trigger = yes
                    soldier_clothes_pop_trigger = yes
                }
            }
        }
    }

    independent_hungarian_military_headgear_late = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_late_military_headgear
                accessory = male_headgear_european_military_cap_hungarian_01
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 20000
                scope:pop ?= {
                    OR = {
                        culture ?= { cu:hungarian ?= this }
                        home_country ?= { c:HUN ?= this }
                    }
                    home_country ?= {
                        OR = {
                            AND = {
                                exists = c:AUS
                                is_subject_of = c:AUS
                                is_diplomatic_play_enemy_of = c:AUS
                            }
                            is_subject = no
                        }
                        has_technology_researched = automatic_machine_guns
                    }
                }
                has_dlc_feature = ip3_cosmetics
                OR = {
                    soldier_clothes_pop_trigger = yes
                    officers_clothes_pop_trigger = yes
                }
            }
        }
    }

    independent_hungarian_military_headgear_late_black = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_late_military_headgear
                accessory = male_headgear_european_military_cap_hungarian_01_black
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 15000
                scope:character ?= {
                    age >= define:NCharacters|ADULT_AGE
                    OR = {
                        culture ?= { cu:hungarian ?= this }
                        home_country ?= { c:HUN ?= this }
                    }
                    home_country ?= {
                        OR = {
                            AND = {
                                exists = c:AUS
                                is_subject_of = c:AUS
                                is_diplomatic_play_enemy_of = c:AUS
                            }
                            is_subject = no
                        }
                        has_technology_researched = automatic_machine_guns
                    }
                }
                OR = {
                    military_clothes_trigger = yes
                    AND = {
                        armed_forces_clothes_trigger = yes
                        OR = {
                            politician_clothes_trigger = yes
                            ruler_clothes_trigger = yes
                        }
                    }
                }
            }
        }
    }
}
