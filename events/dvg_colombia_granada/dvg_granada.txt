namespace = dvg_granada

# War of Independence
dvg_granada.1 = {
	type = country_event
	placement = ROOT

	title = dvg_granada.1.t
	desc = dvg_granada.1.d
	flavor = dvg_granada.1.f
	
	event_image = {
		video = "southamerica_war_civilians"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/war_civilians"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	duration = 3

	trigger = {
	}
		
	# For Spain!
	option = {
		name = dvg_granada.1.a
		default_option = yes
		add_journal_entry = {
			type = je_colombian_war_of_independence_GRA
		}
		add_loyalists = {
			value = 0.1
			culture = cu:granadan
		}
		ai_chance = {
			base = 1
		}
	}
}

# The Colombian Alliance is Defeated
dvg_granada.2 = {
	type = country_event
	placement = ROOT

	title = dvg_granada.2.t
	desc = dvg_granada.2.d
	flavor = dvg_granada.2.f
	
	event_image = {
		video = "southamerica_aristocrats"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/aristocrats"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	duration = 3

	trigger = {
	}
	
	# We stand with Spain!
	option = {
		name = dvg_granada.2.a
		add_loyalists = {
			value = 0.1
		}
		hidden_effect = {
			c:SPA = {
				remove_diplomatic_pact = {
					country = c:GRA
					type = puppet
				}
			}
		}
		c:SPA = {
			create_diplomatic_pact = {
				country = c:GRA
				type = dominion
			}
		}
		ai_chance = {
			base = 1
		}
	}
}

# The Colombian Alliance has won the War of Independence
dvg_granada.3 = {
	type = country_event
	placement = ROOT

	title = dvg_granada.3.t
	desc = dvg_granada.3.d
	flavor = dvg_granada.3.f
	
	event_image = {
		video = "southamerica_aristocrats"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/aristocrats"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	duration = 3

	trigger = {
	}
		
	# Independence!
	option = {
		name = dvg_granada.3.a
		default_option = yes
		add_loyalists = {
			value = 0.1
		}
		ig:ig_rural_folk = {
				add_ruling_interest_group = yes
				add_modifier = {
                    name = dvg_approval_buff
                    days = 730
                    is_decaying = yes
				}
		}		
		c:SPA = {
			remove_diplomatic_pact = {
				country = c:GRA
				type = puppet
			}
		}
		change_relations = {
			country = c:SPA
			value = -50
		}
		hidden_effect = {
			if = {
				limit = {
					has_law = law_type:law_monarchy
				}
				activate_law = law_type:law_presidential_republic
			}
		}
		ai_chance = {
			base = 1
		}
	}

	# We shall stand with Spain... for now.
	option = {
		name = dvg_granada.3.b
		add_radicals = {
			value = 0.1
		}
		hidden_effect = {
			c:SPA = {
				remove_diplomatic_pact = {
					country = c:GRA
					type = puppet
				}
			}
		}
		c:SPA = {
			create_diplomatic_pact = {
				country = c:GRA
				type = dominion
			}
		}
		hidden_effect = {
			if = {
				limit = {
					NOT = { has_global_variable = dvg_herrera_revolution_happened }
				}
			}
			c:GRA = {
				trigger_event = { id = dvg_granada.5 days = 730 }	# Herrera Revolution
			}
		}
		ai_chance = {
			base = 0
		}
	}
}

# Truce of 1838
dvg_granada.4 = {
	type = country_event
	placement = ROOT

	title = dvg_granada.4.t
	desc = dvg_granada.4.d
	flavor = dvg_granada.4.f
	
	event_image = {
		video = "southamerica_aristocrats"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/aristocrats"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	duration = 3

	trigger = {
	}
	
	# We shall stand with Spain... for now.
	option = {
		name = dvg_granada.4.a
		hidden_effect = {
			c:SPA = {
				remove_diplomatic_pact = {
					country = c:GRA
					type = puppet
				}
			}
		}
		c:SPA = {
			create_diplomatic_pact = {
				country = c:GRA
				type = dominion
			}
		}
		hidden_effect = {
			if = {
				limit = {
					NOT = { has_global_variable = dvg_herrera_revolution_happened }
				}
			}
			c:GRA = {
				trigger_event = { id = dvg_granada.5 days = 730 }	# Herrera Revolution
			}
		}
		ai_chance = {
			base = 1
		}
	}
}

# The Herrera Revolution
dvg_granada.5 = {
	type = country_event
	placement = ROOT

	title = dvg_granada.5.t
	desc = dvg_granada.5.d
	flavor = dvg_granada.5.f
	
	event_image = {
		video = "southamerica_war_civilians"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/war_civilians"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	duration = 3

	trigger = {
	}
	
	immediate = {
		if = {
			limit = {
				NOT = { exists = c:SAN }
			}
			create_country = { # Herreria
				tag = SAN
				origin = this
				state = s:STATE_ANTIOQUIA.region_state:GRA
				state = s:STATE_CUNDINAMARCA.region_state:GRA
				state = s:STATE_CAUCA.region_state:GRA
				on_created = {
					if = {
						limit = {
							NOT = {
								has_law = law_type:law_presidential_republic
							}
						}
						activate_law = law_type:law_presidential_republic
					}
				}
			}
		}
		
		c:SAN = {
			create_character = {
				ruler = yes
				is_general = yes
				historical = yes
				first_name = Guillermo
				last_name = de_Blanco
				dna = dna_francisco_de_paula_santander
				birth_date = 1789.12.10
				hq = region_gran_colombia
				interest_group = ig_armed_forces
				ideology = ideology_ethno_nationalist
				traits = {
					meticulous
					experienced_defensive_strategist
					firebrand
				}
			}
		}
		set_global_variable = {
			name = dvg_herrera_revolution_happened
			value = yes
		}
	}
	
	# We must safeguard our borders
	option = {
		name = dvg_granada.5.a
		default_option = yes	
		create_diplomatic_play = {
			target_country = c:SAN
			war = no
			type = dp_annex_war
			add_war_goal = {
				holder = c:SAN
				type = annex_country
				target_country = c:GRA
			}
		}
		c:SAN = { 
			add_journal_entry = {
				type = je_granadan_civil_war_SAN
			}
		}
		c:GRA = { 
			add_journal_entry = {
				type = je_granadan_civil_war_GRA
			}
		}
		hidden_effect = {
			c:GRA = {
				trigger_event = { id = dvg_granada.9 days = 7 }	# Secession of Essequibo
			}
			c:GRA = {
				trigger_event = { id = dvg_granada.10 days = 5 } # The Spanish Withdraw
			}
			c:GCO = {
				trigger_event = { id = dvg_gran_colombia.6 days = 5 } # Herreria calls for aids
			}
		}
		ai_chance = {
			base = 0.5
		}
	}

	# de Blanco shall lead us to victory (play as Herreria)
	option = {
		name = dvg_granada.5.b		
		create_diplomatic_play = {
			target_country = c:SAN
			war = no
			type = dp_annex_war
			add_war_goal = {
				holder = c:SAN
				type = annex_country
				target_country = c:GRA
			}
		}
		play_as = c:SAN
		c:SAN = { 
			add_journal_entry = {
				type = je_granadan_civil_war_SAN
			}
		}
		c:GRA = { 
			add_journal_entry = {
				type = je_granadan_civil_war_GRA
			}
		}
		hidden_effect = {
			c:GRA = {
				trigger_event = { id = dvg_granada.9 days = 7 }	# Secession of Essequibo
			}
			c:GRA = {
				trigger_event = { id = dvg_granada.10 days = 5 } # The Spanish Withdraw
			}
			c:GCO = {
				trigger_event = { id = dvg_gran_colombia.6 days = 5 } # Herreria calls for aids
			}
		}
		ai_chance = {
			base = 0
		}
	}
	
	# Let Herreria go (as Granada) (THIS WILL HAVE CONSEQUENCES)
	option = {
		name = dvg_granada.5.c
		c:GRA = {
			create_truce = {
				country = c:SAN
				months = 48
			}
		}
		hidden_effect = {
			c:SAN = {
				trigger_event = { id = dvg_granada.20 days = 7 }	# Collapse of Granada
			}
			c:GRA = {
				trigger_event = { id = dvg_granada.6 days = 7 }	# Collapse of Granada
			}
		}
		ai_chance = {
			base = 0.5
		}
	}
	
	# Let Herreria go (as Herreria) (THIS WILL HAVE CONSEQUENCES)
	option = {
		name = dvg_granada.5.e
		play_as = c:SAN
		c:GRA = {
			create_truce = {
				country = c:SAN
				months = 48
			}
		}
		hidden_effect = {
			c:SAN = {
				trigger_event = { id = dvg_granada.20 days = 7 }	# Collapse of Granada
			}
			c:GRA = {
				trigger_event = { id = dvg_granada.6 days = 7 }	# Collapse of Granada
			}
		}
		ai_chance = {
			base = 0
		}
	}
}

# Collapse of Granada (The Dream is Dead)
dvg_granada.6 = {
	type = country_event
	placement = ROOT

	title = dvg_granada.6.t
	desc = dvg_granada.6.d
	flavor = dvg_granada.6.f
	
	event_image = {
		video = "unspecific_politicians_arguing"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	duration = 3

	trigger = {
	}
	
	immediate = {
		set_global_variable = {
			name = dvg_granada_collapse_happened
			value = yes
		}
	}
	
	# Become Aureliana
	option = {
		name = dvg_granada.6.a
		default_option = yes
		create_country = {
			tag = ESQ
			origin = this
			state = s:STATE_GUAYANA.region_state:GRA
			state = s:STATE_PARA.region_state:GRA
			on_created = {
				if = {
					limit = {
						NOT = {
							has_law = law_type:law_presidential_republic
						}
					}
					activate_law = law_type:law_presidential_republic
				}
				if = {
					limit = {
						NOT = {
							has_law = law_type:wealth_voting
						}
					}
					activate_law = law_type:law_wealth_voting
				}
			}
		}
		change_tag = CST
		set_capital = STATE_MIRANDA
		hidden_effect = {
			c:CST = {
				add_primary_culture = cu:granadan
				remove_primary_culture = cu:guianan
			}
		}
		c:CST = {
			ruler = { kill_character = yes }		
			create_character = {
				ruler = yes
				is_general = yes
				historical = yes
				first_name = Antonio
				last_name = Rocafuerte
				birth_date = 1782.8.10
				interest_group = ig_armed_forces
				ideology = ideology_royalist
				traits = {
					persistent
					expert_offensive_planner
					romantic
				}
			}
		}
		c:ESQ = {
			ruler = { kill_character = yes }
		}
		if = {
			limit = {
				NOT = {
					has_law = law_type:law_presidential_republic
				}
			}
			activate_law = law_type:law_presidential_republic
		}
		c:CST = {
			create_truce = {
				country = c:SAN
				months = 48
			}
			create_truce = {
				country = c:ESQ
				months = 48
			}
		}
		c:SPA = {
			remove_diplomatic_pact = {
				country = c:CST
				type = puppet
			}
		}
		c:SPA = {
			remove_diplomatic_pact = {
				country = c:CST
				type = dominion
			}
		}
		change_relations = {
			country = c:SPA
			value = -50
		}
		hidden_effect = {
			c:CST = { 
				trigger_event = { id = dvg_granada.16 days = 7 }	# Coronation of Antonio Rocafuerte (post Collapse)
			}
			c:SAN = { 
				trigger_event = { id = dvg_granada.18 days = 7 }	# De Blanco proclaims himself the President of Herreria (post Collapse)
			}
		}
		ai_chance = {
			base = 1
		}
	}
	
	# Become Essequibo
	option = {
		name = dvg_granada.6.b
		create_country = {
			tag = CST
			origin = this
			state = s:STATE_ZULIA.region_state:GRA
			state = s:STATE_MIRANDA.region_state:GRA
			state = s:STATE_GUAVIARE.region_state:GRA
			state = s:STATE_ANGOSTURA.region_state:GRA
			state = s:STATE_BOLIVAR.region_state:GRA
			on_created = {
				if = {
					limit = {
						NOT = {
							has_law = law_type:law_presidential_republic
						}
					}
					activate_law = law_type:law_presidential_republic
				}
			}
		}
		change_tag = ESQ
		set_capital = STATE_GUAYANA
		hidden_effect = {
			c:ESQ = {
				add_primary_culture = cu:guianan
				remove_primary_culture = cu:granadan
			}
		}
		c:CST = {
			ruler = { kill_character = yes }
			create_character = {
				ruler = yes
				is_general = yes
				historical = yes
				first_name = Antonio
				last_name = Rocafuerte
				birth_date = 1782.8.10
				interest_group = ig_armed_forces
				ideology = ideology_royalist
				traits = {
					persistent
					expert_offensive_planner
					romantic
				}
			}
		}
		c:ESQ = {
			ruler = { kill_character = yes }
		}
		if = {
			limit = {
				NOT = {
					has_law = law_type:law_presidential_republic
				}
			}
			activate_law = law_type:law_presidential_republic
		}
		if = {
			limit = {
				NOT = {
					has_law = law_type:law_wealth_voting
				}
			}
			activate_law = law_type:law_wealth_voting
		}		
		c:ESQ = {
			create_truce = {
				country = c:SAN
				months = 48
			}
			create_truce = {
				country = c:CST
				months = 48
			}
		}
		c:SPA = {
			remove_diplomatic_pact = {
				country = c:ESQ
				type = puppet
			}
		}
		c:SPA = {
			remove_diplomatic_pact = {
				country = c:ESQ
				type = dominion
			}
		}
		change_relations = {
			country = c:SPA
			value = -50
		}
		hidden_effect = {
			c:CST = { 
				trigger_event = { id = dvg_granada.16 days = 7 }	# Coronation of Antonio Rocafuerte (post Collapse)
			}
			c:SAN = { 
				trigger_event = { id = dvg_granada.18 days = 7 }	# De Blanco proclaims himself the President of Herreria (post Collapse)
			}
		}
		ai_chance = {
			base = 0
		}
	}
}

# The Bombing of Caracas Armory
dvg_granada.7 = {
	type = country_event
	placement = ROOT

	title = dvg_granada.7.t
	desc = dvg_granada.7.d
	flavor = dvg_granada.7.f
	
	event_image = {
		video = "unspecific_devastation"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	duration = 3

	trigger = {
		year = 1837
	}
	
	# It was probably just some freak accident
	option = {
		name = dvg_granada.7.a
		default_option = yes
		add_radicals = {
			value = 0.1
			culture = cu:granadan
		}		
		ai_chance = {
			base = 1
		}
	}
}

# De Blanco is sieging the countryside of Cartagena
dvg_granada.8 = {
	type = country_event
	placement = ROOT

	title = dvg_granada.8.t
	desc = dvg_granada.8.d
	flavor = dvg_granada.8.f
	
	event_image = {
		video = "unspecific_devastation"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	duration = 3

	trigger = {
	}
	
	# Bogota must not fall
	option = {
		name = dvg_granada.8.a
		default_option = yes
		add_radicals = {
			value = 0.2
			culture = cu:granadan
		}		
		ai_chance = {
			base = 1
		}
	}
}

# Granadan Civil War - Essequibo secedes
dvg_granada.9 = {
	type = country_event
	placement = ROOT

	title = dvg_granada.9.t
	desc = dvg_granada.9.d
	flavor = dvg_granada.9.f
	
	event_image = {
		video = "southamerica_aristocrats"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/aristocrats"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	duration = 3

	trigger = {
	}
	
	immediate = {
		if = {
			limit = {
				NOT = { exists = c:ESQ }
			}
			create_country = { # Essequibo
				tag = ESQ
				origin = this
				state = s:STATE_GUAYANA.region_state:GRA
				state = s:STATE_PARA.region_state:GRA
				on_created = {
					if = {
						limit = {
							NOT = {
								has_law = law_type:law_presidential_republic
							}
						}
						activate_law = law_type:law_presidential_republic
					}
					if = {
						limit = {
							NOT = {
								has_law = law_type:wealth_voting
							}
						}
						activate_law = law_type:wealth_voting
					}
				}
			}
		}
		
		c:ESQ = {
			ruler = { kill_character = yes }	
		}
		
		hidden_effect = {
			c:ESQ = {
				remove_primary_culture = cu:granadan
			}
			c:GRA = {
				remove_primary_culture = cu:guianan
			}
		}
	}
	
	# Curses
	option = {
		name = dvg_granada.9.a
		default_option = yes
		add_radicals = {
			value = 0.2
			culture = cu:granadan
		}
		ai_chance = {
			base = 1
		}
	}
}

# Granadan Civil War - The Spanish Withdraw
dvg_granada.10 = {
	type = country_event
	placement = ROOT

	title = dvg_granada.10.t
	desc = dvg_granada.10.d
	flavor = dvg_granada.10.f
	
	event_image = {
		video = "unspecific_devastation"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	duration = 3

	trigger = {
	}
	
	immediate = {
		c:SPA = {
			remove_diplomatic_pact = {
				country = c:GRA
				type = puppet
			}
		}
		c:SPA = {
			remove_diplomatic_pact = {
				country = c:GRA
				type = dominion
			}
		}
		c:SPA = {
			create_truce = {
				country = c:GRA
				months = 48
			}
		}
		c:SPA = {
			trigger_event = { id = dvg_spain.28 }	# Withdrawal from Granada
		}
		hidden_effect = {
			if = {
				limit = {
					has_law = law_type:law_monarchy
				}
				activate_law = law_type:law_presidential_republic
			}
		}
	}
	
	# Good riddance
	option = {
		name = dvg_granada.10.a
		default_option = yes
		change_relations = {
			country = c:SPA
			value = -50
		}
		ai_chance = {
			base = 1
		}
	}
}

# Granadan Civil War - Royalist Victory
dvg_granada.11 = {
	type = country_event
	placement = ROOT

	title = dvg_granada.11.t
	desc = dvg_granada.11.d
	flavor = dvg_granada.11.f
	
	event_image = {
		video = "unspecific_military_parade"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	duration = 3

	trigger = {
	}
	
	immediate = {
	}
	
	# Good riddance
	option = {
		name = dvg_granada.11.a
		default_option = yes
		c:GRA = {
			trigger_event = { id = dvg_granada.15 days = 7 }	# Coronation of Antonio Rocafuerte (GCW Victory)
		}
		ai_chance = {
			base = 1
		}
	}
}

# Granadan Civil War - de Blanco Victory
dvg_granada.12 = {
	type = country_event
	placement = ROOT

	title = dvg_granada.12.t
	desc = dvg_granada.12.d
	flavor = dvg_granada.12.f
	
	event_image = {
		video = "unspecific_military_parade"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	duration = 3

	trigger = {
	}
	
	immediate = {
		change_tag = GRA
	}
	
	# Good riddance
	option = {
		name = dvg_granada.12.a
		default_option = yes
		c:GRA = {
			trigger_event = { id = dvg_granada.17 days = 7 }	# De Blanco proclaims himself the President of Granada (GCW Victory)
		}
		ai_chance = {
			base = 1
		}
	}
}

# Granadan Civil War - GRA Truce (Granada Collapse alt)
dvg_granada.13 = {
	type = country_event
	placement = ROOT

	title = dvg_granada.13.t
	desc = dvg_granada.13.d
	flavor = dvg_granada.13.f
	
	event_image = {
		video = "southamerica_aristocrats"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/aristocrats"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	duration = 3

	trigger = {
		if = {
			limit = {
				NOT = { has_global_variable = dvg_SPA_truce_of_1838 }
			}
			year = 1840
		}
		year = 1842
	}
	
	immediate = {		
	}
	
	# We can't go on anymore, sign truce
	option = {
		name = dvg_granada.13.a
		default_option = yes
		set_global_variable = {
			name = dvg_granada_collapse_happened
			value = yes
		}
		every_diplomatic_play = {
			limit = {
				initiator_is = c:GRA
				target_is = c:SAN
			}
			end_play = yes
		}
		change_tag = CST
		set_capital = STATE_MIRANDA
		c:CST = {
			create_truce = {
				country = c:SAN
				months = 48
			}
		}
		c:CST = { 
			remove_journal_entry = je_granadan_civil_war_GRA
		}
		hidden_effect = {
			c:SAN = {
				trigger_event = { id = dvg_granada.14 }	# SAN Truce
			}
		}
		ai_chance = {
			base = 1
		}
	}
	
	# Granada WILL be whole again
	option = {
		name = dvg_granada.13.b
		default_option = yes
		c:SAN = {
			add_modifier = {
				name = dvg_herrera_revolutionary_fervor
			}
		}
		ai_chance = {
			base = 0
		}
	}
}

# Granadan Civil War - SAN Truce (Granada Collapse alt)
dvg_granada.14 = {
	type = country_event
	placement = ROOT

	title = dvg_granada.14.t
	desc = dvg_granada.14.d
	flavor = dvg_granada.14.f
	
	event_image = {
		video = "southamerica_aristocrats"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/aristocrats"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	duration = 3

	trigger = {
	}
	
	immediate = {
	}
	
	# So be it
	option = {
		name = dvg_granada.14.a
		default_option = yes
		c:SAN = {
			create_truce = {
				country = c:CST
				months = 48
			}
		}
		c:SAN = { 
			remove_journal_entry = je_granadan_civil_war_SAN
		}
		hidden_effect = {
			c:CST = { 
				trigger_event = { id = dvg_granada.19 days = 1 }
				trigger_event = { id = dvg_granada.16 days = 7 }	# Coronation of Antonio Rocafuerte (post Collapse)
			}
			c:SAN = {
				trigger_event = { id = dvg_granada.19 days = 1 }
				trigger_event = { id = dvg_granada.18 days = 7 }	# De Blanco proclaims himself the President of Herreria (post Collapse)
			}
		}
		ai_chance = {
			base = 1
		}
	}
}

# Antonio Rocafuerte proclaims himself the Emperor of Granada (post CW)
dvg_granada.15 = {
	type = country_event
	placement = ROOT

	title = dvg_granada.15.t
	desc = dvg_granada.15.d
	flavor = dvg_granada.15.f
	
	event_image = {
		video = "unspecific_ruler_speaking_to_people"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	duration = 3

	trigger = {
	}
	
	immediate = {
		c:SAN = {
			remove_modifier = dvg_herrera_revolutionary_fervor
		}
		if = {
			limit = {
				NOT = {
					has_law = law_type:law_monarchy
				}
			}
			activate_law = law_type:law_monarchy
		}
		if = {
			limit = {
				NOT = {
					has_law = law_type:law_slavery_banned
				}
			}
			activate_law = law_type:law_slavery_banned
		}
		if = {
			limit = {
				NOT = {
					has_law = law_type:law_appointed_bureaucrats
				}
			}
			activate_law = law_type:law_appointed_bureaucrats
		}
		if = {
			limit = {
				NOT = {
					has_law = law_type:law_wealth_voting
				}
			}
			activate_law = law_type:law_wealth_voting
		}
		if = {
			limit = {
				NOT = {
					has_law = law_type:law_censorship
				}
			}
			activate_law = law_type:law_censorship
		}
		ruler = { kill_character = yes }			
		create_character = {
			ruler = yes
			is_general = yes
			historical = yes
			first_name = Antonio
			last_name = Rocafuerte
			birth_date = 1782.8.10
			interest_group = ig_armed_forces
			ideology = ideology_royalist
			traits = {
				persistent
				expert_offensive_planner
				romantic
			}
		}
	}
	
	# Viva el Emperador!
	option = {
		name = dvg_granada.15.a
		default_option = yes
		set_capital = STATE_MIRANDA
		ai_chance = {
			base = 1
		}
	}
}

# Antonio Rocafuerte proclaims himself the King of Aureliana (post Collapse)
dvg_granada.16 = {
	type = country_event
	placement = ROOT

	title = dvg_granada.16.t
	desc = dvg_granada.16.d
	flavor = dvg_granada.16.f
	
	event_image = {
		video = "unspecific_ruler_speaking_to_people"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	duration = 3

	trigger = {
	}
	
	immediate = {
		c:SAN = {
			remove_modifier = dvg_herrera_revolutionary_fervor
		}
		if = {
			limit = {
				NOT = {
					has_law = law_type:law_monarchy
				}
			}
			activate_law = law_type:law_monarchy
		}
		if = {
			limit = {
				NOT = {
					has_law = law_type:law_slavery_banned
				}
			}
			activate_law = law_type:law_slavery_banned
		}
		if = {
			limit = {
				NOT = {
					has_law = law_type:law_appointed_bureaucrats
				}
			}
			activate_law = law_type:law_appointed_bureaucrats
		}
		if = {
			limit = {
				NOT = {
					has_law = law_type:law_wealth_voting
				}
			}
			activate_law = law_type:law_wealth_voting
		}
		if = {
			limit = {
				NOT = {
					has_law = law_type:law_censorship
				}
			}
			activate_law = law_type:law_censorship
		}
		ruler = { kill_character = yes }			
		create_character = {
			ruler = yes
			is_general = yes
			historical = yes
			first_name = Antonio
			last_name = Rocafuerte
			birth_date = 1782.8.10
			interest_group = ig_armed_forces
			ideology = ideology_royalist
			traits = {
				persistent
				expert_offensive_planner
				romantic
			}
		}
	}
	
	# Viva el Rey!
	option = {
		name = dvg_granada.16.a
		default_option = yes
		set_capital = STATE_MIRANDA
		ai_chance = {
			base = 1
		}
	}
}

# Guillermo de Blanco proclaims himself the President of Granada (post CW)
dvg_granada.17 = {
	type = country_event
	placement = ROOT

	title = dvg_granada.17.t
	desc = dvg_granada.17.d
	flavor = dvg_granada.17.f
	
	event_image = {
		video = "unspecific_ruler_speaking_to_people"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	duration = 3

	trigger = {
	}
	
	immediate = {
		c:SAN = {
			remove_modifier = dvg_herrera_revolutionary_fervor
		}
		if = {
			limit = {
				NOT = {
					has_law = law_type:law_presidential_republic
				}
			}
			activate_law = law_type:law_presidential_republic
		}
		if = {
			limit = {
				NOT = {
					has_law = law_type:law_wealth_voting
				}
			}
			activate_law = law_type:law_wealth_voting
		}
		if = {
			limit = {
				NOT = {
					has_law = law_type:law_censorship
				}
			}
			activate_law = law_type:law_censorship
		}
		if = {
			limit = {
				NOT = {
					has_law = law_type:law_slave_trade
				}
			}
			activate_law = law_type:law_slave_trade
		}
		trigger_event = { id = dvg_granada.21 days = 4 }	# workaround for de Blanco spawning
	}
	
	# Viva de Blanco!
	option = {
		name = dvg_granada.17.a
		set_capital = STATE_ANTIOQUIA
		default_option = yes
		ai_chance = {
			base = 1
		}
	}
}

# Guillermo de Blanco proclaims himself the President of Herreria (post Collapse)
dvg_granada.18 = {
	type = country_event
	placement = ROOT

	title = dvg_granada.18.t
	desc = dvg_granada.18.d
	flavor = dvg_granada.18.f
	
	event_image = {
		video = "unspecific_ruler_speaking_to_people"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	duration = 3

	trigger = {
	}
	
	immediate = {
		c:SAN = {
			remove_modifier = dvg_herrera_revolutionary_fervor
		}
		if = {
			limit = {
				NOT = {
					has_law = law_type:law_presidential_republic
				}
			}
			activate_law = law_type:law_presidential_republic
		}
		if = {
			limit = {
				NOT = {
					has_law = law_type:law_wealth_voting
				}
			}
			activate_law = law_type:law_wealth_voting
		}
		if = {
			limit = {
				NOT = {
					has_law = law_type:law_censorship
				}
			}
			activate_law = law_type:law_censorship
		}
		if = {
			limit = {
				NOT = {
					has_law = law_type:law_slave_trade
				}
			}
			activate_law = law_type:law_slave_trade
		}
		trigger_event = { id = dvg_granada.21 days = 4 }	# workaround for de Blanco spawning
	}
	
	# Viva de Blanco!
	option = {
		name = dvg_granada.18.a
		default_option = yes
		set_capital = STATE_ANTIOQUIA		
		ai_chance = {
			base = 1
		}
	}
}

# Dissolution of New Granada notif event (post CW)
dvg_granada.19 = {
	type = country_event
	placement = ROOT

	title = dvg_granada.19.t
	desc = dvg_granada.19.d
	flavor = dvg_granada.19.f
	
	event_image = {
		video = "unspecific_politicians_arguing"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	duration = 3

	trigger = {
	}
	
	immediate = {
	}
	
	# So be it
	option = {
		name = dvg_granada.19.a
		default_option = yes
		ai_chance = {
			base = 1
		}
	}
}

# Collapse of Granada (no CW Herreria notif)
dvg_granada.20 = {
	type = country_event
	placement = ROOT

	title = dvg_granada.20.t
	desc = dvg_granada.20.d
	flavor = dvg_granada.20.f
	
	event_image = {
		video = "unspecific_politicians_arguing"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	duration = 3

	trigger = {
	}
	
	immediate = {
	}
	
	# So be it
	option = {
		name = dvg_granada.20.a
		default_option = yes
		ai_chance = {
			base = 1
		}
	}
}

# Workaround for spawning de Blanco
dvg_granada.21 = {
	type = country_event
	placement = ROOT
	hidden = yes

	title = dvg_granada.20.t
	desc = dvg_granada.20.d
	flavor = dvg_granada.20.f
	
	event_image = {
		video = "southamerica_aristocrats"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/aristocrats"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	duration = 3

	trigger = {
	}
	
	immediate = {
		ruler = { kill_character = yes }			
		create_character = {
			ruler = yes
			is_general = yes
			historical = yes
			first_name = Guillermo
			last_name = de_Blanco
			dna = dna_francisco_de_paula_santander
			birth_date = 1789.12.10
			hq = region_gran_colombia
			interest_group = ig_armed_forces
			ideology = ideology_ethno_nationalist
			traits = {
				meticulous
				experienced_defensive_strategist
				firebrand
			}
		}
	}
}