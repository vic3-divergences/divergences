namespace = dvg_macedonia

dvg_macedonia.1 = {
	type = country_event
	event_image = {
		video = "votp_monarch_holding_court"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	title = dvg_macedonia.1.t
	desc = dvg_macedonia.1.d
	flavor = dvg_macedonia.1.f

	trigger = {
		# Triggered by JE
	}

	immediate = {
	}

	duration = 3

	option = {
		name = dvg_macedonia.1.a
        default_option = yes
        add_modifier = {
        	name = modifier_ottonian_renaissance
        	days = long_modifier_time
        }
        ruler = {
	        if = {
	        	limit = {
	        		has_trait = inexperienced
	        	}
	        	remove_trait = inexperienced
	        }
	        if = {
	        	limit = {
	        		has_trait = political_appointee
	        	}
	        	remove_trait = political_appointee
	        }
	        if = {
	        	limit = {
	        		NOT = {
	        			has_trait = erudite
	        		}
	        	}
	        	add_trait = erudite
	        }
	        if = {
	        	limit = {
	        		NOT = {
	        			has_trait = basic_political_operator
	        		}
	        	}
	        	add_trait = basic_political_operator
	        }
	    }
	    if = {
	    	limit = {
	    		has_law_or_variant = law_type:law_autocracy
	    	}
	    	custom_tooltip = dvg_macedonia.1.tt_1
	    	add_modifier = {
	    		name = modifier_bavarocracy_autocratic
	    		days = long_modifier_time
	    	}
	    }
	    else_if = {
	    	limit = {
	    		country_has_voting_franchise = yes
	    	}
	    	custom_tooltip = dvg_macedonia.1.tt_2
	    	add_modifier = {
	    		name = modifier_bavarocracy_democratic
	    		days = long_modifier_time
	    	}
	    }
	}

    option = {
		name = dvg_macedonia.1.b
		add_modifier = {
			name = modifier_ottonian_reforms
			days = long_modifier_time
		}
        ruler = {
	        if = {
	        	limit = {
	        		has_trait = inexperienced
	        	}
	        	remove_trait = inexperienced
	        }
	        if = {
	        	limit = {
	        		has_trait = political_appointee
	        	}
	        	remove_trait = political_appointee
	        }
	        if = {
	        	limit = {
	        		NOT = {
	        			has_trait = celebrity_commander
	        		}
	        	}
	        	add_trait = celebrity_commander
	        }
	        if = {
	        	limit = {
	        		NOT = {
	        			has_trait = basic_offensive_planner
	        		}
	        	}
	        	add_trait = basic_offensive_planner
	        }
	    }
	    if = {
	    	limit = {
	    		has_law_or_variant = law_type:law_autocracy
	    	}
	    	custom_tooltip = dvg_macedonia.1.tt_1
	    	add_modifier = {
	    		name = modifier_bavarocracy_autocratic
	    		days = long_modifier_time
	    	}
	    }
	    else_if = {
	    	limit = {
	    		country_has_voting_franchise = yes
	    	}
	    	custom_tooltip = dvg_macedonia.1.tt_2
	    	add_modifier = {
	    		name = modifier_bavarocracy_democratic
	    		days = long_modifier_time
	    	}
	    }
	}
}

dvg_macedonia.2 = {
	type = country_event
	event_image = {
		video = "votp_gunboat_diplomacy"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	title = dvg_macedonia.2.t
	desc = dvg_macedonia.2.d
	flavor = dvg_macedonia.2.f

	trigger = {
		# Triggered by JE
	}

	immediate = {
		if = {
			limit = {
				any_character = {
				has_variable = zimisces_var
				}
			}
		}
		random_character = {
			limit = {
				has_variable = zimisces_var
			}
			save_scope_as = zimisces_scope
		}
	}

	duration = 3

	option = {
		name = dvg_macedonia.2.a
		default_option = yes
        custom_tooltip = {
        	text = bavarocracy_expell_tt
        	every_scope_character = {
        		limit = {
	        		OR = {
	        			is_ruler = yes
	        			is_heir = yes
	        			culture = cu:catalan
	        		}
	        	}
				kill_character = {
					hidden = yes
				}
        	}
		}
        custom_tooltip = {
        	text = bavarocracy_prince_danish_tt
        	if = {
        		limit = {
        			year > 1845
        			year < 1910
        		}
				create_character = {
					template = GRE_george_i_of_greece
				}
        	}
        	else = {
				create_character = {
					first_name = George
					last_name = of_Glucksburg
					noble = yes
					culture = cu:scandinavian
					interest_group = ig_landowners
					ideology = ideology_reformer
					age = default
					ruler = yes
				}
        	}
        }
        every_country = {
        	limit = {
	        	has_law = law_type:law_monarchy
	        	country_rank >= rank_value:great_power
	        	NOT = {
	        		root = this
	        	}
	        }
	        root = {
				change_relations = {
					country = prev
					value = 10
				}
			}
        }
		change_relations = {
			country = c:DEN
			value = 30
		}
		create_diplomatic_catalyst = {
			type = catalyst_event_positive
			target = c:DEN
		}
	}

    option = {
		name = dvg_macedonia.2.b
        custom_tooltip = {
        	text = bavarocracy_expell_tt
        	every_scope_character = {
        		limit = {
	        		OR = {
	        			is_ruler = yes
	        			is_heir = yes
	        			culture = cu:catalan
	        		}
	        	}
				kill_character = {
					hidden = yes
				}
        	}
		}
		activate_law = law_type:law_presidential_republic
		every_interest_group = {
			limit = {
				law_stance = {
					law = law_type:law_monarchy
					value > neutral
				}
			}
			add_modifier = {
				name = modifier_an_inconvenient_republic
				days = normal_modifier_time
			}
		}
		every_interest_group = {
			limit = {
				law_stance = {
					law = law_type:law_presidential_republic
					value < neutral
				}
			}
			add_modifier = {
				name = modifier_architects_of_the_second_republic
				days = normal_modifier_time
			}
		}
        every_country = {
        	limit = {
	        	has_law = law_type:law_monarchy
	        	country_rank >= rank_value:great_power
	        	NOT = {
	        		root = this
	        	}
	        }
	        root = {
				change_relations = {
					country = prev
					value = -10
				}
			}
        }
	}
	option = {
		name = dvg_macedonia.2.c
		highlighted_option = yes
    	trigger = {
    		any_character = {
				has_variable = zimisces_var
			}
    	}
		scope:zimisces_scope = {
			transfer_character = ROOT
		}
        
	}

#    option = {
#		name = dvg_macedonia.2.h
#	}

    option = {
		name = dvg_macedonia.2.i
		highlighted_option = yes
    	trigger = {
    		any_scope_character = {
    			has_template = garibaldi_character_template
    		}
    	}
        custom_tooltip = {
        	text = bavarocracy_expell_tt
        	every_scope_character = {
        		limit = {
	        		OR = {
	        			is_ruler = yes
	        			is_heir = yes
	        			culture = cu:catalan
	        		}
	        	}
				kill_character = {
					hidden = yes
				}
        	}
		}
        custom_tooltip = {
        	text = bavarocracy_prince_garibaldi_tt
	        random_scope_character = {
	        	limit = {
	        		has_template = garibaldi_character_template
	        	}
	        	set_character_as_ruler = yes
	        }
        }

        every_country = {
        	limit = {
	        	has_law = law_type:law_monarchy
	        	country_rank >= rank_value:great_power
	        	NOT = {
	        		root = this
	        	}
	        }
	        root = {
				change_relations = {
					country = prev
					value = -30
				}
			}
        }
		every_interest_group = {
			limit = {
				law_stance = {
					law = law_type:law_monarchy
					value > neutral
				}
			}
			add_modifier = {
				name = modifier_revolutionary_king
				days = normal_modifier_time
			}
		}
		every_interest_group = {
			limit = {
				law_stance = {
					law = law_type:law_presidential_republic
					value < neutral
				}
			}
			add_modifier = {
				name = modifier_architects_of_the_second_republic
				days = normal_modifier_time
			}
		}
	}
}
