namespace = dvg_nvm

dvg_nvm.1 = {
	type = country_event
	placement = ROOT

	title = dvg_nvm.1.t
	desc = dvg_nvm.1.d
	flavor = dvg_nvm.1.f

	event_image = {
		video = "gfx/event_pictures/southamerica_slaves_night.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/aristocrats"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	duration = 3

	trigger = {


	}

	# Oh no!
	option = {
		name = dvg_nvm.1.a
		default_option = yes

		add_radicals = {
			value = 0.10
			culture = cu:afro_amerigan
		}

		if = {
			limit = {
				NOT = {
					any_character = {
						has_variable = mahdi_var
					}
				}
			}
			create_character = {
			first_name = Abdullahi
			last_name = Ibrahim
			culture = cu:fulbe
			age = 25
			is_agitator = yes
			noble = yes
			ideology = ideology_traditionalist_minoritarian
			traits = {
				firebrand

				persistent

				erudite

				basic_defensive_strategist

				basic_offensive_planner

			}
			on_created = {
				set_variable = mahdi_var
			}
			}
		}
		
		
	}
}

dvg_nvm.2 = {
	type = country_event
	placement = ROOT

	title = dvg_nvm.2.t
	desc = dvg_nvm.2.d
	flavor = dvg_nvm.2.f

	event_image = {
		video = "gfx/event_pictures/southamerica_slaves_night.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/aristocrats"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	duration = 3

	trigger = {

	}

	immediate = {
		random_scope_character = {
			limit = {
				has_variable = mahdi_var
			}
		}
		save_scope_as = prince_scope

		random_country = {
			limit = {
				country_is_in_africa = yes
				any_primary_culture = {
					has_discrimination_trait_group = heritage_group_african
				}
			}
			save_scope_as = scope_africa
		}
	}

	# Oh no!
	option = {
		name = dvg_nvm.2.a
		default_option = yes
		
		add_radicals = {
			value = 0.15
			culture = cu:afro_amerigan
		}
	}

	option = {
		name = dvg_nvm.2.b

		add_radicals = {
			value = 0.10
		}
		add_modifier = {
			name = modifier_small_expedition_cost
			months = 12
		}
		
		scope:prince_scope = {
			transfer_character = scope:scope_africa
		}
	}
}

dvg_nvm.3 = {
	type = country_event
	placement = ROOT

	title = dvg_nvm.3.t
	desc = dvg_nvm.3.d
	flavor = dvg_nvm.3.f

	event_image = {
		video = "gfx/event_pictures/southamerica_slaves_night.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/aristocrats"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	duration = 3

	trigger = {
		
	}
	immediate = {
		random_scope_state = {
			limit = {
				state_region = {
					is_homeland = cu:afro_amerigan
				}
			}
			save_scope_as = cult_growth_state
			set_variable = nvm_state
		}	
	}

	# Oh no!
	option = {
		name = dvg_nvm.3.a
		default_option = yes
		
		scope:cult_growth_state = {
			every_scope_pop = {
			limit = {
				average_sol_for_culture = {
					target = cu:afro_amerigan
					value < root.average_sol_for_primary_cultures
				}
				culture = cu:afro_amerigan
			}
			change_pop_religion = {
				target = rel:sunni
				value = 0.33
			}
			}
		}
		
	}
}
#Nouvelle Mali Revolt
dvg_nvm.4 = {
	type = country_event
	placement = ROOT

	title = dvg_nvm.4.t
	desc = dvg_nvm.4.d
	flavor = dvg_nvm.4.f

	event_image = {
		video = "gfx/event_pictures/southamerica_slaves_night.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/aristocrats"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	duration = 3

	trigger = {
		has_technology_researched = nationalism
	}

	immediate = {
		random_scope_state = {
			limit = {
				state_region = {
					is_homeland = cu:afro_amerigan
				}
				is_capital = no
			}
			save_scope_as = nvm_state
		}
		if = {
			limit = {
				NOT = {
					exists = c:NVM
				}
			}
			create_country = {
			tag = NVM
			origin = THIS
			state = scope:nvm_state
			}
		}
		
		c:NVM = {
			save_scope_as = scope_NVM

			every_scope_pop = {
				limit = {
					is_pop_type = slaves
					culture = {
						has_discrimination_trait_group = heritage_group_african
					}
				}
				change_poptype = pop_type:peasants
			}
			every_scope_pop = {
				limit = {
					culture = {
						has_discrimination_trait_group = heritage_group_european
					}
					
				}
				change_poptype = pop_type:slaves
			}
		}
	}

	# Oh no!
	option = {
		name = dvg_nvm.4.a
		default_option = yes
		
		every_scope_state = {
			limit = {
				is_capital = no
			state_is_in_south_america = yes
			religion_percent_state = {
				target = rel:sunni
				value > 0.30
			}
			culture_percent_state = {
				target = cu:afro_amerigan
				value > 0.30
			}
			state_region = {
				is_homeland = cu:afro_amerigan
			}
			}
			
			custom_tooltip = {
				text = NVM

				every_scope_pop = {
				limit = {
					is_pop_type = slaves
					culture = {
						has_discrimination_trait_group = heritage_group_african
					}
				}
				change_poptype = pop_type:peasants
				}
				every_scope_pop = {
				limit = {
					culture = {
						has_discrimination_trait_group = heritage_group_european
					}
					
				}
				change_poptype = pop_type:slaves
				}
			}

			set_state_owner = c:NVM
		}
		
		create_diplomatic_play = {
			type = dp_rebellion_annex
			target_country = c:NVM
		}
	}

	option = {
		name = dvg_nvm.4.b

		every_scope_state = {
			limit = {
				is_capital = no
			state_is_in_south_america = yes
			religion_percent_state = {
				target = rel:sunni
				value > 0.30
			}
			culture_percent_state = {
				target = cu:afro_amerigan
				value > 0.30
			}
			state_region = {
				is_homeland = cu:afro_amerigan
			}
			}
			custom_tooltip = {
				text = NVM

				every_scope_pop = {
				limit = {
					is_pop_type = slaves
					culture = {
						has_discrimination_trait_group = heritage_group_african
					}
				}
				change_poptype = pop_type:peasants
				}
				every_scope_pop = {
				limit = {
					culture = {
						has_discrimination_trait_group = heritage_group_european
					}
					
				}
				change_poptype = pop_type:slaves
				}
			}
			set_state_owner = c:NVM
		}
		
		create_diplomatic_play = {
			type = dp_rebellion_annex
			target_country = c:NVM
		}
		play_as = c:NVM
		
	}
}

dvg_nvm.5 = {
	type = country_event
	placement = ROOT

	title = dvg_nvm.5.t
	desc = dvg_nvm.5.d
	flavor = dvg_nvm.5.f

	event_image = {
		video = "gfx/event_pictures/southamerica_slaves_night.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/aristocrats"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	duration = 3

	trigger = {
	}

	# Oh no!
	option = {
		name = dvg_nvm.5.a
		default_option = yes
		
		
	}
}

dvg_nvm.6 = {
	type = country_event
	placement = ROOT

	title = dvg_nvm.6.t
	desc = dvg_nvm.6.d
	flavor = dvg_nvm.6.f

	event_image = {
		video = "gfx/event_pictures/southamerica_slaves_night.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/aristocrats"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	duration = 3

	trigger = {
	}

	# Oh no!
	option = {
		name = dvg_nvm.6.a
		default_option = yes
		
		
	}
}

dvg_nvm.7 = {
	type = country_event
	placement = ROOT

	title = dvg_nvm.7.t
	desc = dvg_nvm.7.d
	flavor = dvg_nvm.7.f

	event_image = {
		video = "gfx/event_pictures/southamerica_slaves_night.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/aristocrats"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	duration = 3

	trigger = {
	}

	# Oh no!
	option = {
		name = dvg_nvm.7.a
		default_option = yes
		
		
	}
}

dvg_nvm.8 = {
	type = country_event
	placement = ROOT

	title = dvg_nvm.8.t
	desc = dvg_nvm.8.d
	flavor = dvg_nvm.8.f

	event_image = {
		video = "gfx/event_pictures/southamerica_slaves_night.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/aristocrats"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	duration = 3

	trigger = {
	}

	# Oh no!
	option = {
		name = dvg_nvm.8.a
		default_option = yes
		
		
	}
}