namespace = dvg_hawaii


#Fang Hu
dvg_hawaii.1 = {
	type = country_event
	placement = ROOT

	title = dvg_hawaii.1.t
	desc = dvg_hawaii.1.d
	flavor = dvg_hawaii.1.f

	event_image = {
		video = "gfx/event_pictures/unspecific_ruler_speaking_to_people.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/military_parade"

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	duration = 3

	trigger = {

	}
	immediate = {
		c:QIN = { save_scope_as = scope_QIN}
		c:FGH = { save_scope_as = scope_FGH}
		c:SCA = { save_scope_as = scope_SCA}
	}

	option = {
		name = dvg_hawaii.1.a

		add_journal_entry = {
			type = je_fang_hu
		}
		change_relations = {
			country = c:QIN
			value = -10
		}
	}
}

#House Kalinikapule Escapes
dvg_hawaii.2 = {
	type = country_event
	placement = ROOT

	title = dvg_hawaii.2.t
	desc = dvg_hawaii.2.d
	flavor = dvg_hawaii.2.f

	event_image = {
		video = "gfx/event_pictures/unspecific_naval_battle.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/military_parade"

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	duration = 3

	trigger = {

	}
	immediate = {
		c:QIN = { save_scope_as = scope_QIN}
		c:FGH = { save_scope_as = scope_FGH}
		c:SCA = { save_scope_as = scope_SCA}

		random_scope_character = {
			limit = {
				has_variable = iolani_var
			}
			save_scope_as = scope_iolani
		}
	}

	option = {
		name = dvg_hawaii.2.a

		random_scope_character = {
			limit = {
				has_variable = iolani_var
			}
			place_character_in_void = 1
		}
		
	}
}

#Death of the Marshall, Enduring Oligarchy
dvg_hawaii.3 = {
	type = country_event
	placement = ROOT

	title = dvg_hawaii.3.t
	desc = dvg_hawaii.3.d
	flavor = dvg_hawaii.3.f

	event_image = {
		video = "gfx/event_pictures/unspecific_signed_contract.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/military_parade"

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	duration = 3

	trigger = {

	}
	immediate = {
		c:QIN = { save_scope_as = scope_QIN}
		c:FGH = { save_scope_as = scope_FGH}
		c:SCA = { save_scope_as = scope_SCA}
		c:JAP = { save_scope_as = scope_JAP}

	}

	option = {
		name = dvg_hawaii.3.a

		set_global_variable = fang_hu_succession

		create_character = {
			first_name = Zhang
			last_name = Cheng
			culture = cu:qingqiuan
			is_admiral = yes
			ruler = yes
			age = 35
			historical = yes
			traits = {
				dockyard_master
				basic_colonial_administrator
				basic_diplomat
			}
		}
		s:STATE_HAWAIIAN_ISLANDS = {
			add_homeland = cu:qingqiuan
		}
	}
}

#Go back to Qingqiu
dvg_hawaii.4 = {
	type = country_event
	placement = ROOT

	title = dvg_hawaii.4.t
	desc = dvg_hawaii.4.d
	flavor = dvg_hawaii.4.f

	event_image = {
		video = "gfx/event_pictures/unspecific_signed_contract.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/military_parade"

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	duration = 3

	trigger = {

	}
	immediate = {
		c:QIN = { save_scope_as = scope_QIN}
		c:FGH = { save_scope_as = scope_FGH}
		c:SCA = { save_scope_as = scope_SCA}
		c:FGH = {
			ruler = {
				save_scope_as = futing_scope
			}
		}
		ig:ig_armed_forces = {
			save_scope_as = armed_forces_ig
		}
	}

	option = {
		name = dvg_hawaii.4.a
		
		add_radicals = {
			value = 0.10
		}
	}

	option = {
		name = dvg_hawaii.4.b
		default_option = yes

		scope:futing_scope = {
			transfer_character = ROOT
			add_character_role = agitator
			set_variable = incracerated_var
		}
		annex = c:FGH
		every_diplomatic_play = {
			limit = {
				target_is = c:FGH
			}
			end_play = yes
		}
		add_radicals = {
			value = 0.15
		}
	}

	option = {
		name = dvg_hawaii.4.c
		scope:futing_scope = {
			transfer_character = ROOT
			set_as_interest_group_leader = yes

			add_trait = demagogue
		}
		add_loyalists = {
			value = 0.15
			pop_type = soldiers
		}
		annex = c:FGH

		every_diplomatic_play = {
			limit = {
				target_is = c:FGH
			}
			end_play = yes
		}
	}
}

#End of Oligarchy, Become Hawaii
dvg_hawaii.5 = {
	type = country_event
	placement = ROOT

	title = dvg_hawaii.5.t
	desc = dvg_hawaii.5.d
	flavor = dvg_hawaii.5.f

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_political_extremism.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/military_parade"

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	duration = 3

	trigger = {

	}
	immediate = {
		c:QIN = { save_scope_as = scope_QIN}
		c:FGH = { save_scope_as = scope_FGH}
		c:SCA = { save_scope_as = scope_SCA}
		random_character = {
			limit = {
				has_variable = iolani_var
			}
			save_scope_as = scope_iolani
		}
	}

	option = {
		name = dvg_hawaii.5.a

		change_tag = HAW
		add_primary_culture = cu:hawaiian
		remove_primary_culture = cu:qingqiuan

		change_relations = {
			country = c:SCA
			value = 30
		}
		
		random_scope_character = {
			limit = {
				has_variable = iolani_var
			}
			free_character_from_void = yes
			set_character_as_ruler = yes
		}
	}
}

#Fang Hu Petitions for Subjugation
dvg_hawaii.6 = {
	type = country_event
	placement = ROOT

	title = dvg_hawaii.6.t
	desc = dvg_hawaii.6.d
	flavor = dvg_hawaii.6.f

	event_image = {
		video = "gfx/event_pictures/unspecific_signed_contract.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/military_parade"

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	duration = 3

	trigger = {
		exists = c:FGH
	}
	immediate = {
		c:QIN = { save_scope_as = scope_QIN}
		c:FGH = { save_scope_as = scope_FGH}
		c:SCA = { save_scope_as = scope_SCA}
		c:FGH = {
			ruler = {
				save_scope_as = futing_scope
			}
		}
		ig:ig_armed_forces = {
			save_scope_as = armed_forces_ig
		}
	}

	option = {
		name = dvg_hawaii.6.a
		trigger = {
			c:FGH = {
				is_player = no
			}
		}

		scope:futing_scope = {
			transfer_character = ROOT
			set_as_interest_group_leader = yes

			add_trait = demagogue
		}3
		
		add_radicals = {
			value = 0.10
		}
	}

	option = {
		name = dvg_hawaii.6.b
		default_option = yes

		create_diplomatic_pact = {
			country = c:FGH
			type = protectorate
		}
		create_incident = {
			country = c:FGH
			value = 3
		}
	}

	option = {
		name = dvg_hawaii.6.c
		
		change_relations = {
			country = c:FGH
			value = -15
		}
	}
}

#Human Trafficking
dvg_hawaii.7 = {
	type = country_event
	placement = ROOT

	title = dvg_hawaii.7.t
	desc = dvg_hawaii.7.d
	flavor = dvg_hawaii.7.f

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_political_extremism.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/military_parade"

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	duration = 3

	trigger = {

	}
	immediate = {
		random_country = {
			limit = {
				is_country_type = decentralized 
				region = sr:REPLACE_OR_CREATE:region_oceania
			}
			save_scope_as = decentral_scope
		}

		random_country = {
			limit = {
				NOT = {
					is_country_type = decentralized 
				}
				any_primary_culture = {
					has_discrimination_trait = heritage_han
				}
			}
			save_scope_as = central_scope
			
		}
		random_scope_state = {
			save_scope_as = capital_scope
			owner = {
				save_scope_as = root_scope
			}
		}
	}

	option = {
		name = dvg_hawaii.7.a
		default_option = yes

		add_modifier = {
			name = dvg_human_trafficking
			months = 7
			is_decaying = yes
		}

		create_incident = {
			country = THIS
			value = 12
		}
		scope:central_scope = {
			change_relations = {
				country = ROOT
				value = -20
			}
			random_scope_pop = {
				move_pop = scope:capital_scope
				if = {
					limit = {
						NOT = {
							scope:root_scope = {
								has_law = law_type:law_slavery_banned
							}
						}
					}
					change_poptype = pop_type:slaves
				}
			}
		}

	}


	option = {
		name = dvg_hawaii.7.b

		create_incident = {
			country = THIS
			value = 5
		}

		add_modifier = {
			name = dvg_human_trafficking
			months = 7
			is_decaying = yes
		}

		scope:decentral_scope = {
			change_relations = {
				country = ROOT
				value = -20
			}
			random_scope_pop = {
				move_pop = scope:capital_scope
				if = {
					limit = {
						NOT = {
							scope:root_scope = {
								has_law = law_type:law_slavery_banned
							}
						}
					}
					change_poptype = pop_type:slaves
				}
			}
		}
		
	}
}