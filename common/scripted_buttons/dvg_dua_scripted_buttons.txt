dua_integration_anglois_button = {
    name = "dua_anglois_button"
    desc = "dua_anglois_button_desc"

    visible = {
        owner = { 
            NOT = { has_variable = dua_integration_freeze } 
        }
    }

    possible = {
        NOT = {
            has_modifier = decision_cooldown
        }
    }
    effect = {
        
    }
}

dua_total_revolution_button = {
    name = "dua_total_revolution_button"
    desc = "dua_total_revolution_button_desc"

    possible = {
        always = no
    }

    effect = {
        
    }
}

dua_integration_french_button = {
    name = "dua_french_button"
    desc = "dua_french_button_desc"

    visible = {
        owner = { 
            NOT = { has_variable = dua_integration_freeze } 
        }
    }

    possible = {
        NOT = {
            has_modifier = decision_cooldown
        }
    }
    effect = {
        change_variable = { name = french_progress_from_effects add = 0.5 }
        add_modifier = {
            name = decision_cooldown
            months = 12
        }
    }
}

dua_integration_english_button = {
    name = "dua_english_button"
    desc = "dua_english_button_desc"

    visible = {
        owner = { 
            NOT = { has_variable = dua_integration_freeze } 
        }
    }

    possible = {
        NOT = {
            has_modifier = decision_cooldown
        }
    }
    effect = {
        change_variable = { name = english_progress_from_effects add = 0.5 }
        add_modifier = {
            name = decision_cooldown
            months = 12
        }
    }
}

# Neo-Absolutism

dua_neo_absolutism_abolish_feudal_obligations_button = {
	name = dua_neo_absolutism_abolish_feudal_obligations_button
	desc = dua_neo_absolutism_abolish_feudal_obligations_button_desc

	visible = {
		NOT = {
			has_variable = je_dua_neo_absolutism_marginalized_feudal_obligations_var
		}
	}

	possible = {
		NOT = {
			has_law = law_type:law_manorialism
		}
		NOT = {
			has_law = law_type:law_states_general
		}
	}

	selected = {
	}

	effect = {
		set_variable = je_dua_neo_absolutism_marginalized_feudal_obligations_var
		custom_tooltip = {
			text = dua_neo_absolutism_constitutional_pressure_progress_bar_decrease_10_tt
			je:je_dua_neo_absolutism = {
				add_progress = { value = -10 name = dua_neo_absolutism_constitutional_pressure_progress_bar }
			}
		}
		ig:ig_landowners ?= {
			add_modifier = {
				name = modifier_abolished_feudal_obligations
				days = normal_modifier_time
			}
		}
		ig:ig_rural_folk ?= {
			add_modifier = {
				name = modifier_empowered_smallholders
				days = normal_modifier_time
			}
		}
		add_modifier = {
			name = modifier_robot_compensation_payments
			days = normal_modifier_time
			multiplier = money_amount_multiplier_medium
		}
		add_modifier = {
			name = modifier_bureaucratisation_of_nobles
			days = normal_modifier_time
		}
	}

	ai_chance = {
		value = 1
	}
}

dua_neo_absolutism_papal_concordat_button = {
	name = dua_neo_absolutism_papal_concordat_button
	desc = dua_neo_absolutism_papal_concordat_button_desc

	visible = {
		NOT = {
			has_variable = dua_neo_absolutism_papal_concordat_var
		}
	}

	possible = {
		NOT = {
			c:PAP ?= {
				is_diplomatic_play_enemy_of = root
			}
		}
		OR = {
			NOT = {
				exists = c:PAP
			}
			c:PAP ?= {
				relations:root >= relations_threshold:amicable
			}
		}
	}

	selected = {
	}

	effect = {
		set_variable = je_dua_neo_absolutism_marginalized_papal_concordat_var
		custom_tooltip = {
			text = dua_neo_absolutism_constitutional_pressure_progress_bar_increase_10_tt
			je:je_dua_neo_absolutism = {
				add_progress = { value = 10 name = dua_neo_absolutism_constitutional_pressure_progress_bar }
			}
		}
		if = {
			limit = {
				exists = c:PAP
			}
			change_relations = {
				country = c:PAP
				value = 40
			}
			if = {
				limit = {
					is_power_bloc_leader = yes
				}
				root.power_bloc ?= {
					add_leverage = { target = c:PAP value = 100 }
				}
			}
		}
		if = {
			limit = {
				NOT = {
					has_law = law_type:law_state_religion
				}
			}
			activate_law = law_type:law_state_religion
		}
		if = {
			limit = {
				NOT = {
					has_law = law_type:law_religious_schools
				}
			}
			activate_law = law_type:law_religious_schools
		}
		add_loyalists = {
			religion = rel:catholic
			value = medium_radicals
		}
		add_radicals = {
			religion = rel:protestant
			value = small_radicals
		}
		set_variable = dua_neo_absolutism_papal_concordat_var
	}

	ai_chance = {
		value = 1
	}
}

#fascism

je_aaf_eliminate_parliament = {
	name = "je_aaf_eliminate_parliament"
	desc = "je_aaf_eliminate_parliament_desc"

	visible = {
		NOT = {
			has_variable = fatherland_front_var
		}
	}

	ai_chance = {
		value = 10
	}

	possible = {
		legitimacy >= 50
		ruler.interest_group = {
			is_in_government = yes
			OR = {
				custom_tooltip = {
					text = has_corporatist_ideology_tt
					has_ideology = ideology:ideology_corporatist
				}
				custom_tooltip = {
					text = leader_has_corporatist_ideology_tt
					leader = {
						OR = {
							has_ideology = ideology:ideology_fascist
							has_ideology = ideology:ideology_integralist
							has_ideology = ideology:ideology_corporatist_leader
						}
					}
				}
			}
			custom_tooltip = {
				text = is_fatherland_front_party_tt
				party ?= {
					OR = {
						is_party_type = agrarian_party
						is_party_type = conservative_party
						is_party_type = fascist_party
						is_party_type = military_party
						is_party_type = religious_party
					}
				}
			}
		}
		custom_tooltip = {
			text = no_non_fatherland_front_party_in_government_tt
			NOT = {
				any_interest_group = {
					is_in_government = yes
					party ?= {
						NOR = {
							is_party_type = agrarian_party
							is_party_type = conservative_party
							is_party_type = fascist_party
							is_party_type = military_party
							is_party_type = religious_party
						}
					}
				}
			}
		}
	}

	effect = {
		set_variable = fatherland_front_var
		ruler.interest_group.party ?= {
			save_scope_as = relevant_party
		}
		if = {
			limit = {
				exists = ruler.interest_group.party
			}
			custom_tooltip = form_fatherland_front_tt
		}
		activate_law = law_type:law_single_party_state
	}

	selected = {

	}

	ai_chance = {
		value = 5
	}
}

#dua federal

je_dua_federation_english_button = {
	name = "je_dua_federation_english_button"
	desc = "je_dua_federation_english_button_desc"

	visible = {
		exists = c:DUA
		c:DUA = ROOT
		OR = {
			any_scope_state = {
				state_region = {
					is_homeland = cu:british
				}
			}
			any_subject_or_below = {
				OR = {
					#is_subject_type = subject_type_puppet
					is_subject_type = subject_type_personal_union
				}
				any_scope_state = {
					state_region = {
						is_homeland = cu:british
					}
				}
			}
		}
		NAND = {
			has_variable = dua_federation_english_button
			NOT = {
				any_in_list = {
					variable = dua_integrated_cultures
					cu:british ?= this
				}
			}
		}
		NOT = {
			any_in_list = {
				variable = dua_disqualified_cultures
				cu:british ?= this
			}
		}
	}

	selected = {
		any_in_list = {
			variable = dua_integrated_cultures
			cu:british ?= this
		}
		NOT = {
			any_in_list = {
				variable = dua_disqualified_cultures
				cu:british ?= this
			}
		}
	}

	ai_chance = {
		value = 10
	}

	possible = {
		custom_tooltip = {
			text = dua_federation_button_cooldown_tt
			NOT = {
				has_variable = dua_federation_button_cooldown
			}
		}
		custom_tooltip = {
			text = not_already_used_this_interaction_tt
			NOT = {
				has_variable = dua_federation_english_button
			}
		}
		country_average_culture_pop_acceptance = {
			culture = cu:british
			value >= acceptance_status_3
		}
		radical_fraction = {
			culture = cu:british
			value <= 0.10
		}
		cu:british = {
			custom_tooltip = {
				text = all_culture_states_integrated_tt
				NOT = {
					ROOT = {
						any_scope_state = {
							state_region = {
								is_homeland = cu:british
							}
							is_incorporated = no
						}
					}
				}
			}
			custom_tooltip = {
				text = no_active_secession_movement_tt
				culture_secession_progress = { target = ROOT value = 0 }
			}
			custom_tooltip = {
				text = already_integrated_tt
				ROOT = {
					NOT = {
						any_in_list = {
							variable = dua_integrated_cultures
							cu:british ?= this
						}
					}
				}
			}
			custom_tooltip = {
				text = culture_disqualified_tt
				ROOT = {
					NOT = {
						any_in_list = {
							variable = dua_disqualified_cultures
							cu:british ?= this
						}
					}
				}
			}
		}
	}

	effect = {
		set_variable = dua_federation_english_button
		trigger_event = {
			id = dua_federation.3
		}
		custom_tooltip = je_dua_federation_english_button_integrate_tt
		custom_tooltip = je_dua_federation_english_button_disqualify_tt
		set_variable = {
			name = je_dua_federation_english_button_cooldown
			days = 360
		}
	}

	ai_chance = {
		value = 100
	}
}

je_dua_federation_french_button = {
	name = "je_dua_federation_french_button"
	desc = "je_dua_federation_french_button_desc"

	visible = {
		exists = c:DUA
		c:DUA = ROOT
		OR = {
			any_scope_state = {
				state_region = {
					is_homeland = cu:french
				}
			}
			any_subject_or_below = {
				OR = {
					#is_subject_type = subject_type_puppet
					is_subject_type = subject_type_personal_union
				}
				any_scope_state = {
					state_region = {
						is_homeland = cu:french
					}
				}
			}
		}
		NAND = {
			has_variable = dua_federation_french_button
			NOT = {
				any_in_list = {
					variable = dua_integrated_cultures
					cu:french ?= this
				}
			}
		}
		NOT = {
			any_in_list = {
				variable = dua_disqualified_cultures
				cu:french ?= this
			}
		}
	}

	selected = {
		any_in_list = {
			variable = dua_integrated_cultures
			cu:french ?= this
		}
		NOT = {
			any_in_list = {
				variable = dua_disqualified_cultures
				cu:french ?= this
			}
		}
	}

	ai_chance = {
		value = 10
	}

	possible = {
		custom_tooltip = {
			text = dua_federation_button_cooldown_tt
			NOT = {
				has_variable = dua_federation_button_cooldown
			}
		}
		custom_tooltip = {
			text = not_already_used_this_interaction_tt
			NOT = {
				has_variable = dua_federation_french_button
			}
		}
		country_average_culture_pop_acceptance = {
			culture = cu:french
			value >= acceptance_status_3
		}
		radical_fraction = {
			culture = cu:french
			value <= 0.10
		}
		cu:british = {
			custom_tooltip = {
				text = all_culture_states_integrated_tt
				NOT = {
					ROOT = {
						any_scope_state = {
							state_region = {
								is_homeland = cu:french
							}
							is_incorporated = no
						}
					}
				}
			}
			custom_tooltip = {
				text = no_active_secession_movement_tt
				culture_secession_progress = { target = ROOT value = 0 }
			}
			custom_tooltip = {
				text = already_integrated_tt
				ROOT = {
					NOT = {
						any_in_list = {
							variable = dua_integrated_cultures
							cu:french ?= this
						}
					}
				}
			}
			custom_tooltip = {
				text = culture_disqualified_tt
				ROOT = {
					NOT = {
						any_in_list = {
							variable = dua_disqualified_cultures
							cu:french ?= this
						}
					}
				}
			}
		}
	}

	effect = {
		set_variable = dua_federation_french_button
		trigger_event = {
			id = dua_federation.4
		}
		custom_tooltip = je_dua_federation_french_button_integrate_tt
		custom_tooltip = je_dua_federation_french_button_disqualify_tt
		set_variable = {
			name = je_dua_federation_french_button_cooldown
			days = 360
		}
	}

	ai_chance = {
		value = 100
	}
}

je_dua_federation_occitanian_button = {
	name = "je_dua_federation_occitanian_button"
	desc = "je_dua_federation_occitanian_button_desc"

	visible = {
		exists = c:DUA
		c:DUA = ROOT
		OR = {
			any_scope_state = {
				state_region = {
					is_homeland = cu:occitan
				}
			}
			any_subject_or_below = {
				OR = {
					#is_subject_type = subject_type_puppet
					is_subject_type = subject_type_personal_union
				}
				any_scope_state = {
					state_region = {
						is_homeland = cu:occitan
					}
				}
			}
		}
		NAND = {
			has_variable = dua_federation_occitan_button
			NOT = {
				any_in_list = {
					variable = dua_integrated_cultures
					cu:occitan ?= this
				}
			}
		}
		NOT = {
			any_in_list = {
				variable = dua_disqualified_cultures
				cu:occitan ?= this
			}
		}
	}

	selected = {
		any_in_list = {
			variable = dua_integrated_cultures
			cu:occitan ?= this
		}
		NOT = {
			any_in_list = {
				variable = dua_disqualified_cultures
				cu:occitan ?= this
			}
		}
	}

	ai_chance = {
		value = 10
	}

	possible = {
		custom_tooltip = {
			text = dua_federation_button_cooldown_tt
			NOT = {
				has_variable = dua_federation_button_cooldown
			}
		}
		custom_tooltip = {
			text = not_already_used_this_interaction_tt
			NOT = {
				has_variable = dua_federation_occitan_button
			}
		}
		country_average_culture_pop_acceptance = {
			culture = cu:occitan
			value >= acceptance_status_3
		}
		radical_fraction = {
			culture = cu:occitan
			value <= 0.15
		}
		cu:british = {
			custom_tooltip = {
				text = all_culture_states_integrated_tt
				NOT = {
					ROOT = {
						any_scope_state = {
							state_region = {
								is_homeland = cu:occitan
							}
							is_incorporated = no
						}
					}
				}
			}
			custom_tooltip = {
				text = no_active_secession_movement_tt
				culture_secession_progress = { target = ROOT value = 0 }
			}
			custom_tooltip = {
				text = already_integrated_tt
				ROOT = {
					NOT = {
						any_in_list = {
							variable = dua_integrated_cultures
							cu:occitan ?= this
						}
					}
				}
			}
			custom_tooltip = {
				text = culture_disqualified_tt
				ROOT = {
					NOT = {
						any_in_list = {
							variable = dua_disqualified_cultures
							cu:occitan ?= this
						}
					}
				}
			}
		}
	}

	effect = {
		set_variable = je_dua_federation_occitanian_button
		trigger_event = {
			id = dua_federation.5
		}
		custom_tooltip = je_dua_federation_occitanian_button_integrate_tt
		custom_tooltip = je_dua_federation_occitanian_button_disqualify_tt
		set_variable = {
			name = je_dua_federation_occitanian_button_cooldown
			days = 360
		}
	}

	ai_chance = {
		value = 100
	}
}

je_dua_federation_irish_button = {
	name = "je_dua_federation_irish_button"
	desc = "je_dua_federation_irish_button_desc"

	visible = {
		exists = c:DUA
		c:DUA = ROOT
		OR = {
			any_scope_state = {
				state_region = {
					is_homeland = cu:irish
				}
			}
			any_subject_or_below = {
				OR = {
					#is_subject_type = subject_type_puppet
					is_subject_type = subject_type_personal_union
				}
				any_scope_state = {
					state_region = {
						is_homeland = cu:irish
					}
				}
			}
		}
		NAND = {
			has_variable = dua_federation_irish_button
			NOT = {
				any_in_list = {
					variable = dua_integrated_cultures
					cu:irish ?= this
				}
			}
		}
		NOT = {
			any_in_list = {
				variable = dua_disqualified_cultures
				cu:irish ?= this
			}
		}
	}

	selected = {
		any_in_list = {
			variable = dua_integrated_cultures
			cu:irish ?= this
		}
		NOT = {
			any_in_list = {
				variable = dua_disqualified_cultures
				cu:irish ?= this
			}
		}
	}

	ai_chance = {
		value = 10
	}

	possible = {
		custom_tooltip = {
			text = dua_federation_button_cooldown_tt
			NOT = {
				has_variable = dua_federation_button_cooldown
			}
		}
		custom_tooltip = {
			text = not_already_used_this_interaction_tt
			NOT = {
				has_variable = dua_federation_irish_button
			}
		}
		country_average_culture_pop_acceptance = {
			culture = cu:irish
			value >= acceptance_status_3
		}
		radical_fraction = {
			culture = cu:irish
			value <= 0.15
		}
		cu:british = {
			custom_tooltip = {
				text = all_culture_states_integrated_tt
				NOT = {
					ROOT = {
						any_scope_state = {
							state_region = {
								is_homeland = cu:irish
							}
							is_incorporated = no
						}
					}
				}
			}
			custom_tooltip = {
				text = no_active_secession_movement_tt
				culture_secession_progress = { target = ROOT value = 0 }
			}
			custom_tooltip = {
				text = already_integrated_tt
				ROOT = {
					NOT = {
						any_in_list = {
							variable = dua_integrated_cultures
							cu:irish ?= this
						}
					}
				}
			}
			custom_tooltip = {
				text = culture_disqualified_tt
				ROOT = {
					NOT = {
						any_in_list = {
							variable = dua_disqualified_cultures
							cu:irish ?= this
						}
					}
				}
			}
		}
	}

	effect = {
		set_variable = je_dua_federation_irish_button
		trigger_event = {
			id = dua_federation.6
		}
		custom_tooltip = je_dua_federation_irish_button_integrate_tt
		custom_tooltip = je_dua_federation_irish_button_disqualify_tt
		set_variable = {
			name = je_dua_federation_irish_button_cooldown
			days = 360
		}
	}

	ai_chance = {
		value = 100
	}
}

je_dua_federation_welsh_button = {
	name = "je_dua_federation_welsh_button"
	desc = "je_dua_federation_welsh_button_desc"

	visible = {
		exists = c:DUA
		c:DUA = ROOT
		OR = {
			any_scope_state = {
				state_region = {
					is_homeland = cu:welsh
				}
			}
			any_subject_or_below = {
				OR = {
					#is_subject_type = subject_type_puppet
					is_subject_type = subject_type_personal_union
				}
				any_scope_state = {
					state_region = {
						is_homeland = cu:welsh
					}
				}
			}
		}
		NAND = {
			has_variable = dua_federation_welsh_button
			NOT = {
				any_in_list = {
					variable = dua_integrated_cultures
					cu:welshh ?= this
				}
			}
		}
		NOT = {
			any_in_list = {
				variable = dua_disqualified_cultures
				cu:welsh ?= this
			}
		}
	}

	selected = {
		any_in_list = {
			variable = dua_integrated_cultures
			cu:welsh ?= this
		}
		NOT = {
			any_in_list = {
				variable = dua_disqualified_cultures
				cu:welsh ?= this
			}
		}
	}

	ai_chance = {
		value = 10
	}

	possible = {
		custom_tooltip = {
			text = dua_federation_button_cooldown_tt
			NOT = {
				has_variable = dua_federation_button_cooldown
			}
		}
		custom_tooltip = {
			text = not_already_used_this_interaction_tt
			NOT = {
				has_variable = dua_federation_welsh_button
			}
		}
		country_average_culture_pop_acceptance = {
			culture = cu:welsh
			value >= acceptance_status_3
		}
		radical_fraction = {
			culture = cu:welsh
			value <= 0.15
		}
		cu:british = {
			custom_tooltip = {
				text = all_culture_states_integrated_tt
				NOT = {
					ROOT = {
						any_scope_state = {
							state_region = {
								is_homeland = cu:welsh
							}
							is_incorporated = no
						}
					}
				}
			}
			custom_tooltip = {
				text = no_active_secession_movement_tt
				culture_secession_progress = { target = ROOT value = 0 }
			}
			custom_tooltip = {
				text = already_integrated_tt
				ROOT = {
					NOT = {
						any_in_list = {
							variable = dua_integrated_cultures
							cu:welsh ?= this
						}
					}
				}
			}
			custom_tooltip = {
				text = culture_disqualified_tt
				ROOT = {
					NOT = {
						any_in_list = {
							variable = dua_disqualified_cultures
							cu:welsh ?= this
						}
					}
				}
			}
		}
	}

	effect = {
		set_variable = je_dua_federation_welsh_button
		trigger_event = {
			id = dua_federation.7
		}
		custom_tooltip = je_dua_federation_welsh_button_integrate_tt
		custom_tooltip = je_dua_federation_welsh_button_disqualify_tt
		set_variable = {
			name = je_dua_federation_welsh_button_cooldown
			days = 360
		}
	}

	ai_chance = {
		value = 100
	}
}

je_dua_federation_enact_the_federation = {
	name = "je_dua_federation_enact_the_federation"
	desc = "je_dua_federation_enact_the_federation_desc"

	visible = {
		exists = c:DUA
		c:DUA = ROOT
	}

	ai_chance = {
		value = 10
	}

	possible = {
		trigger_if = {
			limit = {
				has_variable = count_integrated_cultures
			}
			custom_tooltip = {
				text = has_integrated_2_dua_cultures_tt
				var:count_integrated_cultures >= 2
				NOT = { has_variable = dua_federation_final_act }
			}
		}
	}

	effect = {
		custom_tooltip = {
			text = federalization_signed_tt
			set_variable = dua_federation_final_act
		}
	}

	selected = {
		custom_tooltip = {
			text = dua_federalization_was_signed_tt
			has_variable = dua_federation_final_act
		}
	}

	ai_chance = {
		value = 100
	}
}