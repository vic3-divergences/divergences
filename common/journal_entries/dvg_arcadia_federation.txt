# Code de I'indigÃ©nat

je_code_indigenat = {
	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	group = je_group_internal_affairs

	is_shown_in_lobby = {
		c:ARC = THIS
	}

	on_monthly_pulse = {
		random_events = {
			20 = 0
			2 = indigenat_resettlement.2 # john ross. Fires once because very specific.
			2 = indigenat_resettlement.3 # Preparing for resettlement, repeats.
			1 = indigenat_resettlement.4 # Trail of Tears, requires native_resettlement.3 to have fired at least once.
		}
	}

	complete = {
		OR = {
			has_law_or_variant = law_type:law_no_colonial_affairs
            has_law_or_variant = law_type:law_cultural_exclusion
            has_law_or_variant = law_type:law_law_multicultural
			cultural_acceptance_base = { target = cu:cherokee value >= acceptance_status_4 }
			custom_tooltip = {
				text = indigenat_removal_fail_tt
				NOT = {
					any_scope_state = {
						any_scope_pop = {
							culture = cu:cherokee
						}
					}
				}
			}
		}
	}

	on_complete = {
		custom_tooltip = {
			text = indigenat_removal_end
			if = {
				limit = {
					NOT = {
						any_scope_pop = {
							culture = cu:cherokee
						}
					}
				}
				trigger_event = { id = indigenat_resettlement.5 }
			}
			else = {
				trigger_event = { id = indigenat_resettlement.6 }
			}
		}
	}

	invalid = {
		OR = {
			NOT = { owns_entire_state_region = STATE_PAYS_TSALAGI }
			NOT = {
				AND = {
					exists = c:CHE
					exists = c:ARC
					c:CHE = { is_subject_of = c:ARC }
				}
			}
		}
	}

	weight = 200

	should_be_pinned_by_default = yes

	transferable = yes
}

je_trans_continental_railway = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_internal_affairs

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_global_variable = trans_continental_done }
		owns_entire_state_region = STATE_NOUVELLE_FLANDRE
		any_scope_state = {
			state_region = s:STATE_NEBRASKA
		}
	}

	possible = {
		has_technology_researched = railways
		owns_entire_state_region = STATE_NEBRASKIER
		owns_entire_state_region = STATE_BAJA_CALIFORNIA
	}

	complete = {
		any_scope_state = {
			state_region = s:STATE_NEBRASKIER
			has_building = building_railway
		}
		any_scope_state = {
			state_region = s:STATE_LES_PAINS
			has_building = building_railway
		}
		any_scope_state = {
			state_region = s:STATE_TERRES_ROUGES
			has_building = building_railway
		}
		any_scope_state = {
			state_region = s:STATE_NOUVELLE_FRANCE
			has_building = building_railway
		}
		any_scope_state = {
			state_region = s:STATE_PAYS_TSALAGI
			has_building = building_railway
		}
		any_scope_state = {
			state_region = s:STATE_LES_PAINS
			has_building = building_railway
		}
		any_scope_state = {
			state_region = s:STATE_BAHIA
			has_building = building_railway
		}
		any_scope_state = {
			state_region = s:STATE_BAJA_CALIFORNIA
			has_building = building_railway
		}
	}

	on_complete = {
		set_global_variable = trans_continental_done
		trigger_event = { id = transcontinental_railways_railways.2 }
	}

	weight = 50
}