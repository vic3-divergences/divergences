je_new_mercia_independent = {
	icon = "gfx/interface/icons/invention_icons/mechanized_farming.dds"

	group = je_group_internal_affairs

	is_shown_when_inactive = {	
		exists = c:BEO
		this = c:BEO
		NOT = { exists = c:NME  }
		any_scope_state = {
			region = sr:region_andes
		}
	}

	possible = {
		custom_tooltip = {
			text = carolean_victory_tt
			OR = {
			has_global_variable = carolean_victory
			has_global_variable = new_mercia
			}
		}
		
		any_scope_state = {
			is_coastal = yes
			is_isolated_from_market = no
			state_region = {
				is_homeland = cu:aimara
				is_homeland = cu:beornian
			}
		}
		
	}

	immediate = {
		set_variable = {
			name = new_mercia_var
			value = 0
		}
	}

	complete = {
		# If-else clause to avoid errors because of missing variable before JE activates
		any_scope_state = {
			percent > 0.50
			filter = {
				region = sr:region_andes
			}
			turmoil > 0.50
		}
		trigger_if = {
			limit = { 
				has_variable = new_mercia_var
			 }
			OR = {
				scope:journal_entry = { is_goal_complete = yes }
			}
		}
	}
	
	on_complete = {
		#set_variable = new_mercia_complete
		trigger_event = {
			id = dvg_beornia.22
		}
	}

	current_value = {
		value = root.var:new_mercia_var
	}

	goal_add_value = {
		value = 50
	}

	progressbar = yes
	
	on_monthly_pulse = {

		random_events = {
			100 = 0
		}

		effect = {
			if = {
				limit = {
					any_scope_state = {
						state_region = s:STATE_KUCHICHAY
						turmoil > 0.33
						culture_percent_state = {
							target = cu:beornian
							value > 0.33
						}
					}
				}
				change_variable = {
					name = new_mercia_var
					add = 1
				}
			}

			if = {
				limit = {
					any_scope_state = {
						state_region = s:STATE_NEAR_COLLASUYU
						turmoil > 0.33
						culture_percent_state = {
							target = cu:beornian
							value > 0.33
						}
					}
				}
				change_variable = {
					name = new_mercia_var
					add = 1
				}
			}

			if = {
				limit = {
					any_scope_state = {
						state_region = s:STATE_COLLASUYU
						turmoil > 0.33
						culture_percent_state = {
							target = cu:beornian
							value > 0.33
						}
					}
				}
				change_variable = {
					name = new_mercia_var
					add = 1
				}
			}

			if = {
				limit = {
					any_scope_state = {
						state_region = s:STATE_LANDS_END
						turmoil > 0.33
						culture_percent_state = {
							target = cu:beornian
							value > 0.33
						}
					}
				}
				change_variable = {
					name = new_mercia_var
					add = 1
				}
			}

			if = {
				limit = {
					any_scope_state = {
						state_region = s:STATE_CATAMARCA
						turmoil > 0.33
						culture_percent_state = {
							target = cu:beornian
							value > 0.33
						}
					}
				}
				change_variable = {
					name = new_mercia_var
					add = 1
				}
			}
			
			if = {
				limit = {
					any_scope_state = {
						state_region = s:STATE_ATACAMA
						turmoil > 0.33
						culture_percent_state = {
							target = cu:beornian
							value > 0.33
						}
					}
				}
				change_variable = {
					name = new_mercia_var
					add = 1
				}
			}

			if = {
				limit = {
					any_scope_state = {
						state_region = s:STATE_TILCARA
						turmoil > 0.33
						culture_percent_state = {
							target = cu:beornian
							value > 0.33
						}
					}
				}
				change_variable = {
					name = new_mercia_var
					add = 1
				}
			}

			if = {
				limit = { has_journal_entry = je_new_mercia_independent }
				
				every_scope_state = {
					limit = {
						owner = ROOT
						NOT = {
							any_scope_pop = {
								culture = cu:beornian
							}
						}
					}
					random_scope_pop = {
						limit = { culture = cu:aimara }
						change_pop_culture = { target = cu:beornian value = 0.1 }
					}
				}
			}
			if = {
				limit = { exists = c:TWT }
				
				every_scope_state = {
					limit = {
						owner = ROOT
						state_population > 90000
					}
					random_scope_pop = {
						limit = { culture = cu:aimara
						pop_type = peasants 
						}
						move_pop = s:STATE_CUZCO.region_state:TWT
					}
					
				}
			}
			if = {
				limit = { exists = c:TWT }
				
				every_scope_state = {
					limit = {
						owner = ROOT
						state_population > 90000
					}
					random_scope_pop = {
						limit = { culture = cu:quechua }
						move_pop = s:STATE_CUZCO.region_state:TWT
					}
					
				}
			}
			if = {
				limit = { has_journal_entry = je_new_mercia_independent }
				
				every_scope_state = {
					limit = {
						owner = c:TWT
					}
					random_scope_pop = {
						limit = { culture = cu:aimara }
						change_pop_culture = { target = cu:quechua value = 0.25 }
					}
					
				}
				
			}
			
			
			
			
		}
	}
	
	invalid = {
		OR = {
		has_journal_entry = je_beo_parishers
		exists = c:NME
		any_scope_state = {
			count = 0
			is_coastal = yes
			is_isolated_from_market = no
			state_region = {
				is_homeland = cu:aimara
				is_homeland = cu:beornian
			}
		}

		}
	}
	
	
	
	

	weight = 10000
	should_be_pinned_by_default = yes
}

je_ameriga_conquer = {
	icon = "gfx/interface/icons/invention_icons/wargaming.dds"

	group = je_group_foreign_affairs

	is_shown_when_inactive = {	
		
	}

    possible = {

	}

	complete = {
		is_diplomatic_play_committed_participant = no
		any_scope_state = {
		
		count >= 8
				
			AND = {	
				region = sr:region_brazil
				
				is_isolated_from_market = no

				
				owner = ROOT

				is_incorporated = yes
			}
			}
		any_scope_state = {
		
		count >= 6
				
			AND = {	
				region = sr:region_la_plata
				
				
				owner = ROOT

				is_incorporated = yes

				is_isolated_from_market = no

			}
			}
		any_scope_state = {
		
			count >= 5
				
			AND = {	
				region = sr:region_gran_colombia
				
				
				owner = ROOT

				is_incorporated = yes

				is_isolated_from_market = no

			}
			}
		any_scope_state = {
		
			count >= 7
				
			AND = {	
				region = sr:region_andes
				
				
				owner = ROOT


				is_incorporated = yes

				is_isolated_from_market = no
	
			}
			}
		
			}
    on_complete = {
		trigger_event = { id = dvg_hbe.6 popup = yes }
		
    }
	fail = {
		
		
		
		OR = {
			
			custom_tooltip = {
				text = lost_war_tt
				OR = {
					has_variable = recently_lost_war
					AND = {
						has_variable = recently_had_war
						NOT = {
							has_variable = recently_won_war
						}
					}
				}
			}

		}
			
		}
	on_fail = {
	
		
		
		trigger_event = {
			id = dvg_hbe.7
		}
	}
	should_be_pinned_by_default = yes

}

je_world_conquer = {
	icon = "gfx/interface/icons/invention_icons/civilizing_mission.dds"

	group = je_group_foreign_affairs

	is_shown_when_inactive = {	
		
	}

    possible = {
	}

	complete = {
		
		total_population_including_subjects_share >= 0.33
		
		gdp > {
			value = global_gdp
			multiply = 0.25
		}
		global_country_ranking = 1
		
		
		
	}
    on_complete = {
		trigger_event = { id = dvg_hbe.2 popup = yes }
		
    }
	fail = {
		
		
		
		AND = {
			NOT = { 
			        has_law = law_type:law_autocracy
			}
			
			NOT = { 
			        has_law = law_type:law_monarchy
			}
			
			}
		}
	on_fail = {
	
		
		
		trigger_event = {
			id = dvg_hbe.7
		}
	}
	should_be_pinned_by_default = yes

}

je_anglo_summit = {
	icon = "gfx/interface/icons/invention_icons/pan_nationalism.dds"

	group = je_group_foreign_affairs


	possible = {
		
	}

	immediate = {
		set_variable = {
			name = anglo_var
			value = 3
		}
	}

	

	complete = {
		# If-else clause to avoid errors because of missing variable before JE activates
		OR = {
		c:ENG = {
						relations:root >= relations_threshold:amicable
					}
		trigger_if = {
			limit = { exists = var:anglo_var }
			scope:journal_entry = { is_goal_complete = yes }
		}
		
		
		}
	}
	
	on_complete = {

		trigger_event = {
			id = dvg_england.11
		}
	}
	
	fail = {
		OR = {
			c:ENG = {
						relations:root <= relations_threshold:poor
					}
			has_global_variable = anglo_summit_fail
			
			NOT = { 
			        has_law = law_type:law_monarchy
			}
			
			
		}
	}
	
	on_fail = {
	
		trigger_event = {
			
			id = dvg_england.10

		}
	
		
		}
	
	

	

	current_value = {
		value = root.var:anglo_var
	}

	goal_add_value = {
		value = 7
	}

	progressbar = yes
	
	on_weekly_pulse = {
		effect = {
			
			
			
			
		}
	}
	
	timeout = 180
	
	on_timeout = {
		trigger_event = {
			id = dvg_england.10
		}
		}
	

	weight = 10000
	should_be_pinned_by_default = yes
}

je_cattle_barons_wrath = {
	icon = "gfx/interface/icons/invention_icons/medical_degree.dds"

	group = je_group_historical_content	

	possible = {
		
	}

	immediate = {
		set_variable = {
			name = cattle_barons_var
			value = 0
		}
		ig:ig_landowners = {
			add_ideology = ideology_reactionary
		}
	}

	on_monthly_pulse = {
		
		effect = {
			if = {
				limit = {
					any_civil_war = {
						civil_war_progress > 0.5
					}
					NOT = { has_variable = je_edward_civilwar_point }
				}
				change_variable = { name = cattle_barons_var add = 1 }
				set_variable = { name = je_edward_civilwar_point years = 3 }
			}
			if = {
				limit = {
					var:cattle_barons_var < 7
				}
				change_variable = {
					name = cattle_barons_var
					add = 1
				}
			}
			
			if = {
				limit = {
					OR = {
						in_default = yes
						has_modifier = declared_bankruptcy
					}
					NOT = { has_variable = je_edward_default_point }
					var:cattle_barons_var < 7

				}
				change_variable = { name = cattle_barons_var add = 1 }
				set_variable = { name = je_edward_default_point }
			}
			if = {
				limit = {
					country_rank > rank_value:major_power
					NOT = { has_variable = je_edward_gp_point }
					var:cattle_barons_var > 0

				}
				change_variable = { name = cattle_barons_var subtract = 1 }
				set_variable = { name = je_edward_gp_point }
			}
			if = {
				limit = {
					NOT = { has_variable = avalon_polluted }
					var:cattle_barons_var < 7
					any_scope_state = { 
						is_capital = yes
						state_region = {
						pollution_amount > 100
						}
						
					}
				}
				set_variable = { name = avalon_polluted }
				change_variable = { name = cattle_barons_var add = 1 }
				
			}
			
			if = {
				limit = {
					root.average_sol > 10
					var:cattle_barons_var > 0
				}
				change_variable = {
					name = cattle_barons_var
					add = -1
				}
			}
			
		}
	}
	on_yearly_pulse = {
		effect = {
			if = {
				limit = {
					NOT = {
						any_scope_character = {
							has_variable = is_charles_cavendish
						}
					}
				}
				create_character = {
				ig_leader = yes
				historical = yes
				first_name = Victor
				last_name = Cavendish
				birth_date = 1816.05.12
				ideology = ideology_ethno_nationalist
				interest_group = ig_landowners
				traits = {
					bigoted

					inept
					
					inexperienced

					plains_commander
				}
			}
			}
			if = {
				limit = {
					ig:ig_landowners = {
						is_powerful = no
						is_in_government = yes
					}
					var:cattle_barons_var > 0
				}
				change_variable = {
					name = cattle_barons_var
					add = -1
				}
			}
			if = {
				limit = {
					ig:ig_landowners = {
						is_powerful = no
						is_in_government = yes
					}
					var:cattle_barons_var > 0
				}
				change_variable = {
					name = cattle_barons_var
					add = -1
				}
			}
			if = {
				limit = {
					ig:ig_landowners = {
						is_powerful = no
						is_in_government =  no
					}
					var:cattle_barons_var > 1
				}
				change_variable = {
					name = cattle_barons_var
					add = -2
				}
			}
			if = {
				limit = {
					ig:ig_landowners = {
						is_powerful = yes
						ig_approval < -9
					}
					var:cattle_barons_var < 7
				}
				change_variable = {
					name = cattle_barons_var
					add = 1
				}
			}
			if = {
				limit = {
					ig:ig_landowners = {
						is_powerful = yes
						ig_approval < -4
					}
					var:cattle_barons_var < 7
				}
				change_variable = {
					name = cattle_barons_var
					add = 1
				}
			}
			if = {
			limit = {
				has_law = law_type:law_autocracy
				NOT = { has_variable = beo_autocracy }
				var:cattle_barons_var < 7
				ig:ig_landowners = {
						is_powerful = yes
						ig_approval < 0
				}
			}
			change_variable = {
				name = cattle_barons_var
				add = 1
			}
			set_variable = beo_autocracy
		}
		}
	}

	

	complete = {
		# If-else clause to avoid errors because of missing variable before JE activates
		ig:ig_landowners = {
			ig_approval < -9
		}

		custom_tooltip = {
			text = je_edward_special_tooltip_advance
			trigger_if = {
				limit = { exists = var:cattle_barons_var }
				OR = {
				scope:journal_entry = { is_goal_complete = yes }
				}
			}
		}
	}
	
	on_complete = {
		#set_variable = beornia_complete
		trigger_event = {
			id = dvg_beornia.9
		}
		set_global_variable = carolean_victory

	}
	
	fail = {
		OR = {
			ig:ig_landowners = {
					is_marginal = yes
			}
			AND = {
				has_law = law_type:law_secret_police
				ig:ig_landowners = {
					is_in_government = no
				}
				ig:ig_industrialists = {
					is_in_government = yes
				}
			}
			AND = {
				
				ig:ig_landowners = {
					is_powerful = no
				}
				ig:ig_industrialists = {
					is_powerful = yes
				}
			}
			AND = {
				custom_tooltip = {
					text = je_edward_special_tooltip_deplete
					var:cattle_barons_var < 6
					year > 1850
				}
				custom_tooltip = {
					text = edward_dead
					OR = {
						
						ruler = {
						NOT = {
							has_variable = is_edward
						}
						}
					}

				}
			}
		}
	}
	
	on_fail = {
		#set_variable = beornia_complete
		trigger_event = {
			id = dvg_beornia.10
		}
		ig:ig_landowners = {
			remove_ideology = ideology_reactionary
		}
	}
	invalid = {
		any_country = {
			is_revolutionary = yes
			country_definition = root.country_definition
			ig:ig_landowners = {
				is_in_government = yes
			}				
		}
	}
	on_invalid = {
		#set_variable = beornia_complete
		trigger_event = {
			id = dvg_beornia.20
		}
		ig:ig_landowners = {
			remove_ideology = ideology_reactionary
		}
	}
	

	

	current_value = {
		value = root.var:cattle_barons_var
	}

	goal_add_value = {
		value = 7
	}

	progressbar = yes
	
	on_weekly_pulse = {
		effect = {
			if = {
				limit = {
					NOT = { has_variable = cattle_barons_var_subject }
					is_subject = yes
					var:cattle_barons_var < 7
				}
				change_variable = {
					name = cattle_barons_var
					add = 1
				}
				set_variable = cattle_barons_var_subject
			}
			if = {
				limit = {
					NOT = { has_variable = cattle_barons_var_loans }
					taking_loans = yes
					var:cattle_barons_var < 7
				}
				change_variable = {
					name = cattle_barons_var
					add = 1
				}
				set_variable = cattle_barons_var_loans
			}
			if = {
				limit = {
					has_law = law_type:law_religious_schools
					NOT = { has_variable = beo_religious_schools }
					var:cattle_barons_var > 0
				}
				change_variable = {
					name = cattle_barons_var
					subtract = 1
				}
				set_variable = beo_religious_schools
			}
			if = {
				limit = {
					has_law = law_type:law_racial_segregation
					NOT = { has_variable = beo_racial_segregation }
					var:cattle_barons_var < 7
				}
				change_variable = {
					name = cattle_barons_var
					add = 1
				}
				set_variable = beo_racial_segregation

			}
		
		if = {
			limit = {
				has_law = law_type:law_cultural_exclusion
				NOT = { has_variable = beo_multicultural }
				var:cattle_barons_var < 7
			}
			change_variable = {
				name = cattle_barons_var
				add = 2
			}
			set_variable = beo_multicultural
		}
		if = {
			limit = {
				has_law = law_type:law_multicultural
				NOT = { has_variable = beo_multicultural }
				var:cattle_barons_var < 7
			}
			change_variable = {
				name = cattle_barons_var
				add = 2
			}
			set_variable = beo_multicultural
		}
		if = {
			limit = {
				has_law = law_type:law_no_migration_controls
				NOT = { has_variable = beo_open_borders }
				var:cattle_barons_var < 7

			}
			change_variable = {
				name = cattle_barons_var
				add = 1
			}
			set_variable = beo_open_borders
		}
		
		if = {
			limit = {
				NOT = {has_law = law_type:law_landed_voting}
				NOT = {has_law = law_type:law_oligarchy}
				NOT = { has_variable = beo_democracy }
				var:cattle_barons_var < 7
			}
			change_variable = {
				name = cattle_barons_var
				add = 1 
			}
			set_variable = beo_democracy
		}
		
		if = {
			limit = {
				has_law = law_type:law_serfdom
				NOT = { has_variable = beo_serfdom }
				var:cattle_barons_var > 0
			}
			change_variable = {
				name = cattle_barons_var
				subtract = 2
			}
			set_variable = beo_serfdom
		}
		if = {
			limit = {
				OR = {
				has_law = law_type:law_oligarchy
				has_law = law_type:law_landed_voting
				}
				NOT = { has_variable = beo_oligarchy }
				var:cattle_barons_var > 0

			}
			change_variable = {
				name = cattle_barons_var
				subtract = 2
			}
			set_variable = beo_oligarchy
		}
		if = {
			limit = {
				has_law = law_type:law_ethnostate
				NOT = { has_variable = beo_national_supremacy }
				var:cattle_barons_var > 0
			}
			change_variable = {
				name = cattle_barons_var
				subtract = 2
			}
			set_variable = beo_national_supremacy
		}
		if = {
			limit = {
				NOT = { has_law = law_type:law_no_health_system}
				NOT = { has_variable = beo_national_supremacy }
				var:cattle_barons_var > 0
			}
			change_variable = {
				name = cattle_barons_var
				subtract = 2
			}
			#set_variable = beo_hospitals
		}
		if = {
			limit = {
				NOT = { has_variable = beo_war_loser }
				OR = {
					has_variable = recently_lost_war
					AND = {
						has_variable = recently_had_war
						NOT = {
							has_variable = recently_won_war
						}
					}
				} 
			}
			change_variable = {
				name = cattle_barons_var
				add = 1
			}
			set_variable = beo_war_loser
		}
		
		}
			
			
	}
	
	
	timeout = 8000
	
	on_timeout = {
		trigger_event = {
			
			id = dvg_beornia.12

		}

		ig:ig_landowners = {
			remove_ideology = ideology_reactionary
		}
	}
	

	weight = 10000
	should_be_pinned_by_default = yes
}

je_england_conquer = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_foreign_affairs

	is_shown_when_inactive = {
	
		country_has_primary_culture = cu:beornian
		has_law = law_type:law_monarchy
	}

    possible = {
			
			has_law = law_type:law_monarchy

			OR = {
				has_state_in_state_region = STATE_YORKSHIRE
				has_variable = hbe_claim_britain
			}
			
	}

	complete = {
	
	 owns_entire_state_region = STATE_HOME_COUNTIES
	 owns_entire_state_region = STATE_YORKSHIRE
	 owns_entire_state_region = STATE_LANCASHIRE
	 owns_entire_state_region = STATE_MIDLANDS
	 owns_entire_state_region = STATE_EAST_ANGLIA
	 owns_entire_state_region = STATE_WEST_COUNTRY 
		
	}
    on_complete = {
		if = {
			limit = {
				NAND = {
					exists = c:HBE
					c:HBE = ROOT
				}
			}
			change_tag = ENG
			trigger_event = { id = dvg_england.14 popup = yes
		} 
		}
		
		
    }
	fail = {
		
		
		
	
		}
	on_fail = {	
		
	}
	should_be_pinned_by_default = yes
}


je_beornian_awakening = {
	icon = "gfx/interface/icons/religion_icons/protestant.dds"

	group = je_group_great_awakening

	is_shown_when_inactive = {
		exists = c:BEO
		c:BEO = ROOT
		has_law = law_type:law_monarchy
		any_scope_character = {
			has_variable = is_richard
		}
	}

	possible = {
		custom_tooltip = {
			text = edward_won_tt
			ruler = {
				has_variable = is_richard
			}
			has_law = law_type:law_monarchy
			
		}
	
	}

	immediate = {
		
		trigger_event = {
			id = dvg_hbe.9
		}
		ig:ig_devout = {
			save_scope_as = devout_scope
		}

		ig:ig_rural_folk = {
			save_scope_as = rural_folk_scope
		}
	}

	on_yearly_pulse = {
		random_events = {
			100 = dvg_hbe.15
			20 = dvg_hbe.49
		}
	}

	

	scripted_button = beo_hbe_button


	complete = {
		custom_tooltip = {
			text = beornian_awakening_tt
			has_variable = beornian_awakening
		}
		NOT = {
			has_journal_entry = je_beo_parishers
			has_journal_entry = je_beo_presbyterians
			has_journal_entry = je_beo_hbe
		}
	}

	on_complete = {
		trigger_event = {
			id = dvg_hbe.22
		}
	}
	fail = {
		OR = {
			NOT = {
			has_law = law_type:law_monarchy
			}
			any_civil_war = {
				is_civil_war_type = revolution
				civil_war_progress >= 0.75
			}
			AND = {
				capital = {
					turmoil > 0.50
				}
			}
		}
		
	}
	on_fail = {
		trigger_event = {
			id = dvg_hbe.27
		}
		if = {
			limit = {
				ruler = {
					has_trait = immortal
				}
			}
			ruler = {
				remove_trait = immortal
			}
		}
		if = {
			limit = {
				AND = {
					country_has_primary_culture = cu:beornian
					country_has_primary_culture = cu:british
				}

			}
			remove_primary_culture = cu:british
		}
	}
	invalid = {
		NOT = {
			exists = c:BEO
		}
		OR = {
			has_variable = presbyterian_victory
			has_variable = parisher_victory
		}
	}
	on_invalid = {
		
	}

	should_be_pinned_by_default = yes

	
}

je_england_reclaim = {
    icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_foreign_affairs

    #scripted_button = beo_england_seperatist_button
	#scripted_button = beo_england_bribery_button
	#scripted_button = beo_england_harold_sponsorship
	#scripted_button = beo_cancel_agitation_button

    is_shown_when_inactive = {
        c:BEO ?= this
        NOT = {
            sr:region_england = {
                any_scope_state = {
                    count = all
                    owner = root
                }
            }
        }
    }

    possible = {
        has_technology_researched = nationalism
    }

    complete = {
        sr:region_england = {
            any_scope_state = {
                count = all
                owner = root
            }
        }
    }

    on_complete = {
        trigger_event = { id = dvg_england.14 days = 0 popup = yes }
    }

    should_be_pinned_by_default = yes
}




je_beo_parishers = {
	icon = "gfx/interface/icons/religion_icons/protestant.dds"

	group = je_group_great_awakening

	is_shown_when_inactive = {
	
		
	}
	immediate = {
		if = {
			limit = {
				NOT = {
					has_variable = beornian_awakening
				}
			}
			set_variable = beornian_awakening
		}
		
	}

    possible = {
			
	}
	scripted_button = kill_john_faith_button
	on_yearly_pulse = {
		random_events = {
			100 = 0
			50 = dvg_hbe.12
		}
	}

	on_monthly_pulse = {

		random_events = {
			100 = 0
			20 = dvg_hbe.13
			10 = dvg_hbe.16
			15 = dvg_hbe.24

		}
		
		effect = {

			if = {
				limit = {
					NOT = {
						any_scope_state = {
						state_region = s:STATE_AVALON
						is_capital = yes
						}
						has_variable = capital_moved
					}
								
				}
				set_variable = capital_moved

				change_variable = {
					name = parisher_var
					subtract = 25
				}
			}

			if = {
				limit = {
					
					any_scope_state = {
						state_region = s:STATE_AVALON
						is_capital = yes
					}
					has_variable = capital_moved			
				}
				remove_variable = capital_moved

				change_variable = {
					name = parisher_var
					add = 25
				}
			}
			
			if = {
				limit = {
					ig:ig_rural_folk = {
						ig_approval < 0
					}
					var:parisher_var < 100
				}
				change_variable = {
					name = parisher_var
					add = 1
				}
			}

			if = {
				limit = {
					ig:ig_armed_forces = {
						ig_approval <-5
					}
					var:parisher_var < 100
				}
				change_variable = {
					name = parisher_var
					add = 1
				}
			}

			if = {
				limit = {
					ig:ig_devout = {
						ig_approval <-5
					}
					var:parisher_var < 100
				}
				change_variable = {
					name = parisher_var
					add = 1
				}
			}

			
		}
	}

	complete = {

		
		AND = {
			ig:ig_rural_folk = {
						ig_approval < 0
			}

			ig:ig_devout = {
						ig_approval < -5
			}
			ig:ig_armed_forces = {
						ig_approval < -5
			}
		}
		
		scope:journal_entry = {is_goal_complete = yes}
		
	}
    on_complete = {
		trigger_event = {
			id = dvg_hbe.25
		}
		
    }
	fail = {	
		OR = {
			AND = {
				var:parisher_var < 1 
				custom_tooltip = {
				text = je_beo_hbe_goal
				var:new_hbe_var > 9
				exists = c:HBE
				c:HBE = ROOT
				}	
			}
			
		}
	}

	on_fail = {
		
	}
	current_value = {
		value = root.var:parisher_var
	}

	goal_add_value = {
		value = 100
	}

	invalid = {
		exists = c:HBE
		c:HBE = ROOT
	}

	timeout = 7125


	progressbar = yes

	should_be_pinned_by_default = yes

	transferable = yes

}

je_beo_presbyterians = {
	icon = "gfx/interface/icons/religion_icons/protestant.dds"

	group = je_group_great_awakening

	is_shown_when_inactive = {
	
	
	}
	scripted_button = kill_robin_hood_button

	immediate = {
		if = {
			limit = {
				NOT = {
					has_variable = beornian_awakening
				}
			}
			set_variable = beornian_awakening
		}
		create_character = {
			ideology = ideology_republican_leader
			interest_group = ig:ig_petty_bourgeoisie
			ig_leader = yes
		}
	}

    possible = {
			
	}
	on_yearly_pulse = {
		
	}
	on_monthly_pulse = {

		random_events = {
			100 = 0
			15 = dvg_hbe.26
			10 = dvg_hbe.14
			10 = dvg_hbe.46
		}
		effect = {
			if = {
				limit = {
					ig:ig_intelligentsia = {
						ig_approval < 0
					}
					var:presbyterian_var < 100

				}
				change_variable = {
					name = presbyterian_var
					add = 1
				}
			}

			if = {
				limit = {
					ig:ig_devout = {
						ig_approval < -5
					}
					var:presbyterian_var < 100
				}
				change_variable = {
					name = presbyterian_var
					add = 1
				}
			}

			if = {
				limit = {
					ig:ig_devout = {
						ig_approval > 5

					}
					var:presbyterian_var > 0
				}
				change_variable = {
					name = presbyterian_var
					subtract = 1
				}
			}

			if = {
				limit = {
					ig:ig_petty_bourgeoisie = {
						ig_approval < -5
					}
					var:presbyterian_var < 100
				}
				change_variable = {
					name = presbyterian_var
					add = 1
				}
			}
			
		}
	}

	complete = {

		OR = {
			NOT = {
			has_law = law_type:law_monarchy
			}
			AND = {
			ig:ig_petty_bourgeoisie = {
						ig_approval < 0
			}

			ig:ig_devout = {
						ig_approval < -5
			}
			ig:ig_intelligentsia = {
						ig_approval < -5
			}
			}
		
			scope:journal_entry = {is_goal_complete = yes}
		}
		
		
		
	}

    on_complete = {
		trigger_event = {
			id = dvg_hbe.27
		}
		
    }
	fail = {	
		OR = {
			AND = {
			var:presbyterian_var < 1 
			custom_tooltip = {
				text = je_beo_hbe_goal
				exists = c:HBE
				c:HBE = ROOT
				var:new_hbe_var > 9
			}
			}
			
		}
	}
	on_fail = {
		
	}
	invalid = {
		exists = c:HBE
		c:HBE = ROOT
	}



	goal_add_value = {
		value = 100
	}

	current_value = {
		value = root.var:presbyterian_var
	}

	progressbar = yes

	timeout = 7125

	transferable = yes


	should_be_pinned_by_default = yes
}


je_beo_hbe = {
	icon = "gfx/interface/icons/religion_icons/protestant.dds"

	group = je_group_great_awakening

	is_shown_when_inactive = {
	
	
	}

    possible = {
			
	}

	
	immediate = {
		set_variable = {
			name = new_hbe_var
			value = 0
		}

		if = {
			limit = {
				NOT = {
					has_variable = beornian_awakening
				}
			}
			set_variable = beornian_awakening
		}
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					var:new_hbe_var > 5
					NOT = {
						has_modifier = anti_britannians
					}
				}
				trigger_event = {
					id = dvg_hbe.34
				}
			}
		}
	}

	on_yearly_pulse = {
		effect = {
			if = {
				limit = {
					var:parisher_var < 1
					var:presbyterian_var < 1
				}
				change_variable = {
					name = new_hbe_var
					add = 1
				}
			}
			if = {
				limit = {
					var:parisher_var > 99
					var:presbyterian_var > 99
				}
				change_variable = {
					name = new_hbe_var
					subtract = 1
				}
			}
		}
	}
	scripted_button = pendragon_fortress_button
	scripted_button = army_git_good_button
	scripted_button = ragnarok_connection_button


	complete = {
		any_scope_state = {
			has_modifier = pendragon_modifier

		}

		custom_tooltip = {
			text = je_beo_hbe_goal
			var:parisher_var < 1
			var:presbyterian_var < 1
			scope:journal_entry = { is_goal_complete = yes }
		}

		custom_tooltip = {
			text = not_lost_war_tt
			NOR = {
				has_variable = recently_lost_war
				AND = {
					has_variable = recently_had_war
					NOT = {
						has_variable = recently_won_war
					}
				}
			}
		}

	}
    on_complete = {
		trigger_event = {
			id = dvg_hbe.18
		}
		remove_modifier = making_communion
    }

	fail = {
		
		OR = {
			NOT = {
				has_law = law_type:law_monarchy
			}
			has_law = law_type:law_state_atheism
			has_law = law_type:law_total_separation
		}
	
	}
	on_fail = {
		trigger_event = {
			id = dvg_hbe.36
		}
		remove_modifier = making_communion
	}
	
	progressbar = yes
	should_be_pinned_by_default = yes

	current_value = {
        value = root.var:new_hbe_var
    }

    goal_add_value = {
        value = 10

    }
	timeout = 1200

	on_timeout = {
		trigger_event = {
			id = dvg_hbe.36
		}
		remove_modifier = making_communion
	}
}

je_beornia_development = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_internal_affairs

	complete = {
		in_default = no
		any_scope_state = {
			filter = {
				is_incorporated = yes
				state_region = {
					is_homeland = cu:beornian
				}
			}
			any_scope_building = {
				is_building_type = building_urban_center
				level > 3
			}
			has_building = building_railway
			has_building = building_government_administration
			percent > 0.8
		}
	}

	on_complete = {

		every_scope_state = {
			limit = {
				any_scope_building = {
				is_building_type = building_urban_center
				level > 3
				}
			}
			add_modifier = {
				name = sa_migration_attraction
				months = 65
			}
			
		}
		ruler = {
			add_modifier = promisekeeper
		}
		set_variable = rural_developed
	}

	on_yearly_pulse = {
		
	}

	transferable = no
	should_be_pinned_by_default = yes

	weight = 5000
}


je_king_edward = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_internal_affairs

	complete = {
		any_scope_state = {
			any_scope_building = {
				is_building_type = building_urban_center
				level >= 7
			}
			is_incorporated = yes
			state_region = {
				is_homeland = cu:beornian
				
			}
		}

		year > 1842

		OR = {
			gdp_per_capita_ranking < 25
			country_rank >= rank_value:major_power
		}
	}

	on_complete = {

		trigger_event = {
			id = dvg_beornia.27
		}
		ruler = {
			add_modifier = promisekeeper
		}
		if = {
			limit = {
				NOT = {
					has_global_variable = edwardian_victory
				}
			}
			set_global_variable = edwardian_victory
		}
	}

	on_yearly_pulse = {
		
	}

	fail = {
		has_law = law_type:law_industry_banned
	}

	transferable = no
	should_be_pinned_by_default = yes

	weight = 5000
}

je_beornia_conquer = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_historical_content

	complete = {
		custom_tooltip = {
		text = beo_existence_tt
	 
	 	NOT = { exists = c:BEO }
	 
	 	
		}
	}

    on_complete = {
		trigger_event = { id = dvg_hbe.3 popup = yes  }	
    }	

	invalid = {
		
	}

	weight = 100
	should_be_pinned_by_default = yes
}

je_destroy_beornia = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_great_awakening

	complete = {
		custom_tooltip = {
		text = beo_existence_tt
	 
	 	NOT = { exists = c:BEO }
	 
	 	
		}
		any_scope_state = {
			state_region = s:STATE_AVALON
		}
	}

    on_complete = {
		trigger_event = { id = dvg_hbe.39 popup = yes  }	
    }	

	invalid = {
		
	}

	weight = 100
	should_be_pinned_by_default = yes
}

je_destroy_hbe = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_great_awakening


	complete = {
		custom_tooltip = {
		text = beo_existence_tt
	 
	 	NOT = { exists = c:HBE }
	 
	 	
		}
	}

    on_complete = {
		trigger_event = { id = dvg_hbe.37 popup = yes  }	
    }	

	invalid = {
		
	}

	weight = 100
	should_be_pinned_by_default = yes
}

je_black_knights = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_internal_affairs

	is_shown_when_inactive = {
		exists = c:HBE
		c:HBE = ROOT
	}

	possible = {
		has_technology_researched = political_agitation
		OR = {
			radical_fraction = {
					value > 0.35
			}
			any_subject_or_below = {
					percent > 0.50
					OR = {
						radical_fraction = {
						value > 0.50
						}
						liberty_desire > 75
					}
					
			}
		}
	}
	immediate = {
		trigger_event = {
			id = dvg_hbe.50
		}
	}

	on_monthly_pulse = {
		effect = {
			
		}
	}

	scripted_button = relocate_capital_hbe_button

	complete = {
		
		scope:journal_entry = {
			
		}
	}

    on_complete = {
		trigger_event = { id = dvg_hbe.7 popup = yes  }	
    }	

	timeout = 2000

	invalid = {
		
	}

	#scripted_progress_bar = black_knights_progress_bar

	weight = 100
	should_be_pinned_by_default = yes
}


je_opium_wars_beornia = {
	icon = "gfx/interface/icons/invention_icons/baking_powder.dds"

	group = je_group_internal_affairs

	is_shown_when_inactive = {
		exists = c:BEO
		c:BEO = ROOT
	}
	possible = {
		has_technology_researched = pharmaceuticals
		has_technology_researched = baking_powder
		custom_tooltip = {
			text = monarch_dead_tt
			NAND = {
				ruler = {
				has_variable = is_charles_cavendish
				}
				ruler = {
				has_variable = is_richard
				}
				ruler = {
				has_variable = is_edward
				}
			}
			
		}

		OR = {
			any_neighbouring_state = {
				has_building = building_opium_plantation
			}
			any_scope_state = {
			has_building = building_opium_plantation
			}
			any_country = {
				has_interest_marker_in_region = sr:region_la_plata
				any_scope_state = {
					has_building = building_opium_plantation
				}
			}
		}
	}
	immediate = {
		
		trigger_event = {
			id = dvg_beornia.30 
		}
		
	}

	complete = {
		
		NOT = {
			any_primary_culture = {
						has_cultural_obsession = opium
			}
			any_scope_state = {
				turmoil > 0.15
			}
			has_law = law_type:law_no_health_system
			has_law = law_type:law_no_police
		}
	}

	on_complete = {
		trigger_event = {
			id = opium_wars.5
			days = 5
		}
	}

	fail = {
		NOT = {
					
		}
		OR = {
			has_law = law_type:law_laissez_faire
		}
		NOT = {
			has_modifier = opium_ban_authority
		}
	}

	

	on_fail = {
		custom_tooltip = {
			text = opium_wars_fail_invalid_tt
			remove_variable = opium_wars_aggressor
		}
	}

	on_timeout = {
		custom_tooltip = {
			text = opium_wars_fail_invalid_tt
			remove_variable = opium_wars_aggressor
		}
	}

	weight = 10000
	should_be_pinned_by_default = yes

	timeout = 3650
}
