
dvg_embrace_melanesians = {
	is_shown = {
	
		country_has_primary_culture =cu:moluccan
		
		NOT = { country_has_primary_culture = cu:melanesian}
		
	}

    possible = {
	has_law = law_type:law_cultural_exclusion

	OR = {
		owns_entire_state_region = STATE_WESTERN_NEW_GUINEA
		has_technology_researched = pan-nationalism
		}
	
	}

    when_taken = {
		
		add_primary_culture = cu:melanesian

	}
	ai_chance = {
		base = 100
	}
}

dvg_claim_polynesia = {
	is_shown = {
	
		NOT = { is_country_type = decentralized }

		any_primary_culture = {
			has_discrimination_trait = polynesian_group
		}
	}

    possible = {
		has_technology_researched = nationalism
		has_technology_researched = colonization
		NOT = { has_law = law_type:law_no_colonial_affairs }
		navy_size >= 2
	}

    when_taken = {
		s:STATE_FIJI = {
			add_claim = ROOT
		}
		
    }

	ai_chance = {
		base = 100
	}
}
dvg_annex_polynesia = {
	is_shown = {
	
		NOT = { is_country_type = decentralized }

		country_has_primary_culture = cu:polynesian
		
		
	}

    possible = {

		OR = {
			is_player = yes
			year >= 1900
			has_technology_researched = pan-nationalism
		}
		isolated_states = 0
		has_technology_researched = nationalism
		has_technology_researched = colonization
		NOT = { has_law = law_type:law_no_colonial_affairs }
		navy_size >= 2
	
	}

    when_taken = {
		every_country = {
			if = {
				limit = {
					is_ai = yes			
					country_has_primary_culture = cu:polynesian
				}			
				root = { annex = prev }
			}
		}
		create_incident = {
			country = ROOT
			value = 4
		}
		if = {
			limit = {
				exists = c:HAW
			}
			set_secret_goal = {
				country = c:HAW
				secret_goal = conquer
			}
		}
		
		
		
    }

	ai_chance = {
		base = 100
	}
}
dvg_annex_oceania = {
	is_shown = {
	
		NOT = { is_country_type = decentralized }

		has_technology_researched = pan-nationalism

		any_primary_culture = {
			has_discrimination_trait = polynesian_group
		}
		
		
	}

    possible = {
		OR = {
			is_player = yes
			year >= 1900
		}
		isolated_states = 0
		has_technology_researched = pan-nationalism
		has_technology_researched = colonization
		navy_size >= 5
		NOT = { has_law = law_type:law_no_colonial_affairs }
		OR = {
			is_player = yes
			year >= 1900
		}
	
	}

    when_taken = {
		every_country = {
			if = {
				limit = {
					is_ai = yes			
					is_country_type = decentralized
					total_population < 1000000
					OR = {
					country_has_primary_culture = cu:polynesian
					country_has_primary_culture = cu:melanesian
					country_has_primary_culture = cu:micronesian
					}
				}			
				root = { annex = prev }
			}
		}
		
		create_incident = {
			country = ROOT
			value = 12
		}
		if = {
			limit = {
				exists = c:AOT
			}
			set_secret_goal = {
				country = c:AOT
				secret_goal = conquer
			}
		}
		if = {
			limit = {
				exists = c:QQQ
			}
			set_secret_goal = {
				country = c:QQQ
				secret_goal = conquer
			}
		}
		if = {
			limit = {
				exists = c:YNZ
			}
			set_secret_goal = {
				country = c:YNZ
				secret_goal = conquer
			}
		}
    }

	ai_chance = {
		base = 100
	}
}
dvg_lanfang_temple = {
	is_shown = {
	
	    exists = c:LAN

		this = c:LAN
		

		NOT = { has_global_variable = dvg_lanfang_temple_built}
	}

    possible = {

		gold_reserves > 10000

		has_technology_researched = romanticism

		has_technology_researched = nationalism

		country_has_state_religion = rel:mahayana

		NOT = {
			has_law = law_type:law_state_atheism
	    }
		NOT = {
			has_law = law_type:law_total_separation
	    }
	}

    when_taken = {
		set_global_variable = dvg_lanfang_temple_built
		
		trigger_event = { id = dvg_lanfang.3 }	
}
ai_chance = {
		base = 100
	}
}

dvg_indonesia = {
	is_shown = {
	
		OR = {
			AND = { exists = c:BEI
	
			c:BEI = ROOT 
			}
			
		}
			
	}

    possible = {
		is_subject = no


	
	}

    when_taken = {

		every_subject_or_below = {
			limit = { 
				is_subject_of = ROOT
				
			}
			save_scope_as = subject_to_annex
			ROOT = {
				annex = scope:subject_to_annex
			}
		}
		change_tag = IDN

		add_primary_culture = cu:javan

		remove_primary_culture = cu:burgundian

	}
	ai_chance = {
		base = 100
	}
}

dvg_become_nvz = {
	is_shown = {
	
		OR = {
			country_has_primary_culture = cu:burgundian
			country_has_primary_culture = cu:anglois
		}
		any_scope_state = {
			is_capital = yes
			state_region = {
				is_homeland = cu:verlander
			}
		}			

	}

    possible = {
		is_subject = no

		owns_entire_state_region = STATE_NOONGAR

		NOT = {
			owns_entire_state_region = STATE_WEST_JAVA
		}
	
	}

    when_taken = {

		every_subject_or_below = {
			limit = { 
				is_subject_of = ROOT
				country_has_primary_culture = cu:burgundian
			}
			save_scope_as = subject_to_annex
			ROOT = {
				annex = scope:subject_to_annex
			}
		}
		change_tag = NVZ
		if = {
			limit = {
				country_has_primary_culture = cu:burgundian
			}
			remove_primary_culture = cu:burgundian
		}
		if = {
			limit = {
				country_has_primary_culture = cu:anglois
			}
			remove_primary_culture = cu:anglois
		}
		if = {
			limit = {
				country_has_primary_culture = cu:dutch
			}
			remove_primary_culture = cu:dutch
		}
		if = {
			limit = {
				NOT = {
					country_has_primary_culture = cu:verlander
				}
			}
			add_primary_culture = cu:verlander
		}

	}
	ai_chance = {
		base = 100
	}
}


dvg_claim_papua = {
	is_shown = {
	exists = c:TID
	c:TID= ROOT 
	NOT = {
		has_variable = claimed_papua
	}
	}

    possible = {
		has_technology_researched = nationalism
		
	}

    when_taken = {

		s:STATE_EASTERN_NEW_GUINEA = {
			add_claim = ROOT
		}
		s:STATE_WESTERN_NEW_GUINEA = {
			add_claim = ROOT
		}
		set_variable = claimed_papua

	}
	ai_chance = {
		base = 100
	}
}

dvg_claim_malaysia = {
	is_shown = {
		exists = c:MLY
		root = c:MLY
		
		NOT = {
			has_global_variable = malaysia_claimed
		}
		
	}

    possible = {
		has_technology_researched = pan-nationalism
	}

    when_taken = {
		
		
		every_state_region = {
			limit = {
			
				is_homeland = cu:malay
				
			}
			add_claim = ROOT
		}
		create_incident = {
			country = THIS
			value = 10
		}
		set_global_variable = malaysia_claimed
		

    }

	ai_chance = {
		base = 100
	}
}

dvg_become_java = {
	is_shown = {
		
		
		exists = c:BEI
		c:BEI = ROOT

		exists = c:JAV


		is_ai = yes
	}

    possible = {
		c:BEI = {
			is_subject = no
		}
		
		
	}

    when_taken = {
		if = {
			limit = {
				exists = c:JAV
			}
			c:JAV = {
				annex = ROOT
			}
		}
		
    }

	ai_chance = {
		base = 100
	}
}


dvg_restore_borobudur = {
	is_shown = {

		owns_entire_state_region = STATE_CENTRAL_JAVA
		
		NOT = {
			has_global_variable = borobudur_restored
		}
		
	}

    possible = {
		OR = {

			scope:state_religion_scope = {
				has_discrimination_trait = buddhist
			}
			AND = {
				scope:state_religion_scope = {
					has_discrimination_trait = eastern
				}
				has_law = law_type:law_freedom_of_conscience
			}
			has_law = law_type:law_total_separation
			has_law = law_type:law_religious_autonomy
		}
	}

    when_taken = {

		random_scope_state = {
			limit = {
				state_region = s:STATE_CENTRAL_JAVA
			}
			save_scope_as = borobudur_state
		}
		
		add_modifier = {
			name = dvg_monument_restored
		}

		scope:borobudur_state = {
			create_building = {
				building = building_borobudur
			}
		}
		
		set_global_variable = borobudur_restored

		add_loyalists = {
			value = 0.35
			religion = rel:mahayana
		}
		add_loyalists = {
			value = 0.15
			religion = rel:theravada
		}
		add_loyalists = {
			value = 0.05
			religion = rel:hindu
		}
		add_radicals = {
			value = 0.15
			religion = rel:sunni
		}
	}
	ai_chance = {
		base = 100
	}
}

dvg_subject_integrate = {
	is_shown = {
		OR = {
			country_tier = empire
			country_tier = hegemony
		}
		NOT = {
			has_variable = subjects_integrated
		}
	}

    possible = {
		any_subject_or_below = {
			any_primary_culture = {
				NOT = {
					culture_is_discriminated_in = ROOT
					
				}

			}
		}
	}

    when_taken = {

		every_subject_or_below = {
			limit = {
				any_primary_culture = {
					NOT = {
						culture_is_discriminated_in = ROOT
					}
				}
			}
			save_scope_as = subject_to_annex

			c:NUS = {
				annex = prev
			}
		}
		if = {
			limit = {
				exists = c:NUS
				c:NUS = ROOT
			}
			every_scope_pop = {
				limit = {
					culture = {
						has_discrimination_trait = han_chinese
					}
				}
				change_pop_culture = {
					target = cu:tionghoa
					value = 1
				}
			}
		}
		

		set_variable = subjects_integrated
    }

	ai_chance = {
		base = 100
	}
}



