dvg_join_ameriga = {
	is_shown = {
	
	    exists = c:BLT

		this = c:BLT
		
		exists = c:AME
		
		
	}

    possible = {
		
		has_technology_researched =pan-nationalism
		
		OR = {
		
		has_law = law_type:law_cultural_exclusion
		has_law = law_type:law_multicultural
		
		}
		market = {
					owner = c:AME
				}
		
		c:AME = {
				is_at_war = no
				
				

				owner = {
					
					
					relations:root >= relations_threshold:amicable
					
					
					
					this.gdp > root.gdp
				}
				
		}
	
	}

    when_taken = {
			trigger_event = { id = dvg_ameriga.5 }
	
    }
	ai_chance = {
		value = 100
	}
	

	
}

dvg_conquer_england = {
	is_shown = {
		
		NOT = { exists = global_var:england_challenged }
		
		exists = c:BEO

		this = c:BEO
		
		exists = c:ENG
		
		has_law = law_type:law_monarchy
		
		
	}

    possible = {
		has_technology_researched = pan-nationalism
			
		has_law = law_type:law_monarchy
		
		exists = c:ENG
		
		NOT = {
		
		has_journal_entry = je_cattle_barons_wrath
				
		has_journal_entry = je_anglo_summit
		
		}
		
		c:ENG = {
						relations:root <= relations_threshold:poor
					}
		
	}
		
		

    when_taken = {
		s:STATE_LANCASHIRE = { 
			add_claim = ROOT
		}
		s:STATE_YORKSHIRE = { 
			add_claim = ROOT
			add_homeland = cu:beornian 
		}
		s:STATE_HOME_COUNTIES = { 
			add_claim = ROOT
		}
		s:STATE_EAST_ANGLIA = { 
			add_claim = ROOT
		}
		s:STATE_WEST_COUNTRY = { 
			add_claim = ROOT
			
		}
		s:STATE_MIDLANDS = { 
			add_claim = ROOT
		}
		create_incident = {
			country = c:ENG
			value = 15
		}
		set_global_variable = {
				name = england_challenged
				value = 0
			}
    }

	ai_chance = {
		value = 100
	}
}



dvg_anglo_summit = {
	is_shown = {
	
		exists = c:BEO

		this = c:BEO
		
		exists = c:ENG
		
		has_law = law_type:law_monarchy
		
		NOT = { exists = global_var:anglo_summit }
		
		c:ENG = {
						relations:root > relations_threshold:neutral
					}
		
		
	}

    possible = {

		OR = {
		has_technology_researched = pan-nationalism

		any_neighbouring_state = {
			owner = c:ENG
	 	}

		}
			
		has_law = law_type:law_monarchy
		
		exists = c:ENG
		
		c:ENG = {
						relations:root >= relations_threshold:cordial
					}
	}
		

    when_taken = {
		c:ENG = {
			trigger_event = { id = dvg_england.8 }
		}
		set_global_variable = anglo_summit
    }

	ai_chance = {
		value = 100
	}
}

dvg_beo_lot_union = {
	is_shown = {
	
		exists = c:BEO

		this = c:BEO
		
		exists = c:LOT
		
		
	}

    possible = {
		OR = {
			has_technology_researched = pan-nationalism
			AND = {
				has_law = law_type:law_monarchy
				custom_tooltip = {
				text = aigle_cavendish_tt
				OR = {
				ruler = {
					has_variable = is_edward
				}
				ruler = {
					has_variable = is_richard
				}
				ruler = {
					has_variable = is_richard
				}
				ruler = {
					has_variable = chef_de_aigle_var
				}
				}
				}
			}
			
			
		}
		
		c:LOT = {
			is_in_same_power_bloc = c:BEO

			relations:root >= relations_threshold:amicable
		}
	}
		

    when_taken = {
		trigger_event = { id = dvg_beornia.5 popup = yes }
		
		change_variable = {
				name = cattle_barons_var
				add = 1
			}
		
		s:STATE_TRANSFLEUVE.region_state:LOT = { set_state_owner = c:BEO}
    }

	ai_chance = {
		value = 100
	}
}

dvg_lot_beo_union = {
	is_shown = {
	
	exists = c:LOT
	
	this = c:LOT
	c:LOT = {has_law = law_type:law_monarchy}

	any_neighbouring_state = {
			owner = c:BEO
		}
		
	}

    possible = {
		OR = {
			has_technology_researched = pan-nationalism
			AND = {
				has_law = law_type:law_monarchy
				custom_tooltip = {
				text = aigle_cavendish_tt
				OR = {
				ruler = {
					has_variable = is_edward
				}
				ruler = {
					has_variable = is_richard
				}
				ruler = {
					has_variable = is_richard
				}
				ruler = {
					has_variable = chef_de_aigle_var
				}
				}
				}
			}
			
			
		}
		c:BEO = {
				is_in_same_power_bloc = c:LOT
				relations:root >= relations_threshold:amicable
			}
		
	}
		

    when_taken = {
		trigger_event = { id = dvg_beornia.6 popup = yes }
		
    }

	ai_chance = {
		value = 100
	}
}

dvg_establish_new_mercia = {
	is_shown = {
		exists = c:BEO
		this = c:BEO
		NOT = { has_global_variable = new_mercia }
	}

    possible = {
		OR = {
		exists = s:STATE_COLLASUYU.region_state:BEO
		exists = s:STATE_NEAR_COLLASUYU.region_state:BEO
		}
	}

    when_taken = {
		
		every_scope_state = {
			limit = {
				state_region = {
					is_homeland = cu:aimara
				}
				NOT = {
					state_region = {
					is_homeland = cu:beornian
					}
				}
			}
			state_region = {
				add_homeland = cu:beornian
			}
		}
		s:STATE_COLLASUYU.region_state:BEO = {
			add_modifier = {
			name = dvg_patagonian_settlement
			days = long_modifier_time
		}
		}
		s:STATE_NEAR_COLLASUYU.region_state:BEO = {
			add_modifier = {
			name = dvg_patagonian_settlement
			days = long_modifier_time
		}
		}
		s:STATE_CATAMARCA.region_state:BEO = {
			add_modifier = {
			name = dvg_patagonian_settlement
			days = long_modifier_time
		}
		}
		s:STATE_KUCHICHAY.region_state:BEO = {
			add_modifier = {
			name = dvg_patagonian_settlement
			days = long_modifier_time
		}
		}
		trigger_event = { id = dvg_beornia.21 popup = yes days = 10 }
		
		set_global_variable = {
				name = new_mercia
				value = 0
		}
		
		
    }

	ai_chance = {
		value = 100
	}
}

dvg_rennovating_camelot = {
	is_shown = {
		exists = c:BEO
		this = c:BEO
		
		NOT = { has_global_variable = camelot_renovated }
	}

    possible = {
		has_technology_researched = railways
		has_technology_researched = modern_sewerage
		has_technology_researched = bessemer_process
		has_technology_researched = reinforced_concrete
	
	}

    when_taken = {


		s:STATE_AVALON.region_state:BEO = {
			add_modifier = {
			name = dvg_rennovated_city
			days = -1
		}
		
		}
		add_modifier = {
			name = dvg_world_city
			days = 1200
			is_decaying	= yes
		}
		set_global_variable = {
				name = camelot_renovated
				value = 0
		}
		if = {
			limit = {
				ruler = {
					NOT = {
						has_trait = aesthete
					}
				}
			}
				ruler = {
				add_trait = aesthete
				}
			
		}
		ruler = {
			add_modifier = architect_of_change
		}
    }

	ai_chance = {
		value = 100
	}
}

dvg_falklands_purchase = {
	is_shown = {
		
		NOT = {
			has_variable = falklands_purchase_var
			owns_entire_state_region = STATE_SOUTH_ATLANTIC_ISLANDS
		}
		exists = c:SCA
		country_has_primary_culture = cu:beornian
		is_subject = no
		NOT = {
			has_variable = falklands_purchase_var
		}
		c:SCA = {
			any_scope_state = {
				state_region = s:STATE_SOUTH_ATLANTIC_ISLANDS 
			}
			is_subject = no
			is_player = no
		}
	}

	possible = {
		in_default = no
		taking_loans = no
		is_at_war = no
		gold_reserves > 100000
		OR = {
			has_global_variable = sca_beo_marriage
			c:SCA = {
				country_rank < rank_value:major_power
			}
			c:SCA = {
				has_attitude = {
					who = c:BEO
					attitude = genial
				}
			}
			c:SCA = {
				has_attitude = {
					who = c:BEO
					attitude = cooperative
				}
			}
			c:SCA = {
				has_attitude = {
					who = c:BEO
					attitude = loyal
				}
			}
		}
	}

	when_taken = {
		set_variable = {
			name = falklands_purchase_var
			value = yes
		}
		c:SCA = { trigger_event = { id = dvg_beornia.7 popup = yes days = 0 } }
	}

	ai_chance = {
		value = 0	
		if = {
			limit = { gold_reserves > 3000000 }
			add = 10
		}		
		else_if = {
			limit = { 
				gold_reserves > 0
				weekly_net_fixed_income > 100000
			}
			add = 10
		}
		else = {
			limit = {
				OR = {
					is_diplomatic_play_committed_participant = yes
					is_at_war = yes
				}
			}
			
			add = -1000
		}
	}
}

dvg_embrace_aimara = {

	is_shown = {
		exists = c:NME
		c:NME = this
	}
	
	possible = {
	
	 cu:aimara = {
		cultural_acceptance_base = {
			target = THIS
			value > acceptance_status_3
		}
	 }
	
	}
	
	when_taken = {
		add_primary_culture = cu:aimara
    }
	ai_chance = {
		value = 100
	}

}

dvg_drug_treatment = {

	is_shown = {
		any_primary_culture = {
			has_cultural_obsession = opium
		}
		
	}
	
	possible = {
	
	 	institution_investment_level = {
					 institution = institution_health_system
					 value = 3
				 }
		NOT = { has_law = law_type:law_no_police
		}
	
		bureaucracy > 0

		NOT = {
			custom_tooltip = {
				text = richard_tt
			}
			ruler = {
				has_variable = is_richard
			}
		}
	
	}
	
	when_taken = {
		every_primary_culture = {
			remove_cultural_obsession = opium
		}
    }
	ai_chance = {
		value = 100
	}
}

dvg_beornia_odonia = {

	is_shown = {
		exists = c:BEO
		this = c:BEO
		exists = c:ODO
		exists = c:LOT
		
		NOT = { has_global_variable = beornia_odonia }
		
	}
	
	possible = {
	
	c:LOT = {is_player = no}
	
	is_diplomatic_play_committed_participant = no
	
	}
	
	when_taken = {
		trigger_event = { id = dvg_beornia.8 popup = yes }
		set_global_variable = {
			name = beornia_odonia
			value = 0
		}
    }
	ai_chance = {
		value = 100
	}
}

dvg_beornia_aigle = {

	is_shown = {
		exists = c:BEO
		this = c:BEO
		exists = c:LOT
	
	 exists = global_var:lotharingia_liberal
	 
	 NOT = { exists = c:ODO }
	 NOT = {exists = global_var:odonia_puppet}
		
	}
	
	possible = {
	
	c:LOT = {
				 relations:root < relations_threshold:cordial
			}
	
	is_diplomatic_play_committed_participant = no
	
	}
	
	when_taken = {
		c:LOT = {trigger_event = { id = dvg_beornia.17 popup = yes days = 50 } }
		
		set_global_variable = odonia_puppet
    }
	ai_chance = {
		value = 100
	}
}

dvg_proclaim_hbe = {
	is_shown = {
		exists = c:HBE
		this = c:HBE
		is_player = yes

		NOT = {
			has_global_variable = hbe_attack_ameriga
		}
	}


    possible = {
		
		has_journal_entry = je_ameriga_conquer


	}

    when_taken = {
		trigger_event = {
			id = dvg_beornia.18
		}
    }

	ai_chance = {
		value = 100
	}
}

dvg_heisenberg = {
	is_shown = {
		exists = c:HBE
		this = c:HBE
		cu:north_german = {
			root = {
				cultural_acceptance_base = { target = prev value > acceptance_status_3 }
			}
		}
		NOT = { has_global_variable = breaking_bad }
	
	
		NOT = { has_game_rule = plausible_formable_nations 
			is_banning_goods = g:opium
		}
		OR = {
			capital.market = {
			mg:opium = { market_goods_pricier > 0.40 }
			}
			any_primary_culture = {
			has_cultural_obsession = opium
			}
			has_variable = coke_okay
		}
		
	}
	
	possible = {
	
		has_technology_researched = fractional_distillation
		has_technology_researched = pharmaceuticals

		capital.market = {
			mg:opium = { market_goods_pricier > 0.20 }
		}
		
		NOT = { has_law = law_type:law_no_schools }		
	
	}
	
	when_taken = {
		
		trigger_event = { id = dvg_hbe.8 popup = yes } 
		
		set_global_variable = {
				name = breaking_bad
				value = 0
			}
    }
	ai_chance = {
		value = 100
	}

}
dvg_demand_transfleuve = {
	is_shown = {
		exists = c:BEO
		this = c:BEO
		exists = c:LOT
		
		NOT = {
			has_global_variable = transfleuve_demanded
		}
		NOT = { owns_entire_state_region = STATE_TRANSFLEUVE }
		c:LOT = { owns_entire_state_region = STATE_TRANSFLEUVE }

	}

    possible = {

		
			c:LOT = {
				OR = {
					has_attitude = {
					who = c:BEO
					attitude = genial
					}
					has_attitude = {
					who = c:BEO
					attitude = cooperative
					}
				}
				
			}
			
		
		
		NOT = {is_diplomatic_play_enemy_of = c:LOT}

		c:BEO = {is_at_war = no}

		c:LOT = {is_at_war = no}
		
	
	}

    when_taken = {
		c:LOT = {trigger_event = { id = dvg_beornia.23 }
		post_proposal = proposal_diplomatic_action_call_in_obligation
				}
		set_global_variable = {
			name = transfleuve_demanded
			value = 0
		}
    }

	ai_chance = {
		value = 100
	}
}
dvg_annex_mapuche = {
	is_shown = {
	
		NOT = { is_country_type = decentralized }

		NOT = { owns_entire_state_region = STATE_LANDS_END }

		NOT = { owns_entire_state_region = STATE_NEW_CORNWALL}


		country_has_primary_culture = cu:patagonian
		
		
	}

    possible = {

		OR = {
			is_player = yes
			year >= 1865
			is_country_type = recognized
		}
		OR = {
		has_technology_researched = nationalism
		is_country_type = recognized
		}
		has_technology_researched = colonization
		NOT = { has_law = law_type:law_no_colonial_affairs }
	
	}

    when_taken = {
		every_country = {
			if = {
				limit = {
					is_ai = yes			
					country_has_primary_culture = cu:shona
				}			
				root = { annex = prev }
			}
		}
		create_incident = {
			country = ROOT
			value = 6
		}
		
    }
	ai_chance = {
		value = 1
	}
	
}

dvg_cavendish_yorkshire = {
	is_shown = {
		exists = c:BEO
		this = c:BEO
		exists = c:ENG
		
		NOT = { owns_entire_state_region = STATE_YORKSHIRE }
		c:ENG = { owns_entire_state_region = STATE_YORKSHIRE }

	}

    possible = {

		c:ENG = {owes_obligation_to = c:BEO

				}



		
		NOT = {is_diplomatic_play_enemy_of = c:ENG}

		c:BEO = {is_at_war = no}

		c:ENG = {is_at_war = no}
		
	
	}

    when_taken = {
		c:ENG = {trigger_event = { id = dvg_england.2 }
		post_proposal = proposal_diplomatic_action_call_in_obligation
				}
		set_global_variable = {
			name = cavendish_yorkshire
			value = 0
		}
    }

	ai_chance = {
		value = 100
	}
}

dvg_beornia_aid = {
	is_shown = {
		exists = c:ENG
		this = c:ENG
		exists = c:BEO

		c:BEO = {  has_law = law_type:law_monarchy	}
		
		NOT = { has_global_variable = beornia_support }
	}

    possible = {
		is_diplomatic_play_committed_participant = yes


		is_diplomatic_play_enemy_of = c:DUA
	}

    when_taken = {
		c:BEO = {
			trigger_event = { id = dvg_england.1 popup = yes }	
		}
		set_global_variable = beornia_support

    }

	ai_chance = {
		value = 100
	}
}
dvg_attack_gps = {
	is_shown = {
		OR = {
			AND = {	
				exists = c:HBE
			this = c:HBE
			NOT = {
			has_global_variable = hbe_vs_gps
			}
			}
			infamy > 150
		}
		
	}

    possible = {
		is_diplomatic_play_committed_participant = no
		OR = {
			has_journal_entry = je_world_conquer
		}
	}

    when_taken = {
		every_country = {
			limit = { 
			
			NOT = { country_has_primary_culture = cu:beornian }
			OR = {
			country_rank = rank_value:great_power
			country_rank = rank_value:major_power
			}
						
			}
			save_scope_as = hbe_target
			
			trigger_event = { id = dvg_hbe.1  }
		}
			set_global_variable = hbe_vs_gps

    }

	ai_chance = {
		value = 100
	}
}


dvg_pr_campaign = {

	is_shown = {
		is_player = yes
		has_technology_researched = mass_communication
	}
	
	possible = {
	
		NOR = {
			has_modifier = pr_campaign_expenses
			ruler = {
				has_modifier = pr_campaign
			}
		}
		has_technology_researched = camera
	}
	when_taken = {
		ruler = {
			add_modifier = {
				name = pr_campaign
			}
		}
		add_modifier = {
				name = pr_campaign_expenses
		}
    }
	ai_chance = {
		value = 100
	}
}

dvg_pr_campaign_cancel = {

	is_shown = {
		has_modifier = pr_campaign_expenses

	}
	
	possible = {
	
		has_modifier = pr_campaign_expenses

	}
	when_taken = {
		ruler = {
			remove_modifier = pr_campaign
			add_modifier = {
				name = pr_campaign
				months = 12
				is_decaying = yes
			}
		}
		remove_modifier = pr_campaign_expenses
    }
	ai_chance = {
		value = 100
	}
}

drugs_4_beornia = {

	is_shown = {
		exists = c:BEO
		is_ai = yes
		NOT = {
			c:BEO = this
			c:BEO = {
				has_variable = opium_wars_target
			}
		}
		OR = {
			has_global_variable = carolean_victory
			c:BEO = {
				has_law = law_type:law_industry_banned
			}
			c:BEO = {
				has_law = law_type:law_agrarianism
			}
		}
		OR = {
			has_interest_marker_in_region = region_la_plata

			AND = {
				has_interest_marker_in_region = region_andes
				c:BEO = {
					any_scope_state = {
						region = sr:region_andes 
					}
				}
			}
		}
	}
	
	possible = {
		any_scope_state = {
			has_building = building_opium_plantation
		}
		capital.market = {
			NOT = {
				mg:opium = { market_goods_pricier < 0.20 }
			}
		}

		has_technology_researched = pharmaceuticals
	}
	when_taken = {
		

		c:BEO = {
			set_variable = opium_wars_target

			change_relations = {
				country = ROOT
				value = -10
			}
		}
		set_variable = opium_wars_aggressor
    }
	ai_chance = {
		value = 100
	}
}